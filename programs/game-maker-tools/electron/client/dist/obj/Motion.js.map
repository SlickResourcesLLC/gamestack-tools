{"version":3,"sources":["../../../ecma/obj/Motion.js"],"names":["Motion","args","distance","getArg","curvesList","curvesObject","object_id","curve","TWEEN","Easing","Quadratic","InOut","targetRotation","name","description","curveString","getCurveString","setCurve","line","duration","delay","key","fallback","hasOwnProperty","c","Quazar","each","ix","easing","iy","easeType","indexOf","toLowerCase","push","__inst","$","cps","split","s1","s2","tweens","objects","Game","sprites","item","id_item","id","target","x","position","y","z","targetR","rotation","Tween","Elastic","to","onUpdate","onComplete","complete","isNaN","fire","__tweenObject","window","setTimeout","length","start","engage","fun","t","f","canvas","document","createElement","width","height","context","getContext","fillStyle","fillRect","lineWidth","strokeStyle","beginPath","moveTo","lineTo","closePath","stroke","position_old","Linear","None"],"mappings":"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","file":"Motion.js","sourcesContent":["/**\r\n * Created by The Blakes on 04-13-2017\r\n *\r\n */\r\n\r\nclass Motion {\r\n    constructor(args) {\r\n\r\n        this.distance = this.getArg(args, 'distance', this.getArg(args, 'distances', false));\r\n\r\n        this.curvesList = this.curvesObject();\r\n\r\n        this.object_id = [args.object_id] || [\"__blank\"]\r\n\r\n        this.curve = this.getArg(args, 'curve', TWEEN.Easing.Quadratic.InOut);\r\n\r\n        this.targetRotation = this.getArg(args, 'targetRotation', 0);\r\n\r\n        this.name = this.getArg(args, 'name', \"__\");\r\n\r\n        this.description = this.getArg(args, 'description', false);\r\n\r\n        this.curveString = this.getCurveString();\r\n\r\n        this.setCurve(this.curveString);\r\n\r\n        this.line = this.getArg(args, 'line', false);\r\n\r\n        this.duration = this.getArg(args, 'duration', 500);\r\n\r\n        this.delay = this.getArg(args, 'delay', 0);\r\n\r\n        this.duration = this.getArg(args, 'duration', false);\r\n\r\n\r\n    }\r\n\r\n    getArg(args, key, fallback) {\r\n\r\n        if (args.hasOwnProperty(key)) {\r\n\r\n            return args[key];\r\n\r\n        }\r\n        else {\r\n            return fallback;\r\n\r\n        }\r\n\r\n    }\r\n\r\n    curvesObject() {\r\n\r\n        var c = [];\r\n\r\n        Quazar.each(TWEEN.Easing, function (ix, easing) {\r\n\r\n            Quazar.each(easing, function (iy, easeType) {\r\n\r\n                if (['in', 'out', 'inout'].indexOf(iy.toLowerCase()) >= 0) {\r\n\r\n                    c.push(ix + \"_\" + iy);\r\n\r\n                }\r\n\r\n            });\r\n\r\n        });\r\n\r\n        return c;\r\n\r\n    }\r\n\r\n\r\n    getCurveString() {\r\n\r\n        var __inst = this;\r\n\r\n        var c;\r\n\r\n        $.each(TWEEN.Easing, function (ix, easing) {\r\n\r\n            $.each(TWEEN.Easing[ix], function (iy, easeType) {\r\n\r\n\r\n                if (__inst.curve == TWEEN.Easing[ix][iy]) {\r\n\r\n                    c = ix + \"_\" + iy;\r\n\r\n                }\r\n\r\n            });\r\n\r\n        });\r\n\r\n\r\n        return c;\r\n\r\n    }\r\n\r\n\r\n    setCurve(c) {\r\n\r\n        var cps = c.split('_');\r\n\r\n        var s1 = cps[0], s2 = cps[1];\r\n\r\n\r\n        var curve = TWEEN.Easing.Quadratic.InOut;\r\n\r\n\r\n        $.each(TWEEN.Easing, function (ix, easing) {\r\n\r\n            $.each(TWEEN.Easing[ix], function (iy, easeType) {\r\n\r\n\r\n                if (ix == s1 && iy == s2) {\r\n\r\n                    // alert('setting curve');\r\n\r\n                    curve = TWEEN.Easing[ix][iy];\r\n\r\n                }\r\n\r\n            });\r\n\r\n        });\r\n\r\n        this.curve = curve;\r\n\r\n\r\n        return curve;\r\n\r\n    }\r\n\r\n    engage() {\r\n\r\n        var tweens = [];\r\n\r\n        //construct a tween::\r\n\r\n        var __inst = this;\r\n\r\n\r\n        var objects = {};\r\n\r\n        $.each(Game.sprites, function (ix, item) {\r\n\r\n            $.each(__inst.object_id, function (iy, id_item) {\r\n\r\n                if (item.id == id_item) {\r\n\r\n                    //  alert('match');\r\n\r\n                    objects[ix] = item;\r\n\r\n                }\r\n\r\n            });\r\n\r\n\r\n        });\r\n\r\n\r\n        var target = {\r\n\r\n            x: __inst.distance.x + objects[0].position.x,\r\n            y: __inst.distance.y + objects[0].position.y,\r\n            z: __inst.distance.z + objects[0].position.z\r\n\r\n        };\r\n\r\n        if (__inst.targetRotation > 0 || __inst.targetRotation < 0) {\r\n\r\n\r\n            var targetR = __inst.targetRotation + objects[0].rotation.x;\r\n\r\n            //we have a target\r\n            tweens[0] = new TWEEN.Tween(objects[0].rotation)\r\n                .easing(__inst.curve || TWEEN.Easing.Elastic.InOut)\r\n\r\n                .to({x: targetR}, __inst.duration)\r\n                .onUpdate(function () {\r\n                    //console.log(objects[0].position.x,objects[0].position.y);\r\n\r\n\r\n                })\r\n                .onComplete(function () {\r\n                    //console.log(objects[0].position.x, objects[0].position.y);\r\n                    if (__inst.complete) {\r\n\r\n                        __inst.complete();\r\n\r\n                    }\r\n\r\n\r\n                });\r\n\r\n\r\n        }\r\n\r\n        //we have a target\r\n        tweens.push(new TWEEN.Tween(objects[0].position)\r\n            .easing(__inst.curve || TWEEN.Easing.Elastic.InOut)\r\n\r\n            .to(target, __inst.duration)\r\n            .onUpdate(function () {\r\n                //console.log(objects[0].position.x,objects[0].position.y);\r\n\r\n\r\n            })\r\n            .onComplete(function () {\r\n                //console.log(objects[0].position.x, objects[0].position.y);\r\n\r\n                if (__inst.complete) {\r\n\r\n                    __inst.complete();\r\n\r\n                }\r\n\r\n\r\n            }));\r\n\r\n\r\n        __inst.delay = !isNaN(__inst.delay) && __inst.delay > 0 ? __inst.delay : 0;\r\n\r\n\r\n        return {\r\n\r\n            tweens: tweens,\r\n\r\n            delay: __inst.delay,\r\n\r\n            fire: function () {\r\n\r\n                var __tweenObject = this;\r\n\r\n                window.setTimeout(function () {\r\n\r\n                    for (var x = 0; x < __tweenObject.tweens.length; x++) {\r\n\r\n                        __tweenObject.tweens[x].start();\r\n\r\n                    }\r\n\r\n                }, this.delay);\r\n\r\n            }\r\n\r\n        }\r\n\r\n    }\r\n\r\n    start() {\r\n        this.engage().fire();\r\n\r\n    }\r\n\r\n\r\n    onComplete(fun) {\r\n        this.complete = fun;\r\n\r\n    }\r\n\r\n    // obj.getGraphCanvas( $(c.domElement), value.replace('_', '.'), TWEEN.Easing[parts[0]][parts[1]] );\r\n\r\n    getGraphCanvas( t, f, c) {\r\n\r\n        var canvas = document.createElement('canvas');\r\n\r\n        canvas.id = 'curve-display';\r\n\r\n        canvas.width = 180;\r\n        canvas.height = 100;\r\n\r\n\r\n        var context = canvas.getContext('2d');\r\n        context.fillStyle = \"rgb(250,250,250)\";\r\n        context.fillRect(0, 0, 180, 100);\r\n\r\n        context.lineWidth = 0.5;\r\n        context.strokeStyle = \"rgb(230,230,230)\";\r\n\r\n        context.beginPath();\r\n        context.moveTo(0, 20);\r\n        context.lineTo(180, 20);\r\n        context.moveTo(0, 80);\r\n        context.lineTo(180, 80);\r\n        context.closePath();\r\n        context.stroke();\r\n\r\n        context.lineWidth = 2;\r\n        context.strokeStyle = \"rgb(255,127,127)\";\r\n\r\n        var position = {x: 5, y: 80};\r\n        var position_old = {x: 5, y: 80};\r\n\r\n        new TWEEN.Tween(position).to({x: 175}, 2000).easing(TWEEN.Easing.Linear.None).start();\r\n        new TWEEN.Tween(position).to({y: 20}, 2000).easing(f).onUpdate(function () {\r\n\r\n            context.beginPath();\r\n            context.moveTo(position_old.x, position_old.y);\r\n            context.lineTo(position.x, position.y);\r\n            context.closePath();\r\n            context.stroke();\r\n\r\n            position_old.x = position.x;\r\n            position_old.y = position.y;\r\n\r\n        }).start();\r\n\r\n        return canvas;\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n"]}