{"version":3,"sources":["../../../ecma/obj/Motionstack.js"],"names":["Motionstack","args","distance","getArg","curvesList","curvesObject","object_id","curve","TWEEN","Easing","Quadratic","InOut","targetRotation","name","description","curveString","getCurveString","setCurve","line","duration","delay","key","fallback","hasOwnProperty","c","Quazar","each","ix","easing","iy","easeType","indexOf","toLowerCase","push","__inst","$","cps","split","s1","s2","tweens","objects","Game","sprites","item","id_item","id","target","x","position","y","z","targetR","rotation","Tween","Elastic","to","onUpdate","onComplete","complete","isNaN","fire","__tweenObject","window","setTimeout","length","start","engage","fun","Motion","key_members","value","add","update","obj","console","error","object"],"mappings":"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","file":"Motionstack.js","sourcesContent":["/**\r\n * Created by The Blakes on 04-13-2017\r\n *\r\n */\r\n\r\nclass Motionstack {\r\n    constructor(args) {\r\n\r\n        this.distance =  this.getArg(args, 'distance', this.getArg(args, 'distances', false));\r\n\r\n        this.curvesList =  this.curvesObject();\r\n\r\n        this.object_id = [args.object_id] || [\"__blank\"]\r\n\r\n        this.curve =  this.getArg(args, 'curve', TWEEN.Easing.Quadratic.InOut);\r\n\r\n        this.targetRotation = this.getArg(args, 'targetRotation', 0);\r\n\r\n\r\n\r\n        this.name =  this.getArg(args, 'name', \"__\");\r\n\r\n        this.description =  this.getArg(args, 'description', false);\r\n\r\n        this.curveString = this.getCurveString();\r\n\r\n        this.setCurve(this.curveString);\r\n\r\n        this.line =  this.getArg(args, 'line', false);\r\n\r\n        this.duration =  this.getArg(args, 'duration', 500);\r\n\r\n        this.delay =  this.getArg(args, 'delay', 0);\r\n\r\n        this.duration = this.getArg(args, 'duration', false);\r\n\r\n\r\n    }\r\n\r\n    getArg(args, key, fallback) {\r\n\r\n        if (args.hasOwnProperty(key)) {\r\n\r\n            return args[key];\r\n\r\n        }\r\n        else {\r\n            return fallback;\r\n\r\n        }\r\n\r\n    }\r\n\r\n    curvesObject()\r\n{\r\n\r\n    var c =[];\r\n\r\n  Quazar.each(TWEEN.Easing, function(ix, easing){\r\n\r\n      Quazar.each(easing, function(iy, easeType){\r\n\r\n          if(['in', 'out', 'inout'].indexOf(iy.toLowerCase()) >= 0)\r\n          {\r\n\r\n              c.push(ix + \"_\" + iy);\r\n\r\n          }\r\n\r\n      });\r\n\r\n  });\r\n\r\n    return c;\r\n\r\n}\r\n\r\n\r\ngetCurveString()\r\n{\r\n\r\n    var __inst = this;\r\n\r\n    var c;\r\n\r\n    $.each(TWEEN.Easing, function(ix, easing){\r\n\r\n        $.each(TWEEN.Easing[ix], function(iy, easeType){\r\n\r\n\r\n            if(__inst.curve == TWEEN.Easing[ix][iy])\r\n            {\r\n\r\n                c = ix + \"_\" + iy;\r\n\r\n            }\r\n\r\n        });\r\n\r\n    });\r\n\r\n\r\n    return c;\r\n\r\n}\r\n\r\n\r\nsetCurve(c)\r\n{\r\n\r\n    var cps = c.split('_');\r\n\r\n    var s1 = cps[0], s2 = cps[1];\r\n\r\n\r\n    var curve = TWEEN.Easing.Quadratic.InOut;\r\n\r\n\r\n    $.each(TWEEN.Easing, function(ix, easing){\r\n\r\n        $.each(TWEEN.Easing[ix], function(iy, easeType){\r\n\r\n\r\n            if(ix == s1 && iy == s2)\r\n            {\r\n\r\n               // alert('setting curve');\r\n\r\n                curve = TWEEN.Easing[ix][iy];\r\n\r\n            }\r\n\r\n        });\r\n\r\n    });\r\n\r\n    this.curve = curve;\r\n\r\n\r\n    return curve;\r\n\r\n}\r\n\r\n    engage()\r\n    {\r\n\r\n        var tweens = [];\r\n\r\n        //construct a tween::\r\n\r\n        var __inst = this;\r\n\r\n\r\n        var objects = {};\r\n\r\n       $.each(Game.sprites, function(ix, item){\r\n\r\n           $.each(__inst.object_id, function(iy, id_item) {\r\n\r\n               if(item.id == id_item)\r\n               {\r\n\r\n              //  alert('match');\r\n\r\n                objects[ix] = item;\r\n\r\n               }\r\n\r\n           });\r\n\r\n\r\n\r\n       });\r\n\r\n\r\n        var target = {\r\n\r\n            x:__inst.distance.x + objects[0].position.x,\r\n            y:__inst.distance.y + objects[0].position.y,\r\n            z:__inst.distance.z + objects[0].position.z\r\n\r\n        };\r\n\r\n        if(__inst.targetRotation > 0 || __inst.targetRotation < 0)\r\n        {\r\n\r\n\r\n           var targetR =__inst.targetRotation + objects[0].rotation.x;\r\n\r\n            //we have a target\r\n            tweens[0] = new TWEEN.Tween(objects[0].rotation )\r\n                .easing(__inst.curve || TWEEN.Easing.Elastic.InOut)\r\n\r\n                .to({x:targetR}, 500)\r\n                .onUpdate(function() {\r\n                    //console.log(objects[0].position.x,objects[0].position.y);\r\n\r\n\r\n\r\n                })\r\n                .onComplete(function() {\r\n                    //console.log(objects[0].position.x, objects[0].position.y);\r\n                    if(__inst.complete)\r\n                    {\r\n\r\n                        __inst.complete();\r\n\r\n                    }\r\n\r\n\r\n                });\r\n\r\n\r\n\r\n        }\r\n\r\n            //we have a target\r\n            tweens.push(new TWEEN.Tween(objects[0].position)\r\n                .easing(__inst.curve || TWEEN.Easing.Elastic.InOut)\r\n\r\n                .to(target, 500)\r\n                .onUpdate(function () {\r\n                    //console.log(objects[0].position.x,objects[0].position.y);\r\n\r\n\r\n                })\r\n                .onComplete(function () {\r\n                    //console.log(objects[0].position.x, objects[0].position.y);\r\n\r\n                    if(__inst.complete)\r\n                    {\r\n\r\n                        __inst.complete();\r\n\r\n                    }\r\n\r\n\r\n                }));\r\n\r\n\r\n       __inst.delay  = !isNaN(__inst.delay) && __inst.delay > 0 ?  __inst.delay : 0;\r\n\r\n\r\n        return{\r\n\r\n               tweens:tweens,\r\n\r\n               delay:__inst.delay,\r\n\r\n                fire:function() {\r\n\r\n                   var __tweenObject = this;\r\n\r\n                   window.setTimeout(function(){\r\n\r\n                       for(var x = 0; x < __tweenObject.tweens.length; x++) {\r\n\r\n                           __tweenObject.tweens[x].start();\r\n\r\n                       }\r\n\r\n                   }, this.delay);\r\n\r\n\r\n                }\r\n\r\n\r\n        }\r\n\r\n\r\n    }\r\n\r\n\r\n    start()\r\n    {\r\n        this.engage().fire();\r\n\r\n    }\r\n\r\n\r\n    onComplete(fun)\r\n    {\r\n        this.complete = fun;\r\n\r\n    }\r\n\r\n}\r\n\r\n\r\n\r\nvar Motion = function(key_members, value)\r\n{\r\n\r\n    return {\r\n\r\n        add:function(){  this.update = function(obj){ Quazar.each(key_members, function(ix, item){ obj[item] += value; }); }; },\r\n\r\n        update:function(){ console.error('unset update'); },\r\n\r\n        to:function(obj){ this.update(); },\r\n\r\n        object:object,\r\n\r\n        value:value,\r\n\r\n        id: id\r\n\r\n    }\r\n\r\n\r\n};\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n"]}