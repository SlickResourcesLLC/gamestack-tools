{"version":3,"sources":["../../../ecma/Quick2d/concat/Quick2d.js"],"names":["Sound","src","x","sound","Audio","onLoad","play","GameImage","onCreate","Object","image","document","createElement","ext","substring","lastIndexOf","length","error","domElement","onload","__gameInstance","Quazar","DEBUG","gui_mode","__gameWindow","__sprites","__animations","samples","log_modes","log_mode","recursionCount","__gameWindowList","createid","Date","getUTCMilliseconds","getActionablesCheckList","__inst","actionables","$","each","sprites","ix","item","concat","sounds","motionstacks","animations","interlog","message","div","isNaN","quit","Error","console","info","m","log","animate","TWEEN","update","time","requestAnimationFrame","ctx","clearRect","canvas","width","height","draw","start","Collision","spriteRectanglesCollide","obj1","obj2","position","size","y","_gameWindow","setGameWindow","gameWindow","getGameWindow","assignAll","object","args","keys","$Q","list","onResult","onComplete","i","ready_callstack","ready","callback","push","callReady","funx","lib","call","isAtPlay","InputEvents","init","getArg","key","fallback","hasOwnProperty","QUAZAR","$q","mousemove","leftclick","rightclick","middleclick","wheelup","wheelDown","space","tab","shift","enter","extend","evt_key","onFinish","toLowerCase","indexOf","cleanKey","down","up","getMousePos","e","pageX","pageY","clientX","body","scrollLeft","documentElement","clientY","scrollTop","offsetLeft","offsetTop","fullMoveInputEvents","event","pos","Array","el","onkeydown","value","String","fromCharCode","keyCode","onkeyup","onmousedown","which","preventDefault","onmouseup","addEventListener","window","_preQuazar_windowLoad","Canvas","sprite","active","onScreen","Game","WIDTH","HEIGHT","drawPortion","drawFrameWithRotation","img","fx","fy","fw","fh","deg","canvasContextObj","flip","save","Math","round","rad","PI","translate","rotate","scale","drawImage","restore","frame","selected_animation","selected_frame","camera","z","targetSize","realWidth","realHeight","offset","rotation","framePos","frameSize","flipX","GameWindow","backgrounds","interactives","forces","getContext","__camera","Vector3","onUpdate","listout","id","str","name","player","def_update","arg","_gw","TextDisplay","ItemDisplay","font","fontSize","text","color","BarDisplay","VideoDisplay","undefined","r","Vector2","Point","Size","Vertex","Rotation","Rot","Position","Pos","Rectangle","min","max","VectorBounds","VectorFrameBounds","termPoint","Circle","radius","getArgs","Animation","_anime","description","frames","type","delay","cix","frameBounds","frameOffset","apply2DFrames","parent","priority","earlyTerm","hang","duration","effects","timer","__gameLogic","setType","__frametype","fcount","quitLoop","resetFrames","engage","complete","tween","Tween","easing","curve","Easing","Linear","None","to","isComplete","fun","Callables","fire","run","process","Camera","accel","distSize","Controls","__controller","controller","extension","formerCall","extendedCall","Force","subjects","origin","massObjects","minSpeed","itemx","accelY","__falling","iy","itemy","collide_stop","StatEffect","__is","collideables","extras","GameLogic","gameEffectList","gameEffects","gameeffect","GamepadAdapter","__gamepads","intervals","controller_stack","_gpinst","events","setInterval","gps","navigator","getGamepads","clearInterval","game_pad_index","game_pad","gp","stick_left","stick_right","buttons","on","parts","split","number","parseInt","gpEvents","process_buttons","process_axes","axes","axis1","axia2","ceil","pressed","clearance_1","gpc","bkey","gamepads","gpix","GamepadEvents","GravityAction","Graviton","GravitationalRay","Motion","distance","curvesList","curvesObject","parent_id","object_id","Quadratic","InOut","targetRotation","curveString","getCurveString","setCurve","line","c","easeType","cps","s1","s2","tweens","objects","target","targetR","Elastic","__tweenObject","setTimeout","t","f","context","fillStyle","fillRect","lineWidth","strokeStyle","beginPath","moveTo","lineTo","closePath","stroke","position_old","Sprite","__specialPresets","SpritePresets","_spr","motions","create_id","collision_bounds","speed","rot_speed","rot_accel","anime","w","h","options","prep_key","spread","angleSpread","total","totalBullets","numberBullets","animation","bullet","screenDuration","event_arg","alert","setAnimation","abs","assertSpeed","diff","rate","amt","max_y","file_path","getJSON","data","SpritePresetsOptions","Flight","__args","top_down_flight","side_scroll_flight","Running","side_scroll_runner","__lib","Quick2d","accelX","spr","decelX","decelY","basic_stop_collideable","top_stop_collideable","Powerups","grabbable_power_up","ControllerStickMotion","stick_move_x","stick_move_y","Jumping","Shooting","InterfaceCallback","SpeechInterfaceStructure","options_structure","scroll","create_object_resource","constructors","IF","__allConstructors","selectedType","selectByName","apply_speech_value","applySpeechValue","save_object_resource","selected_object","confirm","confirmation","retrieve_object_resource","browse_object_resources","search_object_resources","delete_object_resources","apply_value"],"mappings":"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","file":"Quick2d.js","sourcesContent":["/**\r\n * Created by The Blakes on 3/16/2017.\r\n */\r\n\r\n\r\n/**\r\n * Created by The Blakes on 3/16/2017.\r\n */\r\n\r\n\r\n\r\n/*\r\n * #Section Media\r\n *\r\n * */\r\n\r\n\r\n/*\r\n * Sound\r\n *\r\n * Simple Sound object:: uses Jquery: audio\r\n *\r\n * TODO : test Sound() for multiple simultaneous sounds, modify as needed\r\n *\r\n * */\r\n\r\nclass Sound {\r\n\r\n    constructor(src) {\r\n\r\n        if(typeof(src)== 'object')\r\n        {\r\n\r\n            for(var x in src)\r\n            {\r\n                this[x] = src[x];\r\n\r\n            }\r\n\r\n            this.sound = new Audio(src.src);\r\n\r\n            this.onLoad = src.onLoad || function(){};\r\n\r\n        }\r\n\r\n      else  if (typeof(src)=='string') {\r\n\r\n            this.src = src;\r\n\r\n            this.sound = new Audio(this.src);\r\n\r\n        }\r\n\r\n        this.onLoad = this.onLoad || function(){};\r\n\r\n        if (typeof(this.onLoad) == 'function') {\r\n\r\n            this.onLoad(this.sound);\r\n\r\n        }\r\n\r\n    }\r\n\r\n    play() {\r\n        if (typeof(this.sound) == 'object' && typeof(this.sound.play) == 'function') {\r\n\r\n            this.sound.play();\r\n\r\n        }\r\n\r\n\r\n    }\r\n\r\n}\r\n\r\n\r\n/*\r\n * GameImage\r\n *\r\n * Simple GameImage\r\n *\r\n * */\r\n\r\nclass GameImage {\r\n\r\n    constructor(src, onCreate) {\r\n\r\n       // Quazar.log('initializing image');\r\n\r\n        if (src instanceof Object) {\r\n\r\n            //alert('getting image from image');\r\n\r\n            this.image = document.createElement('IMG');\r\n\r\n            this.image.src = src.src;\r\n\r\n            this.src = src.src;\r\n\r\n        }\r\n\r\n        else if (typeof(src) == 'string') {\r\n\r\n        let ext = src.substring(src.lastIndexOf('.'), src.length);\r\n\r\n            this.image = document.createElement('IMG');\r\n\r\n            this.image.src =  src;\r\n\r\n            this.src = this.image.src;\r\n\r\n\r\n        }\r\n\r\n\r\n\r\n\r\n        if(!this.image)\r\n        {\r\n            this.image = {error:\"Image not instantiated, set to object by default\"};\r\n\r\n        }\r\n\r\n        this.domElement = this.image;\r\n\r\n        this.image.onload = function () {\r\n\r\n            if (typeof(this.onCreate) == 'function') {\r\n\r\n                this.onCreate(this.image);\r\n\r\n            }\r\n\r\n\r\n        }\r\n\r\n    }\r\n\r\n     getImage() {\r\n\r\n        return this.image;\r\n\r\n    }\r\n\r\n}\r\n\r\n\r\n//Quazar: a main / game lib object::\r\nlet __gameInstance = __gameInstance || {};\r\n\r\nlet Quazar = {\r\n\r\n    DEBUG: false,\r\n\r\n    gui_mode:true,\r\n\r\n    __gameWindow:{},\r\n\r\n    __sprites:[],\r\n\r\n    __animations:[],\r\n\r\n    samples: {},\r\n\r\n    log_modes:['reqs', 'info', 'warning'],\r\n\r\n    log_mode:\"all\",\r\n\r\n    recursionCount:0,\r\n\r\n    __gameWindowList:[],\r\n\r\n\r\n    createid:function()\r\n    {\r\n        new Date().getUTCMilliseconds() + \"\";\r\n    },\r\n\r\n    getActionablesCheckList:function()\r\n    {\r\n        //every unique sound, animation, tweenmotion in the game\r\n\r\n        let __inst = {};\r\n\r\n        let actionables = [];\r\n\r\n        $.each(this.sprites, function(ix, item){\r\n\r\n            actionables.concat(item.sounds);\r\n\r\n            actionables.concat(item.motionstacks);\r\n\r\n            actionables.concat(item.animations);\r\n\r\n\r\n        });\r\n\r\n\r\n    },\r\n\r\n    interlog:function(message, div) //recursive safe :: won't go crazy with recursive logs\r\n    {\r\n        this.recursionCount++;\r\n\r\n        if(!isNaN(div) && this.recursionCount % div == 0)\r\n        {\r\n         //   console.log('Interval Log:'+  message);\r\n\r\n        }\r\n\r\n    },\r\n\r\n    error:function(quit, message)\r\n    {\r\n\r\n        if(quit)\r\n        {\r\n            throw new Error(message);\r\n\r\n        }\r\n        else\r\n        {\r\n            console.error('E!' + message);\r\n\r\n        }\r\n\r\n    },\r\n\r\n    info: function (m) {\r\n\r\n        if(Quazar.DEBUG) {\r\n\r\n            console.info('Info:' + m);\r\n\r\n        }\r\n    },\r\n\r\n\r\n    log: function (m) {\r\n\r\n        if(Quazar.DEBUG) {\r\n\r\n            console.log('Quazar:' + m);\r\n\r\n        }\r\n    },\r\n\r\n    //animate() : main animation call, run the once and it will recurse with requestAnimationFrame(this.animate);\r\n\r\n    animate:function()\r\n    {\r\n        TWEEN.update(time);\r\n\r\n        requestAnimationFrame(this.animate);\r\n\r\n        this.__gameWindow.update();\r\n\r\n        this.__gameWindow.ctx.clearRect(0, 0, this.__gameWindow.canvas.width, this.__gameWindow.canvas.height);\r\n\r\n        this.__gameWindow.draw();\r\n\r\n    },\r\n\r\n    start:function()\r\n    {\r\n\r\n        this.animate();\r\n\r\n    },\r\n\r\n\r\n\r\n    Collision:{\r\n\r\n        spriteRectanglesCollide(obj1, obj2)\r\n        {\r\n            if (obj1.position.x + obj1.size.x > obj2.size.x && obj1.position.x  < obj2.size.x + obj2.size.x &&\r\n                obj1.position.y + obj1.size.y > obj2.size.y && obj1.position.y  < obj2.size.y + obj2.size.y )\r\n            {\r\n\r\n                return true;\r\n\r\n            }\r\n\r\n        }\r\n    },\r\n\r\n    TWEEN: TWEEN,\r\n\r\n    _gameWindow: {},\r\n\r\n    setGameWindow: function (gameWindow) {\r\n\r\n        this._gameWindow = gameWindow;\r\n\r\n    },\r\n\r\n    getGameWindow: function () {\r\n\r\n\r\n        return this._gameWindow;\r\n\r\n    },\r\n\r\n    assignAll: function (object, args, keys) {\r\n\r\n        $Q.each(keys, function (ix, item) {\r\n\r\n            object[ix] = args[ix];\r\n\r\n        });\r\n\r\n\r\n    },\r\n\r\n\r\n    each: function (list, onResult, onComplete) {\r\n        for (var i in list) {\r\n            onResult(i, list[i]);\r\n        }\r\n\r\n        if (typeof(onComplete) === 'function') {\r\n            onComplete(false, list)\r\n        };\r\n\r\n    },\r\n\r\n    ready_callstack: [],\r\n\r\n    ready: function (callback) {\r\n\r\n        this.ready_callstack.push(callback);\r\n\r\n    },\r\n\r\n    callReady: function () {\r\n\r\n        var funx = this.ready_callstack;\r\n\r\n        var gameWindow = this._gameWindow, lib = this, sprites = this.__gameWindow.sprites;\r\n\r\n        //call every function in the ready_callstack\r\n\r\n        this.each(funx, function (ix, call) {\r\n\r\n            call(lib, gameWindow, sprites);\r\n\r\n        });\r\n\r\n\r\n        __gameInstance.isAtPlay = true;\r\n\r\n\r\n        this.InputEvents.init();\r\n\r\n    },\r\n\r\n    getArg: function (args, key, fallback) {\r\n        if (args && args.hasOwnProperty(key)) {\r\n            return args[key];\r\n        }\r\n        else {\r\n            return fallback;\r\n\r\n        }\r\n\r\n    }\r\n\r\n};\r\n\r\n__gameInstance = Quazar;\r\n\r\nlet QUAZAR = Quazar;\r\n\r\nlet $q = Quazar; let $Q = Quazar;\r\n\r\n/********************\r\n * Quazar.InputEvents\r\n * -Various PC Input Events\r\n ********************/\r\n\r\nQuazar.InputEvents = { //PC input events\r\n    mousemove: [],\r\n    leftclick: [],\r\n    rightclick: [],\r\n    middleclick: [],\r\n    wheelup: [],\r\n    wheelDown: [],\r\n    space: [],\r\n    tab: [],\r\n    shift: [],\r\n    1: [], 2: [], 3: [],\r\n    enter: [],\r\n    extend: function (evt_key, callback, onFinish) {\r\n\r\n        if (evt_key.toLowerCase().indexOf('key_') >= 0) {\r\n            //process this as a key event\r\n\r\n            var cleanKey = evt_key.toLowerCase();\r\n            Quazar.InputEvents[cleanKey] = Quazar.InputEvents[cleanKey] || [];\r\n            return Quazar.InputEvents[cleanKey].push({down: callback, up: onFinish});\r\n        } else {\r\n\r\n            Quazar.InputEvents[evt_key] = Quazar.InputEvents[evt_key] || [];\r\n            return Quazar.InputEvents[evt_key].push({down: callback, up: onFinish});\r\n        }\r\n\r\n    },\r\n    init: function () {\r\n\r\n\r\n        function getMousePos(e) {\r\n\r\n            var x;\r\n            var y;\r\n            if (e.pageX || e.pageY) {\r\n                x = e.pageX;\r\n                y = e.pageY;\r\n            } else {\r\n                x = e.clientX + document.body.scrollLeft + document.documentElement.scrollLeft;\r\n                y = e.clientY + document.body.scrollTop + document.documentElement.scrollTop;\r\n            }\r\n            x -= Quazar.canvas.offsetLeft;\r\n            y -= Quazar.canvas.offsetTop;\r\n            return {x: x, y: y};\r\n        }\r\n\r\n\r\n        function fullMoveInputEvents(event) {\r\n\r\n            var pos = getMousePos(event);\r\n            var InputEvents = Quazar.InputEvents;\r\n            for (var x in InputEvents) {\r\n\r\n\r\n                if (InputEvents[x] instanceof Array && x == 'mousemove') {\r\n\r\n\r\n                    Quazar.each(InputEvents[x], function (ix, el) {\r\n\r\n                        el.down(pos.x, pos.y);\r\n                    });\r\n                }\r\n\r\n            }\r\n\r\n        }\r\n        ;\r\n        document.onkeydown = function (e) {\r\n\r\n            //    alert(JSON.stringify(Quazar.InputEvents, true, 2));\r\n\r\n            Quazar.log('Got e');\r\n\r\n            var value = 'key_' + String.fromCharCode(e.keyCode).toLowerCase();\r\n            if (Quazar.InputEvents[value] instanceof Array) {\r\n\r\n                Quazar.log('Got []');\r\n\r\n                Quazar.each(Quazar.InputEvents[value], function (ix, item) {\r\n\r\n                    if (typeof (item.down) == 'function') {\r\n\r\n                        //   alert('RUNNING');\r\n\r\n                        item.down();\r\n                    }\r\n\r\n\r\n                });\r\n            }\r\n\r\n        }\r\n\r\n\r\n        document.onkeyup = function (e) {\r\n\r\n            //    alert(JSON.stringify(Quazar.InputEvents, true, 2));\r\n\r\n            var value = 'key_' + String.fromCharCode(e.keyCode).toLowerCase();\r\n            if (Quazar.InputEvents[value] instanceof Array) {\r\n\r\n                Quazar.each(Quazar.InputEvents[value], function (ix, item) {\r\n\r\n                    if (typeof (item.up) == 'function') {\r\n\r\n                        //   alert('RUNNING');\r\n\r\n                        item.up();\r\n                    }\r\n\r\n\r\n                });\r\n            }\r\n\r\n        };\r\n\r\n\r\n        Quazar.canvas.onmousedown = function (e) {\r\n\r\n            //    alert(JSON.stringify(Quazar.InputEvents, true, 2));\r\n\r\n            var value = e.which;\r\n            var pos = getMousePos(e);\r\n            var InputEvents = Quazar.InputEvents;\r\n\r\n\r\n            e.preventDefault();\r\n\r\n            switch (e.which) {\r\n                case 1:\r\n\r\n                    for (var x in InputEvents) {\r\n\r\n\r\n                        if (InputEvents[x] instanceof Array && x == 'leftclick') {\r\n\r\n\r\n                            Quazar.each(InputEvents[x], function (ix, el) {\r\n\r\n\r\n                                el.down(pos.x, pos.y);\r\n                            });\r\n                        }\r\n\r\n\r\n                    }\r\n\r\n                    break;\r\n                case 2:\r\n                    // alert('Middle Mouse button pressed.');\r\n\r\n\r\n                    for (var x in Quazar.InputEvents) {\r\n\r\n\r\n                        if (InputEvents[x] instanceof Array && x == 'middleclick') {\r\n\r\n\r\n                            Quazar.each(InputEvents[x], function (ix, el) {\r\n\r\n                                el.down(pos.x, pos.y);\r\n                            });\r\n                        }\r\n\r\n\r\n                    }\r\n                    break;\r\n                case 3:\r\n                    //  alert('Right Mouse button pressed.');\r\n\r\n\r\n                    for (var x in Quazar.InputEvents) {\r\n\r\n\r\n                        if (InputEvents[x] instanceof Array && x == 'rightclick') {\r\n\r\n\r\n                            Quazar.each(InputEvents[x], function (ix, el) {\r\n\r\n                                el.down(pos.x, pos.y);\r\n                            });\r\n\r\n                            return false;\r\n                        }\r\n\r\n\r\n                    }\r\n\r\n                    break;\r\n                default:\r\n\r\n                    return 0;\r\n                //alert('You have a strange Mouse!');\r\n\r\n            }\r\n\r\n\r\n            e.preventDefault();\r\n            return 0;\r\n        };\r\n        Quazar.canvas.onmouseup = function (e) {\r\n\r\n            //    alert(JSON.stringify(Quazar.InputEvents, true, 2));\r\n\r\n            var value = e.which;\r\n            var pos = getMousePos(e);\r\n            var InputEvents = Quazar.InputEvents;\r\n\r\n\r\n            e.preventDefault();\r\n\r\n            switch (e.which) {\r\n                case 1:\r\n\r\n                    for (var x in InputEvents) {\r\n\r\n\r\n                        if (InputEvents[x] instanceof Array && x == 'leftclick') {\r\n\r\n\r\n                            Quazar.each(InputEvents[x], function (ix, el) {\r\n\r\n\r\n                                el.up(pos.x, pos.y);\r\n                            });\r\n                        }\r\n\r\n\r\n                    }\r\n\r\n                    break;\r\n                case 2:\r\n                    // alert('Middle Mouse button pressed.');\r\n\r\n\r\n                    for (var x in Quazar.InputEvents) {\r\n\r\n\r\n                        if (InputEvents[x] instanceof Array && x == 'middleclick') {\r\n\r\n\r\n                            Quazar.each(InputEvents[x], function (ix, el) {\r\n\r\n                                el.up(pos.x, pos.y);\r\n                            });\r\n                        }\r\n\r\n\r\n                    }\r\n                    break;\r\n                case 3:\r\n                    //  alert('Right Mouse button pressed.');\r\n\r\n\r\n                    for (var x in Quazar.InputEvents) {\r\n\r\n\r\n                        if (InputEvents[x] instanceof Array && x == 'rightclick') {\r\n\r\n\r\n                            Quazar.each(InputEvents[x], function (ix, el) {\r\n\r\n                                el.up(pos.x, pos.y);\r\n                            });\r\n\r\n\r\n                            return false;\r\n\r\n                        }\r\n\r\n\r\n                    }\r\n\r\n                    break;\r\n                default:\r\n\r\n                    return 0;\r\n                //alert('You have a strange Mouse!');\r\n\r\n            }\r\n\r\n\r\n        };\r\n        document.addEventListener(\"mousemove\", fullMoveInputEvents);\r\n    }\r\n\r\n\r\n};\r\n\r\n\r\n$Q = QUAZAR;\r\n\r\n//Override the existing window.onload function\r\n\r\nwindow._preQuazar_windowLoad = window.onload;\r\n\r\nwindow.onload = function () {\r\n\r\n    if (typeof(window._preQuazar_windowLoad) == 'function') {\r\n        window._preQuazar_windowLoad();\r\n    }\r\n\r\n    $Q.callReady();\r\n\r\n}\r\n\r\n\r\n/*\r\n * Canvas\r\n *    draw animations, textures to the screen\r\n * */\r\n\r\n\r\nvar Canvas = {\r\n    draw: function (sprite, ctx){\r\n\r\n        if (sprite.active && sprite.onScreen(Game.WIDTH, Game.HEIGHT)) {\r\n\r\n            this.drawPortion(sprite, ctx);\r\n\r\n        }\r\n\r\n    },\r\n    drawFrameWithRotation: function (img, fx, fy, fw, fh, x, y, width, height, deg, canvasContextObj, flip) {\r\n\r\n        canvasContextObj.save();\r\n        deg = Math.round(deg);\r\n        deg = deg % 360;\r\n        var rad = deg * Math.PI / 180;\r\n        //Set the origin to the center of the image\r\n        canvasContextObj.translate(x, y);\r\n        canvasContextObj.rotate(rad);\r\n        //Rotate the canvas around the origin\r\n\r\n        canvasContextObj.translate(0, canvasContextObj.width);\r\n        if (flip) {\r\n\r\n            canvasContextObj.scale(-1, 1);\r\n        } else {\r\n\r\n        }\r\n\r\n        //draw the image\r\n        canvasContextObj.drawImage(img, fx, fy, fw, fh, width / 2 * (-1), height / 2 * (-1), width, height);\r\n        //reset the canvas\r\n\r\n        canvasContextObj.restore();\r\n    },\r\n\r\n\r\n    /*\r\n     * drawPortion:\r\n     *\r\n     *   expects: (sprite{selected_animation{selected_frame{frameSize, framePos } offset?, gameSize? }  })\r\n     *\r\n     *\r\n     * */\r\n\r\n\r\n    drawPortion: function (sprite, ctx) {\r\n\r\n        var frame;\r\n\r\n        if (sprite.active) {\r\n\r\n            if (sprite.selected_animation && sprite.selected_animation.selected_frame) {\r\n\r\n                frame = sprite.selected_animation.selected_frame;\r\n\r\n            }\r\n            else {\r\n\r\n                console.error('Sprite is missing arguments');\r\n\r\n            }\r\n\r\n            var x = sprite.position.x;\r\n            var y = sprite.position.y;\r\n\r\n            var camera = $Q.camera || {pos: {x: 0, y: 0, z: 0}};\r\n\r\n\r\n            if (true) {\r\n\r\n                if (!isNaN(camera.pos.x)) {\r\n\r\n                    x += camera.pos.x;\r\n                }\r\n\r\n                if (!isNaN(camera.pos.y)) {\r\n\r\n                    y += camera.pos.y;\r\n                }\r\n\r\n            }\r\n            ;\r\n\r\n\r\n            //optional animation : gameSize\r\n\r\n            var targetSize = sprite.selected_animation.size ? sprite.selected_animation.size : sprite.size;\r\n\r\n\r\n            var realWidth = targetSize.x;\r\n            var realHeight = targetSize.y;\r\n\r\n            //optional animation : offset\r\n\r\n            if (sprite.selected_animation.offset) {\r\n                x += sprite.selected_animation.offset.x;\r\n\r\n                y += sprite.selected_animation.offset.y;\r\n\r\n            }\r\n\r\n            var rotation;\r\n\r\n            if(typeof(sprite.rotation) == 'object')\r\n            {\r\n\r\n                rotation = sprite.rotation.x;\r\n\r\n\r\n            }\r\n            else\r\n            {\r\n                rotation = sprite.rotation;\r\n\r\n            }\r\n\r\n\r\n\r\n            this.drawFrameWithRotation(sprite.selected_animation.image.domElement, frame.framePos.x, frame.framePos.y, frame.frameSize.x, frame.frameSize.y, Math.round(x + (realWidth / 2)), Math.round(y + (realHeight / 2)), realWidth, realHeight, rotation % 360, ctx, sprite.flipX);\r\n        }\r\n\r\n    }\r\n\r\n}\r\n\r\n\r\nQuazar.ready(function (lib) {\r\n\r\n    Quazar.log('Quazar:lib :: ready');\r\n\r\n\r\n});\r\n\r\n\r\n/**\r\n *\r\n *  class: GameWindow:\r\n *  args{canvas, ctx, sprites, backgrounds, interactives, forces, update}\r\n */\r\n\r\n\r\nclass GameWindow {\r\n\r\n    constructor({canvas, ctx, sprites, backgrounds, interactives, forces, update}) {\r\n\r\n        this.sprites = sprites instanceof Array ? sprites:[];\r\n\r\n        this.backgrounds = backgrounds instanceof Array ? backgrounds:[];\r\n\r\n        this.interactives = interactives instanceof Array ? interactives:[];\r\n\r\n        this.forces = forces instanceof Array ? forces:[];\r\n\r\n        this.canvas = canvas;\r\n\r\n        if(!this.canvas){ this.canvas =  document.createElement('CANVAS'); console.info('GameWindow(): Created New Canvas'); }\r\n\r\n        this.ctx = ctx || canvas.getContext('2d');\r\n\r\n        this.__camera = new Vector3(0, 0, 0);\r\n\r\n        if(typeof update == 'function')\r\n        {\r\n            this.onUpdate(update);\r\n\r\n        }\r\n\r\n        Quazar.__gameWindow = this;\r\n\r\n        Quazar.canvas = this.canvas;\r\n\r\n        Quazar.ctx = this.ctx;\r\n\r\n    }\r\n\r\n    uniques(list)\r\n    {\r\n\r\n        var listout = [];\r\n\r\n        $.each(list, function(ix, item){\r\n\r\n            if(!listout.indexOf(item.id) >= 0)\r\n            {\r\n\r\n                var str = item.name;\r\n\r\n                listout.push({\"sprite\":item});\r\n\r\n            }\r\n\r\n        });\r\n\r\n        return listout;\r\n\r\n    }\r\n\r\n    setPlayer(player)\r\n    {\r\n        this.player = player;\r\n\r\n        if(!this.sprites.indexOf(player) >= 0)\r\n        {\r\n            this.sprites.push(player);\r\n\r\n        }\r\n\r\n    }\r\n\r\n    update()\r\n    {\r\n\r\n        Quazar.each(this.sprites, function (ix, item) {\r\n\r\n            if(typeof(item.update) == 'function')\r\n            {\r\n                item.update(item);\r\n\r\n            }\r\n\r\n            if(typeof(item.def_update) == 'function') {\r\n                //  console.log('def_update');\r\n\r\n                item.def_update(item);\r\n\r\n            }\r\n\r\n        });\r\n\r\n\r\n    }\r\n\r\n    onUpdate(arg)\r\n    {\r\n        if(typeof(arg) == 'function')\r\n        {\r\n            let up = this.update;\r\n\r\n            this.update = function(sprites){ up(sprites); arg(sprites);  }\r\n\r\n        }\r\n\r\n    }\r\n\r\n    draw() {\r\n\r\n        var _gw = this;\r\n\r\n        Quazar.each(this.sprites, function (ix, item) {\r\n\r\n            Canvas.draw(item, _gw.ctx);\r\n\r\n        });\r\n\r\n    }\r\n\r\n};\r\n\r\n\r\nclass TextDisplay\r\n{\r\n\r\n\r\n\r\n}\r\n\r\n\r\n/**TODO:complete the following\r\n *  class: StatDisplay:\r\n *  class: BarDisplay\r\n *  class: VideoDisplay\r\n */\r\n\r\n\r\nclass ItemDisplay //show an item display (image with text/number to the right\r\n{\r\n    constructor({font, fontSize}) {\r\n\r\n    }\r\n\r\n    set(text, image, color, font)\r\n    {\r\n\r\n\r\n    }\r\n    size()\r\n    {\r\n\r\n\r\n    }\r\n\r\n    render()\r\n    {\r\n\r\n    }\r\n\r\n}\r\n\r\n\r\nclass BarDisplay //show a display bar such as health bar\r\n{\r\n    constructor({font, fontSize}) {\r\n\r\n    }\r\n\r\n    set(text, image, color, font)\r\n    {\r\n\r\n\r\n    }\r\n    size()\r\n    {\r\n\r\n\r\n    }\r\n\r\n    render()\r\n    {\r\n\r\n    }\r\n\r\n}\r\n\r\nclass VideoDisplay //show a video\r\n{\r\n    constructor({src, size}) {\r\n\r\n        this.domElement = undefined;\r\n\r\n        this.src = src;\r\n\r\n        this.size = new Vector3(size.x, size.y, size.z || 0);\r\n\r\n        Quazar.log('VideoDisplay():: TODO: create dom element');\r\n\r\n    }\r\n\r\n    play() {\r\n\r\n    }\r\n}\r\n\r\n;/**\r\n * Created by Administrator on 7/15/2017.\r\n */\r\n\r\n\r\n\r\n\r\nclass Vector3 {\r\n    constructor(x, y, z, r) {\r\n\r\n        this.x = x;\r\n        this.y = y;\r\n        this.z = z;\r\n        this.r = r;\r\n\r\n    }\r\n\r\n\r\n}\r\n;\r\n\r\nlet Vector2 = Vector3, Point = Vector3, Size = Vector3, Vertex = Vector3, Rotation = Vector3, Rot = Vector3, Position = Vector3,\r\n\r\n    Pos = Vector3;\r\n\r\n\r\n\r\n\r\nclass Rectangle {\r\n\r\n    constructor(min, max) {\r\n\r\n        this.min = min;\r\n        this.max = max;\r\n\r\n    }\r\n\r\n\r\n}\r\n;\r\n\r\nlet VectorBounds = Rectangle;\r\n\r\n\r\n\r\nclass VectorFrameBounds {\r\n\r\n    constructor(min, max, termPoint) {\r\n\r\n        this.min = min;\r\n        this.max = max;\r\n\r\n        this.termPoint = termPoint || new Vector3(this.max.x, this.max.y, this.max.z);\r\n\r\n    }\r\n\r\n\r\n}\r\n;\r\n\r\n\r\n\r\nclass Circle\r\n{\r\n    constructor(args) {\r\n\r\n        this.position = this.getArg(args, 'position', new Vector3(0, 0, 0));\r\n\r\n        this.radius = this.getArgs(args, 'radius', 100);\r\n\r\n    }\r\n\r\n    getArg(args, key, fallback) {\r\n\r\n        if (args.hasOwnProperty(key)) {\r\n\r\n            return args[key];\r\n\r\n        }\r\n        else {\r\n            return fallback;\r\n\r\n        }\r\n\r\n    }\r\n\r\n}\r\n\r\n;/**\r\n * Created by The Blakes on 04-13-2017\r\n *\r\n */\r\n\r\n\r\n\r\nclass Animation {\r\n    constructor(args) {\r\n\r\n        args = args || {};\r\n\r\n        var _anime = this;\r\n\r\n        this.name = $Q.getArg(args, 'name', '_blank'),\r\n\r\n        this.description =  $Q.getArg(args, 'description', '_blank')\r\n\r\n        this.frames = $Q.getArg(args, 'frames', []);\r\n\r\n        this.image = new GameImage( $Q.getArg(args, 'src',  $Q.getArg(args, 'image', false)));\r\n\r\n\r\n        this.src = this.image.domElement.src;\r\n\r\n        this.domElement = this.image.domElement;\r\n\r\n        this.type = $Q.getArg(args, 'type', 'basic');\r\n\r\n        this.delay = $Q.getArg(args, 'delay', 0);\r\n\r\n        this.cix = 0;\r\n\r\n        this.frameSize = this.getArg(args, 'frameSize', new Vector3(0, 0, 0));\r\n\r\n        this.frameBounds = this.getArg(args, 'frameBounds', new VectorFrameBounds(new Vector3(0, 0, 0), new Vector3(0, 0, 0), new Vector3(0, 0, 0)));\r\n\r\n        this.frameOffset = this.getArg(args, 'frameOffset', new Vector3(0, 0, 0));\r\n\r\n\r\n      if(typeof(args) == 'object' && args.frameBounds && args.frameSize){  this.apply2DFrames(args.parent || {}) };\r\n\r\n        this.flipX = $Q.getArg(args, 'flipX', false);\r\n\r\n        this.priority = $Q.getArg(args, 'priority', 0);\r\n\r\n        this.cix = 0;\r\n\r\n        this.selected_frame = this.frames[0];\r\n\r\n        this.earlyTerm = this.getArg(args, 'earlyTerm', false);\r\n\r\n        this.hang =this.getArg(args, 'hang', false);\r\n\r\n        this.duration = this.getArg(args, 'duration', 1000);\r\n\r\n        this.size =  this.getArg(args, 'size', new Vector3(20, 20, 20));\r\n\r\n        this.effects = [];\r\n\r\n        this.timer = 0;\r\n\r\n        this.__gameLogic = false;\r\n\r\n        this.setType = function(){  };\r\n\r\n    }\r\n\r\n    singleFrame(frameSize, size)\r\n    {\r\n\r\n        this.__frametype = 'single';\r\n\r\n        this.frameSize = frameSize;\r\n\r\n        this.size = size;\r\n\r\n        this.selected_frame = {\r\n            image: this.image,\r\n            frameSize: this.frameSize,\r\n            framePos: {x: 0, y: 0}\r\n        };\r\n\r\n        this.frames[0] = this.selected_frame;\r\n\r\n\r\n    }\r\n\r\n    getArg(args, key, fallback) {\r\n\r\n        if (args.hasOwnProperty(key)) {\r\n\r\n            return args[key];\r\n\r\n        }\r\n        else {\r\n            return fallback;\r\n\r\n        }\r\n\r\n    }\r\n\r\n    apply2DFrames() {\r\n\r\n        this.frames = [];\r\n\r\n        var fcount = 0;\r\n\r\n\r\n        var quitLoop = false;\r\n\r\n        for (let y = this.frameBounds.min.y; y <= this.frameBounds.max.y; y++) {\r\n\r\n            for (let x = this.frameBounds.min.x; x <= this.frameBounds.max.x; x++) {\r\n\r\n                let framePos = {x: x * this.frameSize.x + this.frameOffset.x, y: y * this.frameSize.y + this.frameOffset.y};\r\n\r\n                this.frames.push({image: this.image, frameSize: this.frameSize, framePos: framePos});\r\n\r\n                if( x >= this.frameBounds.termPoint.x && y >= this.frameBounds.termPoint.y)\r\n                {\r\n\r\n                    quitLoop = true;\r\n\r\n                    break;\r\n                }\r\n\r\n                fcount += 1;\r\n\r\n                if(quitLoop)\r\n                    break;\r\n\r\n            }\r\n\r\n        }\r\n\r\n        this.frames[0] = !this.frames[0] ? {\r\n                image: this.image,\r\n                frameSize: this.frameSize,\r\n                framePos: {x: this.frameBounds.min.x, y: this.frameBounds.min.y}\r\n            } : this.frames[0];\r\n\r\n       // this.selected_frame = this.frames[this.cix % this.frames.length] || this.frames[0];\r\n\r\n    }\r\n\r\n    resetFrames() //special reset function:: frames are re-rendered each reset()\r\n    {\r\n\r\n        this.apply2DFrames();\r\n\r\n    }\r\n\r\n    update() {\r\n\r\n        this.selected_frame = this.frames[Math.round(this.cix) % this.frames.length];\r\n\r\n\r\n    }\r\n\r\n    reset()\r\n{\r\n\r\n    this.resetFrames();\r\n\r\n    this.cix = 0;\r\n\r\n}\r\n\r\ncontinuous(duration)\r\n{\r\n\r\n    if(this.__frametype == 'single')\r\n    {\r\n        return 0;\r\n\r\n    }\r\n\r\n  this.apply2DFrames();\r\n\r\n    //update once:\r\n    this.update();\r\n\r\n\r\n    if(this.cix == 0)\r\n  {\r\n\r\n      this.engage();\r\n\r\n  }\r\n\r\n\r\n}\r\n\r\nengage(duration, complete)\r\n{\r\n\r\n    if(this.__frametype == 'single')\r\n    {\r\n        return 0;\r\n\r\n    }\r\n\r\n\r\n    let __inst = this;\r\n\r\n    this.complete = complete || this.complete || function(){  };\r\n\r\n    var duration = duration || typeof(this.duration) == 'number' ? this.duration : this.frames.length * 20;\r\n\r\n    //we have a target\r\n  this.tween = new TWEEN.Tween(this)\r\n        .easing(__inst.curve || TWEEN.Easing.Linear.None)\r\n\r\n        .to({cix:__inst.frames.length - 1}, duration)\r\n        .onUpdate(function() {\r\n            //console.log(objects[0].position.x,objects[0].position.y);\r\n\r\n         //   __inst.cix = Math.ceil(__inst.cix);\r\n\r\n        __inst.update();\r\n\r\n        })\r\n        .onComplete(function() {\r\n            //console.log(objects[0].position.x, objects[0].position.y);\r\n\r\n            if(__inst.complete)\r\n            {\r\n\r\n                __inst.complete();\r\n\r\n            }\r\n\r\n            __inst.cix = 0;\r\n\r\n            __inst.isComplete = true;\r\n\r\n        });\r\n\r\n\r\n  this.tween.start();\r\n\r\n\r\n}\r\n\r\nonComplete(fun)\r\n{\r\n    this.complete = fun;\r\n\r\n}\r\n\r\n    animate() {\r\n\r\n        this.apply2DFrames();\r\n\r\n        this.timer += 1;\r\n\r\n        Quazar.log('ANIMATING with frame count:' + this.frames.length);\r\n\r\n        if(this.timer % this.delay == 0) {\r\n\r\n            if(this.hang)\r\n            {\r\n                this.cix = this.cix + 1;\r\n\r\n                if(this.cix > this.frames.length - 1)\r\n                {\r\n                    this.cix =  this.frames.length - 1;\r\n\r\n                }\r\n\r\n            }\r\n            else\r\n            {\r\n\r\n                this.cix = this.cix >= this.frames.length - 1 ? this.frameBounds.min.x : this.cix + 1;\r\n            }\r\n\r\n            this.update();\r\n\r\n        }\r\n\r\n    }\r\n\r\n};\r\n;/**\r\n * Created by The Blakes on 04-13-2017\r\n *\r\n */\r\n\r\n\r\nclass Callables {\r\n    constructor(args) {\r\n\r\n        this.list = [];\r\n\r\n        if(args instanceof Array)\r\n        {\r\n            this.list = args;\r\n\r\n        }\r\n        else\r\n        {\r\n            this.list = this.getArg(args, 'list', []);\r\n\r\n        }\r\n\r\n    }\r\n\r\n    getArg(args, key, fallback) {\r\n\r\n        if (args.hasOwnProperty(key)) {\r\n\r\n            return args[key];\r\n\r\n        }\r\n        else {\r\n            return fallback;\r\n\r\n        }\r\n\r\n    }\r\n\r\n    add(item)\r\n    {\r\n\r\n        if(typeof(item.engage) == 'function')\r\n        {\r\n           this.list.push(item);\r\n\r\n        }\r\n\r\n       else if(typeof(item.fire) == 'function')\r\n        {\r\n            this.list.push(item);\r\n\r\n        }\r\n\r\n       else if(typeof(item.start) == 'function')\r\n        {\r\n            this.list.push(item);\r\n\r\n        }\r\n\r\n       else if(typeof(item.run) == 'function')\r\n        {\r\n            this.list.push(item);\r\n\r\n        }\r\n\r\n       else if(typeof(item.process) == 'function')\r\n        {\r\n            this.list.push(item);\r\n\r\n        }\r\n\r\n\r\n    }\r\n\r\n    call()\r\n    {\r\n        $.each(this.list, function (ix, item) {\r\n\r\n\r\n            if(typeof(item.engage) == 'function')\r\n            {\r\n                item.engage();\r\n\r\n            }\r\n\r\n            if(typeof(item.fire) == 'function')\r\n            {\r\n                item.fire();\r\n\r\n            }\r\n\r\n            if(typeof(item.start) == 'function')\r\n            {\r\n                item.start();\r\n\r\n            }\r\n\r\n            if(typeof(item.run) == 'function')\r\n            {\r\n                item.run();\r\n\r\n            }\r\n\r\n            if(typeof(item.process) == 'function')\r\n            {\r\n                item.process();\r\n\r\n            }\r\n\r\n        });\r\n\r\n    }\r\n\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n;/**\r\n * Created by The Blakes on 04-13-2017\r\n *\r\n * Camera : has simple x, y, z, position / Vector, follows a specific sprite\r\n *\r\n * *incomplete as of 07-20-2017\r\n */\r\n\r\n\r\nclass Camera\r\n{\r\n\r\n    constructor(position)\r\n    {\r\n\r\n      this.position = Quazar.getArg(args, 'position', Quazar.getArg(args, 'pos', new Vector3(0, 0, 0) ) );\r\n\r\n    }\r\n\r\n    follow(object, accel, max, distSize)\r\n    {\r\n\r\n\r\n    }\r\n\r\n}\r\n\r\n\r\n\r\n;\r\n/*****************\r\n *  Controls():\r\n *\r\n *  Dependencies: (1) :\r\n *      -Quick2d.GamepadAdapter, HTML5 Gamepad Api\r\n ******************/\r\n\r\nclass Controls {\r\n\r\n    constructor(args) {\r\n\r\n\r\n        this.__controller = args.controller;\r\n\r\n    }\r\n\r\n    extendedCall(call, extension)\r\n    {\r\n\r\n        var formerCall = call;\r\n\r\n        call = function(){ call(); extension(); };\r\n\r\n        return call;\r\n\r\n    }\r\n\r\n    on(key, callback)\r\n    {\r\n\r\n        if(typeof(this.__controller) == 'object' && typeof(this.__controller[key]) == 'function')\r\n        {\r\n\r\n            console.info('applying controller function:' + key);\r\n\r\n            this.__controller[key] = this.extendedCall(this.__controller[key], callback);\r\n\r\n        }\r\n        else\r\n        {\r\n            console.error('could not apply controller function');\r\n\r\n        }\r\n\r\n    }\r\n\r\n\r\n};\r\n\r\n\r\n\r\n\r\n;/**\r\n * Created by The Blakes on 04-13-2017\r\n *\r\n */\r\n\r\nclass Force\r\n{\r\n    constructor(args)\r\n    {\r\n\r\n        this.name = args.name || \"\";\r\n\r\n        this.description = args.description || \"\";\r\n\r\n        this.subjects = args.subjects || [];\r\n        this.origin =  args.origin || {};\r\n        this.massObjects = args.massObjects || [];\r\n\r\n        this.minSpeed = args.minSpeed || new Vector3(1, 1, 1);\r\n\r\n        this.max = args.max || new Vector3(3, 3, 3);\r\n         this.accel = args.accel || new Vector3(1.3, 1.3, 1.3);\r\n\r\n        for(var x in args)\r\n        {\r\n            this[x] = args[x];\r\n\r\n        }\r\n\r\n    }\r\n\r\n    getArg(args, key, fallback) {\r\n\r\n        if (args.hasOwnProperty(key)) {\r\n\r\n            return args[key];\r\n\r\n        }\r\n        else {\r\n            return fallback;\r\n\r\n        }\r\n\r\n    }\r\n\r\n\r\n    gravitateY()\r\n    {\r\n\r\n      var  subjects = this.subjects;\r\n\r\n       var origin =  this.origin || {};\r\n\r\n       var massObjects =  this.massObjects;\r\n\r\n      var  accel =  this.accel || {};\r\n\r\n        var max =  this.max || {};\r\n\r\n        $.each(subjects, function(ix, itemx){\r\n\r\n           itemx.accelY(accel, max);\r\n\r\n           itemx.__falling = true;\r\n\r\n            $.each(massObjects, function(iy, itemy){\r\n\r\n                itemx.collide_stop(itemy);\r\n\r\n\r\n            });\r\n        });\r\n    }\r\n};\r\n\r\n\r\n\r\n\r\n\r\n\r\n;/**\r\n * Created by The Blakes on 7/27/2017.\r\n */\r\n\r\nclass StatEffect{\r\n\r\n    constructor(name, value) {\r\n\r\n        this.__is = \"a game logic effect\";\r\n\r\n        this.name =name;\r\n\r\n        this.value = value;\r\n\r\n    }\r\n\r\n    process(object)\r\n    {\r\n        //if the object has any property by effect.name, the property is incremenented by effect value\r\n        //a health decrease is triggered by Effect('health', -10);\r\n\r\n\r\n        for(var x in object)\r\n        {\r\n            if(x.toLowerCase() == this.name.toLowerCase() && typeof(value) == typeof(object[x]))\r\n            {\r\n\r\n                object[x] += this.value;\r\n\r\n            }\r\n\r\n        }\r\n\r\n    }\r\n\r\n}\r\n\r\nclass Collision\r\n{\r\n    constructor({object, collideables, extras})\r\n    {\r\n        this.object = object || [];\r\n\r\n        this.collideables = collideables instanceof Array ? collideables : [];\r\n\r\n        this.extras = extras instanceof Array ? extras : []; //anything extra to execute onCollision\r\n        //note: extras are any StatEffect, Animation, Movement to be simultaneously executed with this Collision\r\n\r\n    }\r\n\r\n    Object(object)\r\n    {\r\n        this.object = object;\r\n\r\n    }\r\n\r\n    Extras(extras)\r\n    {\r\n        this.extras = extras;\r\n\r\n    }\r\n\r\n    Collideables(collideables)\r\n    {\r\n        this.collideables = collideables;\r\n\r\n    }\r\n\r\n    onCollide(fun)\r\n    {\r\n        this.callback = fun;\r\n\r\n    }\r\n\r\n    collide()\r\n    {\r\n        this.callback();\r\n    }\r\n\r\n    process()\r\n    {\r\n        //if collision, call collide()\r\n\r\n    }\r\n\r\n\r\n};\r\n\r\n\r\n\r\nclass GameLogic {\r\n\r\n    constructor(gameEffectList)\r\n    {\r\n        if(!gameEffectList instanceof Array)\r\n        {\r\n\r\n            console.info('GameLogic: gameEffectList was not an array');\r\n\r\n            gameEffectList = [];\r\n\r\n        }\r\n\r\n       this.gameEffects = gameEffectList;\r\n\r\n    }\r\n    process_all()\r\n    {\r\n        //process all game logic objects::\r\n\r\n            for(var x = 0; x < this.gameEffects.length; x++)\r\n            {\r\n\r\n                this.gameEffects[x].process();\r\n\r\n            }\r\n\r\n    }\r\n    add(gameeffect)\r\n    {\r\n\r\n        this.gameEffects.push(gameeffect);\r\n\r\n    }\r\n\r\n}\r\n;\r\n\r\n/*****************\r\n *  GamepadAdapter:\r\n *\r\n *  Dependencies: (1) :\r\n *      -HTML5 Gamepad Api\r\n ******************/\r\n\r\nclass GamepadAdapter {\r\n\r\n    constructor() {\r\n\r\n        this.__gamepads = [];\r\n\r\n        this.intervals = [];\r\n\r\n        let controller_stack = this;\r\n\r\n        let _gpinst = this;\r\n\r\n        this.events = [];\r\n\r\n        window.setInterval(function () {\r\n\r\n            var gps = navigator.getGamepads();\r\n\r\n            _gpinst.gps = gps;\r\n\r\n            for(var x = 0; x < gps.length; x++) {\r\n\r\n            var events = _gpinst.__gamepads[x] ? _gpinst.__gamepads[x] : {};\r\n\r\n             _gpinst.process(gps[x], events);\r\n\r\n            }\r\n\r\n\r\n        }, 20);\r\n\r\n\r\n\r\n    }\r\n\r\n    gamepads()\r\n    {\r\n\r\n        return  navigator.getGamepads();\r\n\r\n    }\r\n\r\n\r\n    disconnect_all() {\r\n\r\n        for (var x = 0; x < this.intervals.length; x++) {\r\n\r\n            window.clearInterval(this.intervals[x]);\r\n\r\n        }\r\n\r\n    }\r\n\r\n\r\n    disconnect_by_index(game_pad_index) {\r\n\r\n        window.clearInterval(this.intervals[game_pad_index]);\r\n\r\n    }\r\n\r\n    hasAnyPad() {\r\n        return \"getGamepads\" in navigator;\r\n\r\n    }\r\n\r\n    Event(key, game_pad, callback) {\r\n        return {\r\n\r\n            key: key, game_pad:game_pad, callback: callback\r\n\r\n\r\n        }\r\n\r\n    }\r\n\r\n\r\n    GamepadEvents(args)\r\n    {\r\n\r\n        var gp = {};\r\n\r\n        gp.stick_left = args.stick_left || function(x, y)\r\n        {\r\n\r\n          //  console.log('Def call');\r\n\r\n        }\r\n\r\n\r\n        gp.stick_right = args.stick_right ||  function(x, y)\r\n        {\r\n\r\n        }\r\n\r\n        gp.buttons = [];\r\n\r\n        gp.on = function(key, callback)\r\n        {\r\n\r\n            if(this[key] && key !== \"on\")\r\n            {\r\n\r\n                this[key] = callback;\r\n\r\n\r\n            }\r\n\r\n            else if(key.indexOf('button') >= 0 && key.indexOf('_') >= 0 )\r\n            {\r\n                var parts = key.split('_');\r\n\r\n                var number;\r\n\r\n                try\r\n                {\r\n\r\n                    number = parseInt(parts[1]);\r\n\r\n                    this['buttons'][number] = callback;\r\n\r\n                }\r\n                catch (e)\r\n                    {\r\n                      console.error('could not parse \"on\" event with ' + key);\r\n\r\n                    }\r\n\r\n            }\r\n\r\n\r\n        }\r\n\r\n        this.__gamepads.push(gp);\r\n\r\n        return gp;\r\n\r\n    }\r\n\r\n\r\n\r\n    process(gp, gpEvents)\r\n    {\r\n\r\n        this.process_buttons(gp, gpEvents);\r\n\r\n        this.process_axes(gp, gpEvents);\r\n\r\n    }\r\n\r\n\r\n    process_axes(gp, events)\r\n    {\r\n\r\n        if(!gp || !gp['axes'])\r\n        {\r\n\r\n            return false;\r\n\r\n        }\r\n\r\n\r\n        for (var i = 0; i < gp.axes.length; i += 2) {\r\n            var axis1 = gp.axes[i], axia2 = gp.axes[i + 1];\r\n\r\n            var ix = (Math.ceil(i / 2) + 1), x = gp.axes[i], y = gp.axes[i + 1];\r\n\r\n\r\n\r\n            if(ix == 1 && events.stick_left)\r\n            {\r\n                events.stick_left(x, y);\r\n\r\n            }\r\n\r\n            if(ix == 2 && events.stick_right)\r\n            {\r\n                events.stick_right(x, y);\r\n\r\n            }\r\n\r\n            if (this.events && this.events['stick_' + i] && typeof(this.events['stick_' + i].callback) == 'function') {\r\n                this.events['stick_' + i].callback();\r\n\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n\r\n    process_buttons(gp, events) {\r\n\r\n        if(!gp || !gp['buttons'])\r\n        {\r\n             return false;\r\n\r\n        }\r\n\r\n        for (var i = 0; i < gp.buttons.length; i++) {\r\n\r\n            if (gp.buttons[i].pressed) {\r\n\r\n               // console.log('button:' + i);\r\n\r\n                    if (typeof(events.buttons[i]) == 'function') {\r\n                        events.buttons[i](gp.buttons[i].pressed);\r\n                    }\r\n                    else if (typeof( events.buttons[i]) == 'object' && typeof(events.buttons[i].update) == 'function') {\r\n                        events.buttons[i].update(events.buttons[i].pressed);\r\n\r\n                    }\r\n\r\n                var clearance_1 = this.events && this.events[i], gpc, bkey = \"button_\" + i;\r\n\r\n                if (clearance_1) {\r\n                    gpc = this.events[bkey] && !isNaN(this.events[bkey].game_pad) ? this.gamepads[this.events[bkey].game_pad] : this.events[bkey].game_pad;\r\n                }\r\n                ;\r\n\r\n                if (clearance_1 && gpc && typeof(this.events[bkey].callback) == 'function') {\r\n                    //call the callback\r\n                    this.events[i].callback();\r\n\r\n                }\r\n\r\n            }\r\n\r\n\r\n        }\r\n\r\n\r\n\r\n    }\r\n\r\n\r\n    on(key, gpix, callback) {\r\n\r\n        if(gpix >= this.__gamepads.length)\r\n        {\r\n\r\n            this.__gamepads.push(this.GamepadEvents({}));\r\n\r\n        }\r\n\r\n        this.__gamepads[gpix].on(key, callback);\r\n\r\n    }\r\n\r\n\r\n};\r\n\r\n\r\n\r\n\r\nif(!__gameInstance.GamepadAdapter)\r\n{\r\n    __gameInstance.GamepadAdapter = new GamepadAdapter();\r\n\r\n    __gameInstance.gamepads = [];\r\n\r\n    Quazar.GamepadAdapter = __gameInstance.GamepadAdapter;\r\n\r\n    Quazar.gamepads = __gameInstance.gamepads;\r\n\r\n    Quazar.GamepadAdapter.on('stick_left', 0, function(x, y){\r\n\r\n        console.log('Gamepad stick left');\r\n\r\n    });\r\n\r\n    Quazar.GamepadAdapter.on('button_0', 0, function(x, y){\r\n\r\n        console.log('Gamepad button 0');\r\n\r\n    });\r\n\r\n\r\n    Quazar.GamepadAdapter.on('button_1', 0, function(x, y){\r\n\r\n        console.log('Gamepad button 1');\r\n\r\n    });\r\n\r\n    Quazar.GamepadAdapter.on('button_2', 0, function(x, y){\r\n\r\n        console.log('Gamepad button 2');\r\n\r\n    });\r\n\r\n    Quazar.GamepadAdapter.on('button_3', 0, function(x, y){\r\n\r\n        console.log('Gamepad button 3');\r\n\r\n    });\r\n\r\n   // __gameInstance.gamepads.push(gamepad);\r\n\r\n};\r\n\r\n\r\n\r\n;/**\r\n * Created by Jordan Blake on 04-13-2017\r\n *\r\n */\r\nclass GravityAction\r\n{\r\n    constructor()\r\n    {\r\n\r\n    }\r\n\r\n}\r\n\r\nclass Graviton {\r\n    constructor(args) {\r\n\r\n    }\r\n}\r\n\r\nclass GravitationalRay {\r\n    constructor(args) {\r\n\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n;/**\r\n * Created by The Blakes on 04-13-2017\r\n *\r\n */\r\n\r\nclass Motion {\r\n    constructor(args) {\r\n\r\n        this.getArg = $Q.getArg;\r\n\r\n        this.distance = this.getArg(args, 'distance', this.getArg(args, 'distances', false));\r\n\r\n        this.curvesList = this.curvesObject(); //Tween.Easing\r\n\r\n        this.parent_id = args.parent_id || args.object_id || \"__blank\"; //The parent object\r\n\r\n        this.curve = this.getArg(args, 'curve', TWEEN.Easing.Quadratic.InOut);\r\n\r\n        this.targetRotation = this.getArg(args, 'targetRotation', 0);\r\n\r\n        this.name = this.getArg(args, 'name', \"__\");\r\n\r\n        this.description = this.getArg(args, 'description', false);\r\n\r\n        this.curveString = this.getCurveString(); //store a string key for the Tween.Easing || 'curve'\r\n\r\n        this.setCurve(this.curveString);\r\n\r\n        this.line = this.getArg(args, 'line', false);\r\n\r\n        this.duration = this.getArg(args, 'duration', 500);\r\n\r\n        this.delay = this.getArg(args, 'delay', 0);\r\n\r\n        this.duration = this.getArg(args, 'duration', false);\r\n\r\n\r\n    }\r\n\r\n\r\n    curvesObject() {\r\n\r\n        var c = [];\r\n\r\n        Quazar.each(TWEEN.Easing, function (ix, easing) {\r\n\r\n            Quazar.each(easing, function (iy, easeType) {\r\n\r\n                if (['in', 'out', 'inout'].indexOf(iy.toLowerCase()) >= 0) {\r\n\r\n                    c.push(ix + \"_\" + iy);\r\n\r\n                }\r\n\r\n            });\r\n\r\n        });\r\n\r\n        return c;\r\n\r\n    }\r\n\r\n\r\n    getCurveString() {\r\n\r\n        var __inst = this;\r\n\r\n        var c;\r\n\r\n        $.each(TWEEN.Easing, function (ix, easing) {\r\n\r\n            $.each(TWEEN.Easing[ix], function (iy, easeType) {\r\n\r\n\r\n                if (__inst.curve == TWEEN.Easing[ix][iy]) {\r\n\r\n                    c = ix + \"_\" + iy;\r\n\r\n                }\r\n\r\n            });\r\n\r\n        });\r\n\r\n        return c;\r\n\r\n    }\r\n\r\n\r\n    setCurve(c) {\r\n\r\n        var cps = c.split('_');\r\n\r\n        var s1 = cps[0], s2 = cps[1];\r\n\r\n\r\n        var curve = TWEEN.Easing.Quadratic.InOut;\r\n\r\n\r\n        $.each(TWEEN.Easing, function (ix, easing) {\r\n\r\n            $.each(TWEEN.Easing[ix], function (iy, easeType) {\r\n\r\n\r\n                if (ix == s1 && iy == s2) {\r\n\r\n                    // alert('setting curve');\r\n\r\n                    curve = TWEEN.Easing[ix][iy];\r\n\r\n                }\r\n\r\n            });\r\n\r\n        });\r\n\r\n        this.curve = curve;\r\n\r\n\r\n        return curve;\r\n\r\n    }\r\n\r\n    engage() {\r\n\r\n        var tweens = [];\r\n\r\n        //construct a tween::\r\n\r\n        var __inst = this;\r\n\r\n\r\n        var objects = {};\r\n\r\n        $.each(Game.sprites, function (ix, item) {\r\n\r\n            if (item.id == __inst.parent_id) {\r\n\r\n                objects[ix] = item;\r\n\r\n            }\r\n        });\r\n\r\n\r\n        var target = {\r\n\r\n            x: __inst.distance.x + objects[0].position.x,\r\n            y: __inst.distance.y + objects[0].position.y,\r\n            z: __inst.distance.z + objects[0].position.z\r\n\r\n        };\r\n\r\n        if (__inst.targetRotation > 0 || __inst.targetRotation < 0) {\r\n\r\n\r\n            var targetR = __inst.targetRotation + objects[0].rotation.x;\r\n\r\n            //we have a target\r\n            tweens[0] = new TWEEN.Tween(objects[0].rotation)\r\n                .easing(__inst.curve || TWEEN.Easing.Elastic.InOut)\r\n\r\n                .to({x: targetR}, __inst.duration)\r\n                .onUpdate(function () {\r\n                    //console.log(objects[0].position.x,objects[0].position.y);\r\n\r\n\r\n                })\r\n                .onComplete(function () {\r\n                    //console.log(objects[0].position.x, objects[0].position.y);\r\n                    if (__inst.complete) {\r\n\r\n                        __inst.complete();\r\n\r\n                    }\r\n\r\n\r\n                });\r\n\r\n\r\n        }\r\n\r\n        //we have a target\r\n        tweens.push(new TWEEN.Tween(objects[0].position)\r\n            .easing(__inst.curve || TWEEN.Easing.Elastic.InOut)\r\n\r\n            .to(target, __inst.duration)\r\n            .onUpdate(function () {\r\n                //console.log(objects[0].position.x,objects[0].position.y);\r\n\r\n\r\n            })\r\n            .onComplete(function () {\r\n                //console.log(objects[0].position.x, objects[0].position.y);\r\n\r\n                if (__inst.complete) {\r\n\r\n                    __inst.complete();\r\n\r\n                }\r\n\r\n\r\n            }));\r\n\r\n\r\n        __inst.delay = !isNaN(__inst.delay) && __inst.delay > 0 ? __inst.delay : 0;\r\n\r\n\r\n        return {\r\n\r\n            tweens: tweens,\r\n\r\n            delay: __inst.delay,\r\n\r\n            fire: function () {\r\n\r\n                var __tweenObject = this;\r\n\r\n                window.setTimeout(function () {\r\n\r\n                    for (var x = 0; x < __tweenObject.tweens.length; x++) {\r\n\r\n                        __tweenObject.tweens[x].start();\r\n\r\n                    }\r\n\r\n                }, this.delay);\r\n\r\n            }\r\n\r\n        }\r\n\r\n    }\r\n\r\n    start() {\r\n        this.engage().fire();\r\n\r\n    }\r\n\r\n\r\n    onComplete(fun) {\r\n        this.complete = fun;\r\n\r\n    }\r\n\r\n    // obj.getGraphCanvas( $(c.domElement), value.replace('_', '.'), TWEEN.Easing[parts[0]][parts[1]] );\r\n\r\n    getGraphCanvas( t, f, c) {\r\n\r\n        var canvas = document.createElement('canvas');\r\n\r\n        canvas.id = 'curve-display';\r\n\r\n        canvas.width = 180;\r\n        canvas.height = 100;\r\n\r\n\r\n        var context = canvas.getContext('2d');\r\n        context.fillStyle = \"rgb(250,250,250)\";\r\n        context.fillRect(0, 0, 180, 100);\r\n\r\n        context.lineWidth = 0.5;\r\n        context.strokeStyle = \"rgb(230,230,230)\";\r\n\r\n        context.beginPath();\r\n        context.moveTo(0, 20);\r\n        context.lineTo(180, 20);\r\n        context.moveTo(0, 80);\r\n        context.lineTo(180, 80);\r\n        context.closePath();\r\n        context.stroke();\r\n\r\n        context.lineWidth = 2;\r\n        context.strokeStyle = \"rgb(255,127,127)\";\r\n\r\n        var position = {x: 5, y: 80};\r\n        var position_old = {x: 5, y: 80};\r\n\r\n        new TWEEN.Tween(position).to({x: 175}, 2000).easing(TWEEN.Easing.Linear.None).start();\r\n        new TWEEN.Tween(position).to({y: 20}, 2000).easing(f).onUpdate(function () {\r\n\r\n            context.beginPath();\r\n            context.moveTo(position_old.x, position_old.y);\r\n            context.lineTo(position.x, position.y);\r\n            context.closePath();\r\n            context.stroke();\r\n\r\n            position_old.x = position.x;\r\n            position_old.y = position.y;\r\n\r\n        }).start();\r\n\r\n        return canvas;\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n;\r\nclass Sprite {\r\n    constructor(name, description, args) {\r\n\r\n        this.active = true; //active sprites are visible\r\n\r\n        this.__specialPresets = new SpritePresets(); //apply presets to this variable\r\n\r\n        if(typeof(name) == 'object') //accept first argument as full args object\r\n        {\r\n            args = name;\r\n\r\n            this.name = args.name || \"__\";\r\n\r\n            this.description = args.description || \"__\";\r\n\r\n        }\r\n        else\r\n        {\r\n\r\n            this.name = name || \"__\";\r\n\r\n            this.description = description || \"__\";\r\n\r\n        }\r\n\r\n        var _spr = this;\r\n\r\n        Quazar.each(args, function (ix, item) { //apply all args\r\n\r\n            if (ix !== 'parent') {\r\n                _spr[ix] = item;\r\n            }\r\n\r\n\r\n        });\r\n\r\n        this.type = $Q.getArg(args, 'type', 'basic');\r\n\r\n        this.animations = $Q.getArg(args, 'animations', []);\r\n\r\n        this.motions = $Q.getArg(args, 'motions', []);\r\n\r\n        let __inst = this;\r\n\r\n        this.id = $Q.getArg(args, 'id',  this.create_id());\r\n\r\n        this.sounds = $Q.getArg(args, 'sounds', []);\r\n\r\n        this.image = $Q.getArg(args, 'image', new GameImage($Q.getArg(args, 'src', false)));\r\n\r\n        this.size = $Q.getArg(args, 'size', new Vector2(100, 100));\r\n\r\n        this.position = $Q.getArg(args, 'position', new Vector3(0, 0, 0));\r\n\r\n        this.collision_bounds = $Q.getArg(args, 'collision_bounds', new VectorBounds(new Vector3(0, 0, 0), new Vector3(0, 0, 0)));\r\n\r\n        this.rotation = $Q.getArg(args, 'rotation', new Vector3(0, 0, 0));\r\n\r\n        this.selected_animation = {};\r\n\r\n\r\n        this.speed =  $Q.getArg(args, 'speed', new Vector3(0, 0, 0));\r\n\r\n        this.accel =  $Q.getArg(args, 'accel', new Vector3(0, 0, 0));\r\n\r\n        this.rot_speed =  $Q.getArg(args, 'rot_speed', new Vector3(0, 0, 0));\r\n\r\n        this.rot_accel =  $Q.getArg(args, 'rot_accel', new Vector3(0, 0, 0));\r\n\r\n        //Apply and instantiate Sound(), Motion(), and Animation() args...\r\n\r\n        $.each(this.sounds , function(ix, item){\r\n\r\n            __inst.sounds[ix] = new Sound(item);\r\n\r\n        });\r\n\r\n        $.each(this.motions, function(ix, item){\r\n\r\n            __inst.motions[ix] = new Motion(item);\r\n\r\n        });\r\n\r\n\r\n        $.each(this.animations, function(ix, item){\r\n\r\n            __inst.animations[ix] = new Animation(item);\r\n\r\n        });\r\n\r\n    }\r\n\r\n\r\n    /*****************************\r\n     * Getters\r\n     ***************************/\r\n\r\n\r\n    get_id()\r\n    {\r\n        return this.id;\r\n    }\r\n\r\n\r\n    /*****************************\r\n     * Setters and Creators\r\n     ***************************/\r\n\r\n    create_id()\r\n    {\r\n        return new Date().getUTCMilliseconds();\r\n\r\n    }\r\n\r\n    setSize(size)\r\n    {\r\n        this.size = new Vector3(size.x, size.y, size.z || 0);\r\n\r\n        this.selected_animation.size = this.size;\r\n\r\n    }\r\n\r\n\r\n    /*****************************\r\n     *  assertSpeed()\r\n     *  -assert the existence of a speed{} object\r\n     ***************************/\r\n\r\n    assertSpeed() {\r\n        if (!this.speed) {\r\n\r\n            this.speed = new Vector3(0, 0, 0);\r\n\r\n        }\r\n\r\n    }\r\n\r\n    /*****************************\r\n     *  setAnimation(anime)\r\n     *  -set the select_animation of this sprite\r\n     ***************************/\r\n\r\n    setAnimation(anime) {\r\n\r\n        this.animations['default'] = anime;\r\n\r\n        this.selected_animation = anime;\r\n\r\n        Quazar.log('declared default animation');\r\n\r\n        return this;\r\n\r\n    }\r\n\r\n    /*****************************\r\n     *  defaultAnimation(anime)\r\n     *  -set the default_animation of this sprite\r\n     *  -TODO : determine whether to implement a default animatio OR simply use setAnimation() plus selected_animation\r\n     ***************************/\r\n\r\n    defaultAnimation(anime) {\r\n\r\n        this.animations['default'] = anime;\r\n\r\n        Quazar.log('declared default animation');\r\n\r\n        return this;\r\n\r\n    }\r\n\r\n    /*****************************\r\n     * onScreen :\r\n     * -returns boolean\r\n     * -takes and requires w, h of screen\r\n     * -detects if object is on the screen\r\n     ***************************/\r\n\r\n    onScreen(w, h) {\r\n        return this.position.x + this.size.x >= 0 && this.position.x < w\r\n            && this.position.y + this.size.y >= 0 && this.position.y < h;\r\n\r\n    }\r\n\r\n    /*****************************\r\n     * Updates\r\n     ***************************/\r\n\r\n    /*****************************\r\n     * update()\r\n     * -starts empty:: is used by Quick2d.js as the main sprite update\r\n     ***************************/\r\n\r\n    update(sprite) {}\r\n\r\n    /*****************************\r\n     * def_update()\r\n     * -applies speed and other default factors of movement::\r\n     * -is used by Quick2d.js as the system def_update (default update)\r\n     ***************************/\r\n\r\n    def_update(sprite) {\r\n\r\n        for(var x in this.speed)\r\n        {\r\n\r\n            if(this.speed[x] > 0 || this.speed[x] < 0)\r\n            {\r\n\r\n                this.position[x] += this.speed[x];\r\n\r\n            }\r\n\r\n        }\r\n\r\n        for(var x in this.accel)\r\n        {\r\n\r\n            if(this.accel[x] > 0 || this.accel[x] < 0)\r\n            {\r\n\r\n                this.speed[x] += this.accel[x];\r\n\r\n            }\r\n\r\n        }\r\n\r\n        for(var x in this.rot_speed)\r\n        {\r\n\r\n            if(this.rot_speed[x] > 0 || this.rot_speed[x] < 0)\r\n            {\r\n\r\n                this.rotation[x] += this.rot_speed[x];\r\n\r\n            }\r\n\r\n\r\n        }\r\n\r\n        for(var x in this.rot_accel)\r\n        {\r\n\r\n\r\n            if(this.rot_accel[x] > 0 || this.rot_accel[x] < 0)\r\n            {\r\n\r\n                this.rot_speed[x] += this.rot_accel[x];\r\n\r\n            }\r\n        }\r\n    }\r\n\r\n    /*****************************\r\n     *  onUpdate(fun)\r\n     * -args: 1 function(sprite){ } //the self-instance/sprite is passed into the function()\r\n     * -overrides and maintains existing code for update(){} function\r\n     ***************************/\r\n\r\n    onUpdate(fun)\r\n    {\r\n        fun = fun || function(){};\r\n\r\n        let update = this.update;\r\n\r\n        let __inst = this;\r\n\r\n        this.update = function(__inst){ update(__inst); fun(__inst); };\r\n\r\n    }\r\n\r\n    /*****************************\r\n     *  collidesRectangular(sprite)\r\n     * -args: 1 sprite object\r\n     * -returns boolean of true on collision or false on no-collision\r\n     * -TODO : add options object with highlight=true||false,\r\n     * -TODO:allow stateffects, graphiceffects into the collision function\r\n     ***************************/\r\n\r\n    collidesRectangular(sprite)\r\n    {\r\n\r\n        return Quazar.Collision.spriteRectanglesCollide(sprite);\r\n\r\n    }\r\n\r\n    /*****************************\r\n     *  collidesByPixels(sprite)\r\n     *  -TODO : this function is incomplete\r\n     *  -process collision according to the non-transparent pixels of the sprite::\r\n     *  -provides a more realistic collision than basic rectangular\r\n     ***************************/\r\n\r\n    collidesByPixels(sprite)\r\n    {\r\n\r\n        return console.info(\"TODO: Sprite().collidesByPixels(sprite): finish this function\");\r\n\r\n    }\r\n\r\n    /*****************************\r\n     *  shoot(sprite)\r\n     *  -fire a shot from the sprite:: as in a firing gun or spaceship\r\n     *  -takes options{} for number of shots, anglePerShot, etc...\r\n     *  -TODO: complete and test this code\r\n     ***************************/\r\n\r\n    shoot(options) {\r\n        //character shoots an animation\r\n\r\n        this.prep_key = 'shoot';\r\n\r\n        let spread = options.spread || options.angleSpread || false;\r\n\r\n        let total = options.total || options.totalBullets || options.numberBullets || false;\r\n\r\n        let animation = options.bullet || options.animation || false;\r\n\r\n        let duration = options.duration || options.screenDuration || false;\r\n\r\n        let speed = options.speed || false;\r\n\r\n        if (__gameInstance.isAtPlay) {\r\n\r\n\r\n        }\r\n        else {\r\n\r\n            this.event_arg(this.prep_key, '_', options);\r\n\r\n        }\r\n\r\n        return this;\r\n\r\n    }\r\n\r\n    /*****************************\r\n     *  animate(animation)\r\n     *  -simply animate, set the animation to the arg 'animation'\r\n     ***************************/\r\n\r\n    animate(animation) {\r\n\r\n        alert('calling animation');\r\n\r\n        if (__gameInstance.isAtPlay) {\r\n\r\n          if(animation){ this.setAnimation(animation) };\r\n\r\n            this.selected_animation.animate();\r\n\r\n            return this;\r\n\r\n        }\r\n\r\n    }\r\n\r\n    /*****************************\r\n     *  accelY\r\n     *  -accelerate on Y-Axis with 'accel' and 'max' (speed) arguments\r\n     *  -example-use: gravitation of sprite || up / down movement\r\n     ***************************/\r\n\r\n    accelY(accel, max) {\r\n\r\n        accel = Math.abs(accel);\r\n\r\n        if(typeof(max) == 'number')\r\n        {\r\n            max = {y:max};\r\n\r\n        }\r\n\r\n        this.assertSpeed();\r\n\r\n        let diff =  max.y - this.speed.y;\r\n\r\n        if(diff > 0)\r\n        {\r\n            this.speed.y += Math.abs(diff) >= accel ? accel : diff;\r\n\r\n        };\r\n\r\n        if(diff < 0)\r\n        {\r\n            this.speed.y -= Math.abs(diff) >= accel ? accel : diff;\r\n\r\n        };\r\n\r\n    }\r\n\r\n\r\n    /*****************************\r\n     *  accelX\r\n     *  -accelerate on X-Axis with 'accel' and 'max' (speed) arguments\r\n     *  -example-use: running of sprite || left / right movement\r\n     ***************************/\r\n\r\n    accelX(accel, max) {\r\n\r\n        accel = Math.abs(accel);\r\n\r\n        if(typeof(max) == 'number')\r\n        {\r\n            max = {x:max};\r\n\r\n        }\r\n\r\n        this.assertSpeed();\r\n\r\n        let diff =  max.x - this.speed.x;\r\n\r\n        if(diff > 0)\r\n        {\r\n            this.speed.x += Math.abs(diff) >= accel ? accel : diff;\r\n\r\n        };\r\n\r\n        if(diff < 0)\r\n        {\r\n            this.speed.x -= Math.abs(diff) >= accel ? accel : diff;\r\n\r\n        };\r\n\r\n    }\r\n\r\n    /*****************************\r\n     *  decelX\r\n     *  -decelerate on the X axis\r\n     *  -args: 1 float:amt\r\n     ***************************/\r\n\r\n    deccelX(rate) {\r\n        if (typeof(rate) == 'object') {\r\n\r\n            rate = rate.rate;\r\n\r\n        }\r\n\r\n        if (this.speed['x'] > rate) {\r\n            this.speed['x'] -= rate;\r\n\r\n        }\r\n        else if (this.speed['x'] < rate) {\r\n            this.speed['x'] += rate;\r\n\r\n        }\r\n        else\r\n        {\r\n\r\n            this.speed['x'] = 0;\r\n\r\n        }\r\n\r\n    }\r\n\r\n\r\n    /*****************************\r\n     *  decelY\r\n     *  -decelerate on the Y axis\r\n     *  -args: 1 float:amt\r\n     ***************************/\r\n\r\n    decelY(amt) {\r\n\r\n        amt = Math.abs(amt);\r\n\r\n        if(Math.abs(this.speed.y) <= amt)\r\n        {\r\n            this.speed.y = 0;\r\n\r\n        }\r\n        else if(this.speed.y > amt)\r\n        {\r\n\r\n            this.speed.y -= amt;\r\n        }\r\n        else if(this.speed.y < amt * -1)\r\n        {\r\n\r\n            this.speed.y += amt;\r\n        }\r\n\r\n    }\r\n\r\n    /*****************************\r\n     *  decelX\r\n     *  -decelerate on the X axis\r\n     *  -args: 1 float:amt\r\n     ***************************/\r\n\r\n    decelX(amt) {\r\n\r\n        amt = Math.abs(amt);\r\n\r\n        if(Math.abs(this.speed.x) <= amt)\r\n        {\r\n            this.speed.x = 0;\r\n\r\n        }\r\n        else if(this.speed.x > amt)\r\n        {\r\n\r\n            this.speed.x -= amt;\r\n        }\r\n        else if(this.speed.x < amt * -1)\r\n        {\r\n\r\n            this.speed.x += amt;\r\n        }\r\n\r\n    }\r\n\r\n    /*****************************\r\n     *  collide_stop(item)\r\n     *  -both collide and stop on the object, when falling on Y axis::\r\n     *  -sets the special property: __falling to false on stop :: helps to control Sprite() state\r\n     *  -TODO : rename to fallstop || something that resembles a function strictly on Y-Axis\r\n     ***************************/\r\n\r\n    collide_stop(item)\r\n    {\r\n\r\n        var max_y = item.max ? item.max.y : item.position.y;\r\n\r\n        if(this.position.y + this.size.y >= max_y)\r\n        {\r\n\r\n            this.position.y = max_y - this.size.y;\r\n\r\n            this.__falling = false;\r\n\r\n        }\r\n\r\n    }\r\n\r\n    /*****************************\r\n     *  fromFile(file_path)\r\n     *  -TODO : complete this function based on code to load Sprite() from file, located in the spritemaker.html file\r\n     *  -TODO: test this function\r\n     ***************************/\r\n\r\n    fromFile(file_path)\r\n    {\r\n        var __inst = this;\r\n\r\n        $.getJSON(file_path, function(data){\r\n\r\n            __inst = new Sprite(data);\r\n\r\n        });\r\n\r\n    }\r\n\r\n};\r\n\r\n\r\n/****************\r\n * TODO : Complete SpritePresetsOptions::\r\n *  Use these as options for Sprite Control, etc...\r\n ****************/\r\n\r\n\r\nclass SpritePresets {\r\n\r\n\r\n    constructor()\r\n    {\r\n\r\n        var options = SpritePresetsOptions();\r\n\r\n        for(var x in options)\r\n        {\r\n\r\n            this[x] = false;\r\n\r\n        }\r\n\r\n\r\n    }\r\n\r\n    apply()\r\n{\r\n\r\n\r\n\r\n}\r\n\r\n}\r\n\r\n\r\n\r\nlet SpritePresetsOptions =function() {\r\nreturn {\r\n    Flight: {\r\n\r\n        __args: {},\r\n\r\n        top_down_flight: function (sprite) {\r\n        },\r\n\r\n        side_scroll_flight: function (sprite) {\r\n        }\r\n\r\n    },\r\n\r\n    Running: {\r\n\r\n        __args: {},\r\n\r\n        side_scroll_runner: function (sprite) {\r\n\r\n            let __lib = Quazar || Quick2d;\r\n\r\n            Quazar.GamepadAdapter.on('stick_left', 0, function(x, y){\r\n\r\n                accel = accel || 0.25; max = max || 7;\r\n\r\n                sprite.accelX(accel, x * max);\r\n\r\n                if(x < -0.2)\r\n                {\r\n                    sprite.flipX = true;\r\n\r\n                }\r\n                else if(x > 0.2)\r\n                {\r\n                    sprite.flipX = false;\r\n\r\n                }\r\n\r\n            });\r\n\r\n            sprite.onUpdate(function(spr){\r\n\r\n                spr.decelX(0.1);\r\n\r\n                if(!spr.__falling){ spr.decelY(0.2) };\r\n\r\n            });\r\n\r\n\r\n        }\r\n\r\n    },\r\n\r\n    Collision: {\r\n\r\n        __args: {},\r\n\r\n\r\n        basic_stop_collideable: function (sprite) {\r\n        },\r\n\r\n        top_stop_collideable: function (sprite) {\r\n        } //pass through bottom, but land on top, as with certain platforms\r\n\r\n\r\n    },\r\n\r\n    Powerups: {\r\n\r\n        __args: {},\r\n\r\n        grabbable_power_up: function (sprite) {\r\n        }\r\n\r\n    },\r\n\r\n    ControllerStickMotion: {\r\n\r\n        __args: {},\r\n\r\n        stick_move_x: function (sprite) {\r\n        },\r\n\r\n        stick_move_y: function (sprite) {\r\n        }\r\n\r\n    }\r\n\r\n    ,\r\n\r\n    Jumping: {\r\n\r\n        __args: {}\r\n\r\n    },\r\n\r\n    Shooting: {\r\n\r\n        __args: {}\r\n\r\n    }\r\n\r\n}\r\n};;/**\r\n * Created by The Blakes on 04-13-2017\r\n *\r\n */\r\n\r\n\r\nclass InterfaceCallback\r\n{\r\n    constructor({name, description, callback})\r\n    {\r\n\r\n       this.name = name;\r\n\r\n       this.description = description;\r\n\r\n       this.callback = callback || function(){ console.info('The call was empty'); };\r\n\r\n    }\r\n\r\n    run()\r\n    {\r\n\r\n        this.callback();\r\n\r\n    }\r\n\r\n}\r\n\r\n\r\nclass SpeechInterfaceStructure\r\n{\r\n    constructor({name, description})\r\n    {\r\n        this.name = name || \"Program helper.\";\r\n\r\n        this.description = description || \"An interface for the game-builder program.\";\r\n\r\n        this.options_structure = {\r\n\r\n        scroll:function(x, y){}, //simple scroll controller\r\n\r\n\r\n\r\n        create_object_resource:{\r\n\r\n            constructors:Quazar.IF.__allConstructors(),\r\n\r\n            selectedType:false,\r\n\r\n            selectByName:Quazar.IF.selectByName,\r\n\r\n            apply_speech_value:Quazar.IF.applySpeechValue()\r\n\r\n        }, //apply each class in the program, with means of creating / instantiating\r\n\r\n        save_object_resource:{\r\n\r\n            selected_object:false,\r\n\r\n            confirm:Quazar.IF.confirmation()\r\n\r\n        }, //apply each class in the program, with means of saving\r\n\r\n        retrieve_object_resource:{}, //retrieve\r\n\r\n        browse_object_resources:{}, //browsing\r\n\r\n        search_object_resources:{}, //searching\r\n\r\n        delete_object_resources:{}, //delete\r\n\r\n        apply_value:{} //apply a value to an object resource\r\n\r\n        }\r\n\r\n    }\r\n\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n"]}