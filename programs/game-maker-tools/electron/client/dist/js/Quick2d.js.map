{"version":3,"sources":["../../../ecma/Quick2d/concat/Quick2d.js"],"names":["Sound","src","x","sound","Audio","onLoad","play","GameImage","onCreate","Object","image","document","createElement","ext","substring","lastIndexOf","length","error","onerror","__error","domElement","onload","__gameInstance","Quazar","DEBUG","gui_mode","__gameWindow","__sprites","__animations","samples","log_modes","log_mode","recursionCount","__gameWindowList","createid","Date","getUTCMilliseconds","getActionablesCheckList","__inst","actionables","$","each","sprites","ix","item","concat","sounds","motionstacks","animations","interlog","message","div","isNaN","quit","Error","console","info","m","log","animate","TWEEN","update","time","requestAnimationFrame","ctx","clearRect","canvas","width","height","draw","start","Collision","spriteRectanglesCollide","obj1","obj2","position","size","y","_gameWindow","setGameWindow","gameWindow","getGameWindow","assignAll","object","args","keys","$Q","list","onResult","onComplete","i","ready_callstack","ready","callback","push","callReady","funx","lib","call","isAtPlay","InputEvents","init","getArg","key","fallback","hasOwnProperty","QUAZAR","$q","mousemove","leftclick","rightclick","middleclick","wheelup","wheelDown","space","tab","shift","enter","extend","evt_key","onFinish","toLowerCase","indexOf","cleanKey","down","up","getMousePos","e","pageX","pageY","clientX","body","scrollLeft","documentElement","clientY","scrollTop","offsetLeft","style","top","fullMoveInputEvents","event","pos","Array","el","onkeydown","value","String","fromCharCode","keyCode","onkeyup","onmousedown","which","preventDefault","onmouseup","addEventListener","window","_preQuazar_windowLoad","Canvas","sprite","active","onScreen","Game","WIDTH","HEIGHT","drawPortion","drawFrameWithRotation","img","fx","fy","fw","fh","deg","canvasContextObj","flip","save","Math","round","rad","PI","translate","rotate","scale","drawImage","restore","frame","selected_animation","selected_frame","camera","z","targetSize","realWidth","realHeight","offset","rotation","framePos","frameSize","flipX","GameWindow","backgrounds","interactives","forces","getContext","__camera","Vector3","onUpdate","listout","id","str","name","player","def_update","arg","_gw","TextDisplay","ItemDisplay","font","fontSize","text","color","BarDisplay","VideoDisplay","undefined","Animation","_anime","description","frames","type","delay","cix","frameBounds","VectorFrameBounds","frameOffset","apply2DFrames","parent","priority","earlyTerm","hang","duration","effects","timer","__gameLogic","setType","__frametype","fcount","quitLoop","min","max","termPoint","resetFrames","engage","complete","tween","Tween","easing","curve","Easing","Linear","None","to","isComplete","fun","Callables","fire","run","process","Camera","accel","distSize","Controls","__controller","controller","extension","formerCall","extendedCall","Force","subjects","origin","massObjects","minSpeed","itemx","accelY","__falling","iy","itemy","collide_stop","StatEffect","__is","collideables","extras","GameLogic","gameEffectList","gameEffects","gameeffect","GamepadAdapter","__gamepads","intervals","controller_stack","_gpinst","events","setInterval","gps","navigator","getGamepads","clearInterval","game_pad_index","game_pad","gp","stick_left","stick_right","buttons","on","parts","split","number","parseInt","gpEvents","process_buttons","process_axes","axes","axis1","axia2","ceil","pressed","clearance_1","gpc","bkey","gamepads","gpix","GamepadEvents","GravityAction","Graviton","GravitationalRay","Motion","distance","curvesList","curvesObject","parent_id","object_id","Quadratic","InOut","targetRotation","curveString","getCurveString","setCurve","line","c","easeType","cps","s1","s2","tweens","objects","target","targetR","Elastic","__tweenObject","setTimeout","t","f","context","fillStyle","fillRect","lineWidth","strokeStyle","beginPath","moveTo","lineTo","closePath","stroke","position_old","Rectangle","VectorBounds","Circle","radius","getArgs","Sprite","__specialPresets","SpritePresets","_spr","motions","create_id","Vector2","collision_bounds","speed","rot_speed","rot_accel","anime","w","h","options","prep_key","spread","angleSpread","total","totalBullets","numberBullets","animation","bullet","screenDuration","event_arg","alert","setAnimation","abs","assertSpeed","diff","rate","amt","max_y","file_path","getJSON","data","SpritePresetsOptions","Flight","__args","top_down_flight","side_scroll_flight","Running","side_scroll_runner","__lib","Quick2d","accelX","spr","decelX","decelY","basic_stop_collideable","top_stop_collideable","Powerups","grabbable_power_up","ControllerStickMotion","stick_move_x","stick_move_y","Jumping","Shooting","r","__relativeTo","v","v1","v2","Pos","Size","Position","Vector","Rotation","InterfaceCallback","SpeechInterfaceStructure","options_structure","scroll","create_object_resource","constructors","IF","__allConstructors","selectedType","selectByName","apply_speech_value","applySpeechValue","save_object_resource","selected_object","confirm","confirmation","retrieve_object_resource","browse_object_resources","search_object_resources","delete_object_resources","apply_value"],"mappings":"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","file":"Quick2d.js","sourcesContent":["/**\r\n * Created by The Blakes on 3/16/2017.\r\n */\r\n\r\n\r\n\r\n/*\r\n * #Section Media\r\n *\r\n * */\r\n\r\n\r\n/*\r\n * Sound\r\n *\r\n * Simple Sound object:: uses Jquery: audio\r\n *\r\n * TODO : test Sound() for multiple simultaneous sounds, modify as needed\r\n *\r\n * */\r\n\r\nclass Sound {\r\n\r\n    constructor(src) {\r\n\r\n        if(typeof(src)== 'object')\r\n        {\r\n\r\n            for(var x in src)\r\n            {\r\n                this[x] = src[x];\r\n\r\n            }\r\n\r\n            this.sound = new Audio(src.src);\r\n\r\n            this.onLoad = src.onLoad || function(){};\r\n\r\n        }\r\n\r\n        else  if (typeof(src)=='string') {\r\n\r\n            this.src = src;\r\n\r\n            this.sound = new Audio(this.src);\r\n\r\n        }\r\n\r\n        this.onLoad = this.onLoad || function(){};\r\n\r\n        if (typeof(this.onLoad) == 'function') {\r\n\r\n            this.onLoad(this.sound);\r\n\r\n        }\r\n\r\n    }\r\n\r\n    play() {\r\n        if (typeof(this.sound) == 'object' && typeof(this.sound.play) == 'function') {\r\n\r\n            this.sound.play();\r\n\r\n        }\r\n\r\n\r\n    }\r\n\r\n}\r\n\r\n\r\n/*\r\n * GameImage\r\n *\r\n * Simple GameImage\r\n *\r\n * */\r\n\r\nclass GameImage {\r\n\r\n    constructor(src, onCreate) {\r\n\r\n       // Quazar.log('initializing image');\r\n\r\n        if (src instanceof Object) {\r\n\r\n            //alert('getting image from image');\r\n\r\n            this.image = document.createElement('IMG');\r\n\r\n            this.image.src = src.src;\r\n\r\n            this.src = src.src;\r\n\r\n        }\r\n\r\n        else if (typeof(src) == 'string') {\r\n\r\n        let ext = src.substring(src.lastIndexOf('.'), src.length);\r\n\r\n            this.image = document.createElement('IMG');\r\n\r\n            this.image.src =  src;\r\n\r\n            this.src = this.image.src;\r\n\r\n\r\n        }\r\n\r\n\r\n\r\n\r\n        if(!this.image)\r\n        {\r\n            this.image = {error:\"Image not instantiated, set to object by default\"};\r\n\r\n        }\r\n        else\r\n        {\r\n            this.image.onerror = function(){ this.__error = true;   };\r\n\r\n        }\r\n\r\n        this.domElement = this.image;\r\n\r\n        this.image.onload = function () {\r\n\r\n            if (typeof(this.onCreate) == 'function') {\r\n\r\n                this.onCreate(this.image);\r\n\r\n            }\r\n\r\n\r\n        }\r\n\r\n    }\r\n\r\n     getImage() {\r\n\r\n        return this.image;\r\n\r\n    }\r\n\r\n}\r\n\r\n\r\n//Quazar: a main / game lib object::\r\nlet __gameInstance = __gameInstance || {};\r\n\r\nlet Quazar = {\r\n\r\n    DEBUG: false,\r\n\r\n    gui_mode:true,\r\n\r\n    __gameWindow:{},\r\n\r\n    __sprites:[],\r\n\r\n    __animations:[],\r\n\r\n    samples: {},\r\n\r\n    log_modes:['reqs', 'info', 'warning'],\r\n\r\n    log_mode:\"all\",\r\n\r\n    recursionCount:0,\r\n\r\n    __gameWindowList:[],\r\n\r\n\r\n    createid:function()\r\n    {\r\n        new Date().getUTCMilliseconds() + \"\";\r\n    },\r\n\r\n    getActionablesCheckList:function()\r\n    {\r\n        //every unique sound, animation, tweenmotion in the game\r\n\r\n        let __inst = {};\r\n\r\n        let actionables = [];\r\n\r\n        $.each(this.sprites, function(ix, item){\r\n\r\n            actionables.concat(item.sounds);\r\n\r\n            actionables.concat(item.motionstacks);\r\n\r\n            actionables.concat(item.animations);\r\n\r\n\r\n        });\r\n\r\n\r\n    },\r\n\r\n    interlog:function(message, div) //recursive safe :: won't go crazy with recursive logs\r\n    {\r\n        this.recursionCount++;\r\n\r\n        if(!isNaN(div) && this.recursionCount % div == 0)\r\n        {\r\n         //   console.log('Interval Log:'+  message);\r\n\r\n        }\r\n\r\n    },\r\n\r\n    error:function(quit, message)\r\n    {\r\n\r\n        if(quit)\r\n        {\r\n            throw new Error(message);\r\n\r\n        }\r\n        else\r\n        {\r\n            console.error('E!' + message);\r\n\r\n        }\r\n\r\n    },\r\n\r\n    info: function (m) {\r\n\r\n        if(Quazar.DEBUG) {\r\n\r\n            console.info('Info:' + m);\r\n\r\n        }\r\n    },\r\n\r\n\r\n    log: function (m) {\r\n\r\n        if(Quazar.DEBUG) {\r\n\r\n            console.log('Quazar:' + m);\r\n\r\n        }\r\n    },\r\n\r\n    //animate() : main animation call, run the once and it will recurse with requestAnimationFrame(this.animate);\r\n\r\n    animate:function()\r\n    {\r\n        TWEEN.update(time);\r\n\r\n        requestAnimationFrame(this.animate);\r\n\r\n        this.__gameWindow.update();\r\n\r\n        this.__gameWindow.ctx.clearRect(0, 0, this.__gameWindow.canvas.width, this.__gameWindow.canvas.height);\r\n\r\n        this.__gameWindow.draw();\r\n\r\n    },\r\n\r\n    start:function()\r\n    {\r\n\r\n        this.animate();\r\n\r\n    },\r\n\r\n\r\n\r\n    Collision:{\r\n\r\n        spriteRectanglesCollide(obj1, obj2)\r\n        {\r\n            if (obj1.position.x + obj1.size.x > obj2.size.x && obj1.position.x  < obj2.size.x + obj2.size.x &&\r\n                obj1.position.y + obj1.size.y > obj2.size.y && obj1.position.y  < obj2.size.y + obj2.size.y )\r\n            {\r\n\r\n                return true;\r\n\r\n            }\r\n\r\n        }\r\n    },\r\n\r\n    TWEEN: TWEEN,\r\n\r\n    _gameWindow: {},\r\n\r\n    setGameWindow: function (gameWindow) {\r\n\r\n        this._gameWindow = gameWindow;\r\n\r\n    },\r\n\r\n    getGameWindow: function () {\r\n\r\n\r\n        return this._gameWindow;\r\n\r\n    },\r\n\r\n    assignAll: function (object, args, keys) {\r\n\r\n        $Q.each(keys, function (ix, item) {\r\n\r\n            object[ix] = args[ix];\r\n\r\n        });\r\n\r\n\r\n    },\r\n\r\n\r\n    each: function (list, onResult, onComplete) {\r\n        for (var i in list) {\r\n            onResult(i, list[i]);\r\n        }\r\n\r\n        if (typeof(onComplete) === 'function') {\r\n            onComplete(false, list)\r\n        };\r\n\r\n    },\r\n\r\n    ready_callstack: [],\r\n\r\n    ready: function (callback) {\r\n\r\n        this.ready_callstack.push(callback);\r\n\r\n    },\r\n\r\n    callReady: function () {\r\n\r\n        var funx = this.ready_callstack;\r\n\r\n        var gameWindow = this._gameWindow, lib = this, sprites = this.__gameWindow.sprites;\r\n\r\n        //call every function in the ready_callstack\r\n\r\n        this.each(funx, function (ix, call) {\r\n\r\n            call(lib, gameWindow, sprites);\r\n\r\n        });\r\n\r\n\r\n        __gameInstance.isAtPlay = true;\r\n\r\n\r\n        this.InputEvents.init();\r\n\r\n    },\r\n\r\n    getArg: function (args, key, fallback) {\r\n        if (args && args.hasOwnProperty(key)) {\r\n            return args[key];\r\n        }\r\n        else {\r\n            return fallback;\r\n\r\n        }\r\n\r\n    }\r\n\r\n};\r\n\r\n__gameInstance = Quazar;\r\n\r\nlet QUAZAR = Quazar;\r\n\r\nlet $q = Quazar; let $Q = Quazar;\r\n\r\n/********************\r\n * Quazar.InputEvents\r\n * -Various PC Input Events\r\n ********************/\r\n\r\nQuazar.InputEvents = { //PC input events\r\n    mousemove: [],\r\n    leftclick: [],\r\n    rightclick: [],\r\n    middleclick: [],\r\n    wheelup: [],\r\n    wheelDown: [],\r\n    space: [],\r\n    tab: [],\r\n    shift: [],\r\n    1: [], 2: [], 3: [],\r\n    enter: [],\r\n    extend: function (evt_key, callback, onFinish) {\r\n\r\n        if (evt_key.toLowerCase().indexOf('key_') >= 0) {\r\n            //process this as a key event\r\n\r\n            var cleanKey = evt_key.toLowerCase();\r\n            Quazar.InputEvents[cleanKey] = Quazar.InputEvents[cleanKey] || [];\r\n            return Quazar.InputEvents[cleanKey].push({down: callback, up: onFinish});\r\n        } else {\r\n\r\n            Quazar.InputEvents[evt_key] = Quazar.InputEvents[evt_key] || [];\r\n            return Quazar.InputEvents[evt_key].push({down: callback, up: onFinish});\r\n        }\r\n\r\n    },\r\n    init: function () {\r\n\r\n\r\n        function getMousePos(e) {\r\n\r\n            var x;\r\n            var y;\r\n            if (e.pageX || e.pageY) {\r\n                x = e.pageX;\r\n                y = e.pageY;\r\n            } else {\r\n                x = e.clientX + document.body.scrollLeft + document.documentElement.scrollLeft;\r\n                y = e.clientY + document.body.scrollTop + document.documentElement.scrollTop;\r\n            }\r\n            x -= Quazar.canvas.offsetLeft;\r\n            y -= Quazar.canvas.style.top;\r\n            return {x: x, y: y};\r\n        }\r\n\r\n\r\n        function fullMoveInputEvents(event) {\r\n\r\n            var pos = getMousePos(event);\r\n            var InputEvents = Quazar.InputEvents;\r\n            for (var x in InputEvents) {\r\n\r\n\r\n                if (InputEvents[x] instanceof Array && x == 'mousemove') {\r\n\r\n\r\n                    Quazar.each(InputEvents[x], function (ix, el) {\r\n\r\n                        el.down(pos.x, pos.y);\r\n                    });\r\n                }\r\n\r\n            }\r\n\r\n        }\r\n        ;\r\n        document.onkeydown = function (e) {\r\n\r\n            //    alert(JSON.stringify(Quazar.InputEvents, true, 2));\r\n\r\n            Quazar.log('Got e');\r\n\r\n            var value = 'key_' + String.fromCharCode(e.keyCode).toLowerCase();\r\n            if (Quazar.InputEvents[value] instanceof Array) {\r\n\r\n                Quazar.log('Got []');\r\n\r\n                Quazar.each(Quazar.InputEvents[value], function (ix, item) {\r\n\r\n                    if (typeof (item.down) == 'function') {\r\n\r\n                        //   alert('RUNNING');\r\n\r\n                        item.down();\r\n                    }\r\n\r\n\r\n                });\r\n            }\r\n\r\n        }\r\n\r\n\r\n        document.onkeyup = function (e) {\r\n\r\n            //    alert(JSON.stringify(Quazar.InputEvents, true, 2));\r\n\r\n            var value = 'key_' + String.fromCharCode(e.keyCode).toLowerCase();\r\n            if (Quazar.InputEvents[value] instanceof Array) {\r\n\r\n                Quazar.each(Quazar.InputEvents[value], function (ix, item) {\r\n\r\n                    if (typeof (item.up) == 'function') {\r\n\r\n                        //   alert('RUNNING');\r\n\r\n                        item.up();\r\n                    }\r\n\r\n\r\n                });\r\n            }\r\n\r\n        };\r\n\r\n        Quazar.canvas.onmousedown = function (e) {\r\n\r\n            //    alert(JSON.stringify(Quazar.InputEvents, true, 2));\r\n\r\n            var value = e.which;\r\n            var pos = getMousePos(e);\r\n            var InputEvents = Quazar.InputEvents;\r\n\r\n\r\n            e.preventDefault();\r\n\r\n            switch (e.which) {\r\n                case 1:\r\n\r\n                    for (var x in InputEvents) {\r\n\r\n\r\n                        if (InputEvents[x] instanceof Array && x == 'leftclick') {\r\n\r\n\r\n                            Quazar.each(InputEvents[x], function (ix, el) {\r\n\r\n\r\n                                el.down(pos.x, pos.y);\r\n                            });\r\n                        }\r\n\r\n\r\n                    }\r\n\r\n                    break;\r\n                case 2:\r\n                    // alert('Middle Mouse button pressed.');\r\n\r\n\r\n                    for (var x in Quazar.InputEvents) {\r\n\r\n\r\n                        if (InputEvents[x] instanceof Array && x == 'middleclick') {\r\n\r\n\r\n                            Quazar.each(InputEvents[x], function (ix, el) {\r\n\r\n                                el.down(pos.x, pos.y);\r\n                            });\r\n                        }\r\n\r\n\r\n                    }\r\n                    break;\r\n                case 3:\r\n                    //  alert('Right Mouse button pressed.');\r\n\r\n\r\n                    for (var x in Quazar.InputEvents) {\r\n\r\n\r\n                        if (InputEvents[x] instanceof Array && x == 'rightclick') {\r\n\r\n\r\n                            Quazar.each(InputEvents[x], function (ix, el) {\r\n\r\n                                el.down(pos.x, pos.y);\r\n                            });\r\n\r\n                            return false;\r\n                        }\r\n\r\n\r\n                    }\r\n\r\n                    break;\r\n                default:\r\n\r\n                    return 0;\r\n                //alert('You have a strange Mouse!');\r\n\r\n            }\r\n\r\n\r\n            e.preventDefault();\r\n            return 0;\r\n        };\r\n        Quazar.canvas.onmouseup = function (e) {\r\n\r\n            //    alert(JSON.stringify(Quazar.InputEvents, true, 2));\r\n\r\n            var value = e.which;\r\n            var pos = getMousePos(e);\r\n            var InputEvents = Quazar.InputEvents;\r\n\r\n\r\n            e.preventDefault();\r\n\r\n            switch (e.which) {\r\n                case 1:\r\n\r\n                    for (var x in InputEvents) {\r\n\r\n\r\n                        if (InputEvents[x] instanceof Array && x == 'leftclick') {\r\n\r\n\r\n                            Quazar.each(InputEvents[x], function (ix, el) {\r\n\r\n\r\n                                el.up(pos.x, pos.y);\r\n                            });\r\n                        }\r\n\r\n\r\n                    }\r\n\r\n                    break;\r\n                case 2:\r\n                    // alert('Middle Mouse button pressed.');\r\n\r\n\r\n                    for (var x in Quazar.InputEvents) {\r\n\r\n\r\n                        if (InputEvents[x] instanceof Array && x == 'middleclick') {\r\n\r\n\r\n                            Quazar.each(InputEvents[x], function (ix, el) {\r\n\r\n                                el.up(pos.x, pos.y);\r\n                            });\r\n                        }\r\n\r\n\r\n                    }\r\n                    break;\r\n                case 3:\r\n                    //  alert('Right Mouse button pressed.');\r\n\r\n\r\n                    for (var x in Quazar.InputEvents) {\r\n\r\n\r\n                        if (InputEvents[x] instanceof Array && x == 'rightclick') {\r\n\r\n\r\n                            Quazar.each(InputEvents[x], function (ix, el) {\r\n\r\n                                el.up(pos.x, pos.y);\r\n                            });\r\n\r\n\r\n                            return false;\r\n\r\n                        }\r\n\r\n\r\n                    }\r\n\r\n                    break;\r\n                default:\r\n\r\n                    return 0;\r\n                //alert('You have a strange Mouse!');\r\n\r\n            }\r\n\r\n\r\n        };\r\n        document.addEventListener(\"mousemove\", fullMoveInputEvents);\r\n    }\r\n\r\n\r\n};\r\n\r\n\r\n$Q = QUAZAR;\r\n\r\n//Override the existing window.onload function\r\n\r\nwindow._preQuazar_windowLoad = window.onload;\r\n\r\nwindow.onload = function () {\r\n\r\n    if (typeof(window._preQuazar_windowLoad) == 'function') {\r\n        window._preQuazar_windowLoad();\r\n    }\r\n\r\n    $Q.callReady();\r\n\r\n}\r\n\r\n\r\n/*\r\n * Canvas\r\n *    draw animations, textures to the screen\r\n * */\r\n\r\n\r\nvar Canvas = {\r\n    draw: function (sprite, ctx){\r\n\r\n        if (sprite.active && sprite.onScreen(Game.WIDTH, Game.HEIGHT)) {\r\n\r\n            this.drawPortion(sprite, ctx);\r\n\r\n        }\r\n\r\n    },\r\n    drawFrameWithRotation: function (img, fx, fy, fw, fh, x, y, width, height, deg, canvasContextObj, flip) {\r\n\r\n        canvasContextObj.save();\r\n        deg = Math.round(deg);\r\n        deg = deg % 360;\r\n        var rad = deg * Math.PI / 180;\r\n        //Set the origin to the center of the image\r\n        canvasContextObj.translate(x, y);\r\n        canvasContextObj.rotate(rad);\r\n        //Rotate the canvas around the origin\r\n\r\n        canvasContextObj.translate(0, canvasContextObj.width);\r\n        if (flip) {\r\n\r\n            canvasContextObj.scale(-1, 1);\r\n        } else {\r\n\r\n        }\r\n\r\n        //draw the image\r\n        canvasContextObj.drawImage(img, fx, fy, fw, fh, width / 2 * (-1), height / 2 * (-1), width, height);\r\n        //reset the canvas\r\n\r\n        canvasContextObj.restore();\r\n    },\r\n\r\n\r\n    /*\r\n     * drawPortion:\r\n     *\r\n     *   expects: (sprite{selected_animation{selected_frame{frameSize, framePos } offset?, gameSize? }  })\r\n     *\r\n     *\r\n     * */\r\n\r\n\r\n    drawPortion: function (sprite, ctx) {\r\n\r\n        var frame;\r\n\r\n        if (sprite.active) {\r\n\r\n            if (sprite.selected_animation && sprite.selected_animation.selected_frame) {\r\n\r\n                frame = sprite.selected_animation.selected_frame;\r\n\r\n            }\r\n            else {\r\n\r\n                console.error('Sprite is missing arguments');\r\n\r\n            }\r\n\r\n            var x = sprite.position.x;\r\n            var y = sprite.position.y;\r\n\r\n            var camera = $Q.camera || {pos: {x: 0, y: 0, z: 0}};\r\n\r\n\r\n            if (true) {\r\n\r\n                if (!isNaN(camera.pos.x)) {\r\n\r\n                    x += camera.pos.x;\r\n                }\r\n\r\n                if (!isNaN(camera.pos.y)) {\r\n\r\n                    y += camera.pos.y;\r\n                }\r\n\r\n            }\r\n            ;\r\n\r\n\r\n            //optional animation : gameSize\r\n\r\n            var targetSize = sprite.selected_animation.size ? sprite.selected_animation.size : sprite.size;\r\n\r\n\r\n            var realWidth = targetSize.x;\r\n            var realHeight = targetSize.y;\r\n\r\n            //optional animation : offset\r\n\r\n            if (sprite.selected_animation.offset) {\r\n                x += sprite.selected_animation.offset.x;\r\n\r\n                y += sprite.selected_animation.offset.y;\r\n\r\n            }\r\n\r\n            var rotation;\r\n\r\n            if(typeof(sprite.rotation) == 'object')\r\n            {\r\n\r\n                rotation = sprite.rotation.x;\r\n\r\n\r\n            }\r\n            else\r\n            {\r\n                rotation = sprite.rotation;\r\n\r\n            }\r\n\r\n\r\n\r\n            this.drawFrameWithRotation(sprite.selected_animation.image.domElement, frame.framePos.x, frame.framePos.y, frame.frameSize.x, frame.frameSize.y, Math.round(x + (realWidth / 2)), Math.round(y + (realHeight / 2)), realWidth, realHeight, rotation % 360, ctx, sprite.flipX);\r\n        }\r\n\r\n    }\r\n\r\n}\r\n\r\n\r\nQuazar.ready(function (lib) {\r\n\r\n    Quazar.log('Quazar:lib :: ready');\r\n\r\n\r\n});\r\n\r\n\r\n/**\r\n *\r\n *  class: GameWindow:\r\n *  args{canvas, ctx, sprites, backgrounds, interactives, forces, update}\r\n */\r\n\r\n\r\nclass GameWindow {\r\n\r\n    constructor({canvas, ctx, sprites, backgrounds, interactives, forces, update}) {\r\n\r\n        this.sprites = sprites instanceof Array ? sprites:[];\r\n\r\n        this.backgrounds = backgrounds instanceof Array ? backgrounds:[];\r\n\r\n        this.interactives = interactives instanceof Array ? interactives:[];\r\n\r\n        this.forces = forces instanceof Array ? forces:[];\r\n\r\n        this.canvas = canvas;\r\n\r\n        if(!this.canvas){ this.canvas =  document.createElement('CANVAS'); console.info('GameWindow(): Created New Canvas'); }\r\n\r\n        this.ctx = ctx || canvas.getContext('2d');\r\n\r\n        this.__camera = new Vector3(0, 0, 0);\r\n\r\n        if(typeof update == 'function')\r\n        {\r\n            this.onUpdate(update);\r\n\r\n        }\r\n\r\n        Quazar.__gameWindow = this;\r\n\r\n        Quazar.canvas = this.canvas;\r\n\r\n        Quazar.ctx = this.ctx;\r\n\r\n    }\r\n\r\n    uniques(list)\r\n    {\r\n\r\n        var listout = [];\r\n\r\n        $.each(list, function(ix, item){\r\n\r\n            if(!listout.indexOf(item.id) >= 0)\r\n            {\r\n\r\n                var str = item.name;\r\n\r\n                listout.push({\"sprite\":item});\r\n\r\n            }\r\n\r\n        });\r\n\r\n        return listout;\r\n\r\n    }\r\n\r\n    setPlayer(player)\r\n    {\r\n        this.player = player;\r\n\r\n        if(!this.sprites.indexOf(player) >= 0)\r\n        {\r\n            this.sprites.push(player);\r\n\r\n        }\r\n\r\n    }\r\n\r\n    update()\r\n    {\r\n\r\n        Quazar.each(this.sprites, function (ix, item) {\r\n\r\n            if(typeof(item.update) == 'function')\r\n            {\r\n                item.update(item);\r\n\r\n            }\r\n\r\n            if(typeof(item.def_update) == 'function') {\r\n                //  console.log('def_update');\r\n\r\n                item.def_update(item);\r\n\r\n            }\r\n\r\n        });\r\n\r\n\r\n    }\r\n\r\n    onUpdate(arg)\r\n    {\r\n        if(typeof(arg) == 'function')\r\n        {\r\n            let up = this.update;\r\n\r\n            this.update = function(sprites){ up(sprites); arg(sprites);  }\r\n\r\n        }\r\n\r\n    }\r\n\r\n    draw() {\r\n\r\n        var _gw = this;\r\n\r\n        Quazar.each(this.sprites, function (ix, item) {\r\n\r\n            Canvas.draw(item, _gw.ctx);\r\n\r\n        });\r\n\r\n    }\r\n\r\n};\r\n\r\n\r\nclass TextDisplay\r\n{\r\n\r\n\r\n\r\n}\r\n\r\n\r\n/**TODO:complete the following\r\n *  class: StatDisplay:\r\n *  class: BarDisplay\r\n *  class: VideoDisplay\r\n */\r\n\r\n\r\nclass ItemDisplay //show an item display (image with text/number to the right\r\n{\r\n    constructor({font, fontSize}) {\r\n\r\n    }\r\n\r\n    set(text, image, color, font)\r\n    {\r\n\r\n\r\n    }\r\n    size()\r\n    {\r\n\r\n\r\n    }\r\n\r\n    render()\r\n    {\r\n\r\n    }\r\n\r\n}\r\n\r\n\r\nclass BarDisplay //show a display bar such as health bar\r\n{\r\n    constructor({font, fontSize}) {\r\n\r\n    }\r\n\r\n    set(text, image, color, font)\r\n    {\r\n\r\n\r\n    }\r\n    size()\r\n    {\r\n\r\n\r\n    }\r\n\r\n    render()\r\n    {\r\n\r\n    }\r\n\r\n}\r\n\r\nclass VideoDisplay //show a video\r\n{\r\n    constructor({src, size}) {\r\n\r\n        this.domElement = undefined;\r\n\r\n        this.src = src;\r\n\r\n        this.size = new Vector3(size.x, size.y, size.z || 0);\r\n\r\n        Quazar.log('VideoDisplay():: TODO: create dom element');\r\n\r\n    }\r\n\r\n    play() {\r\n\r\n    }\r\n}\r\n\r\n;/**\r\n * Created by The Blakes on 04-13-2017\r\n *\r\n */\r\n\r\n\r\n\r\nclass Animation {\r\n    constructor(args) {\r\n\r\n        args = args || {};\r\n\r\n        var _anime = this;\r\n\r\n        this.name = $Q.getArg(args, 'name', '_blank'),\r\n\r\n        this.description =  $Q.getArg(args, 'description', '_blank')\r\n\r\n        this.frames = $Q.getArg(args, 'frames', []);\r\n\r\n        this.image = new GameImage( $Q.getArg(args, 'src',  $Q.getArg(args, 'image', false)));\r\n\r\n\r\n        this.src = this.image.domElement.src;\r\n\r\n        this.domElement = this.image.domElement;\r\n\r\n        this.type = $Q.getArg(args, 'type', 'basic');\r\n\r\n        this.delay = $Q.getArg(args, 'delay', 0);\r\n\r\n        this.cix = 0;\r\n\r\n        this.frameSize = this.getArg(args, 'frameSize', new Vector3(0, 0, 0));\r\n\r\n        this.frameBounds = this.getArg(args, 'frameBounds', new VectorFrameBounds(new Vector3(0, 0, 0), new Vector3(0, 0, 0), new Vector3(0, 0, 0)));\r\n\r\n        this.frameOffset = this.getArg(args, 'frameOffset', new Vector3(0, 0, 0));\r\n\r\n\r\n      if(typeof(args) == 'object' && args.frameBounds && args.frameSize){  this.apply2DFrames(args.parent || {}) };\r\n\r\n        this.flipX = $Q.getArg(args, 'flipX', false);\r\n\r\n        this.priority = $Q.getArg(args, 'priority', 0);\r\n\r\n        this.cix = 0;\r\n\r\n        this.selected_frame = this.frames[0];\r\n\r\n        this.earlyTerm = this.getArg(args, 'earlyTerm', false);\r\n\r\n        this.hang =this.getArg(args, 'hang', false);\r\n\r\n        this.duration = this.getArg(args, 'duration', 1000);\r\n\r\n        this.size =  this.getArg(args, 'size', new Vector3(20, 20, 20));\r\n\r\n        this.effects = [];\r\n\r\n        this.timer = 0;\r\n\r\n        this.__gameLogic = false;\r\n\r\n        this.setType = function(){  };\r\n\r\n    }\r\n\r\n    singleFrame(frameSize, size)\r\n    {\r\n\r\n        this.__frametype = 'single';\r\n\r\n        this.frameSize = frameSize;\r\n\r\n        this.size = size;\r\n\r\n        this.selected_frame = {\r\n            image: this.image,\r\n            frameSize: this.frameSize,\r\n            framePos: {x: 0, y: 0}\r\n        };\r\n\r\n        this.frames[0] = this.selected_frame;\r\n\r\n\r\n    }\r\n\r\n    getArg(args, key, fallback) {\r\n\r\n        if (args.hasOwnProperty(key)) {\r\n\r\n            return args[key];\r\n\r\n        }\r\n        else {\r\n            return fallback;\r\n\r\n        }\r\n\r\n    }\r\n\r\n    apply2DFrames() {\r\n\r\n        this.frames = [];\r\n\r\n        var fcount = 0;\r\n\r\n\r\n        var quitLoop = false;\r\n\r\n        for (let y = this.frameBounds.min.y; y <= this.frameBounds.max.y; y++) {\r\n\r\n            for (let x = this.frameBounds.min.x; x <= this.frameBounds.max.x; x++) {\r\n\r\n                let framePos = {x: x * this.frameSize.x + this.frameOffset.x, y: y * this.frameSize.y + this.frameOffset.y};\r\n\r\n                this.frames.push({image: this.image, frameSize: this.frameSize, framePos: framePos});\r\n\r\n                if( x >= this.frameBounds.termPoint.x && y >= this.frameBounds.termPoint.y)\r\n                {\r\n\r\n                    quitLoop = true;\r\n\r\n                    break;\r\n                }\r\n\r\n                fcount += 1;\r\n\r\n                if(quitLoop)\r\n                    break;\r\n\r\n            }\r\n\r\n        }\r\n\r\n        this.frames[0] = !this.frames[0] ? {\r\n                image: this.image,\r\n                frameSize: this.frameSize,\r\n                framePos: {x: this.frameBounds.min.x, y: this.frameBounds.min.y}\r\n            } : this.frames[0];\r\n\r\n       // this.selected_frame = this.frames[this.cix % this.frames.length] || this.frames[0];\r\n\r\n    }\r\n\r\n    resetFrames() //special reset function:: frames are re-rendered each reset()\r\n    {\r\n\r\n        this.apply2DFrames();\r\n\r\n    }\r\n\r\n    update() {\r\n\r\n        this.selected_frame = this.frames[Math.round(this.cix) % this.frames.length];\r\n\r\n\r\n    }\r\n\r\n    reset()\r\n{\r\n\r\n    this.resetFrames();\r\n\r\n    this.cix = 0;\r\n\r\n}\r\n\r\ncontinuous(duration)\r\n{\r\n\r\n    if(this.__frametype == 'single')\r\n    {\r\n        return 0;\r\n\r\n    }\r\n\r\n  this.apply2DFrames();\r\n\r\n    //update once:\r\n    this.update();\r\n\r\n\r\n    if(this.cix == 0)\r\n  {\r\n\r\n      this.engage();\r\n\r\n  }\r\n\r\n\r\n}\r\n\r\nengage(duration, complete)\r\n{\r\n\r\n    if(this.__frametype == 'single')\r\n    {\r\n        return 0;\r\n\r\n    }\r\n\r\n\r\n    let __inst = this;\r\n\r\n    this.complete = complete || this.complete || function(){  };\r\n\r\n    var duration = duration || typeof(this.duration) == 'number' ? this.duration : this.frames.length * 20;\r\n\r\n    //we have a target\r\n  this.tween = new TWEEN.Tween(this)\r\n        .easing(__inst.curve || TWEEN.Easing.Linear.None)\r\n\r\n        .to({cix:__inst.frames.length - 1}, duration)\r\n        .onUpdate(function() {\r\n            //console.log(objects[0].position.x,objects[0].position.y);\r\n\r\n         //   __inst.cix = Math.ceil(__inst.cix);\r\n\r\n        __inst.update();\r\n\r\n        })\r\n        .onComplete(function() {\r\n            //console.log(objects[0].position.x, objects[0].position.y);\r\n\r\n            if(__inst.complete)\r\n            {\r\n\r\n                __inst.complete();\r\n\r\n            }\r\n\r\n            __inst.cix = 0;\r\n\r\n            __inst.isComplete = true;\r\n\r\n        });\r\n\r\n\r\n  this.tween.start();\r\n\r\n\r\n}\r\n\r\nonComplete(fun)\r\n{\r\n    this.complete = fun;\r\n\r\n}\r\n\r\n    animate() {\r\n\r\n        this.apply2DFrames();\r\n\r\n        this.timer += 1;\r\n\r\n        Quazar.log('ANIMATING with frame count:' + this.frames.length);\r\n\r\n        if(this.timer % this.delay == 0) {\r\n\r\n            if(this.hang)\r\n            {\r\n                this.cix = this.cix + 1;\r\n\r\n                if(this.cix > this.frames.length - 1)\r\n                {\r\n                    this.cix =  this.frames.length - 1;\r\n\r\n                }\r\n\r\n            }\r\n            else\r\n            {\r\n\r\n                this.cix = this.cix >= this.frames.length - 1 ? this.frameBounds.min.x : this.cix + 1;\r\n            }\r\n\r\n            this.update();\r\n\r\n        }\r\n\r\n    }\r\n\r\n};\r\n;/**\r\n * Created by The Blakes on 04-13-2017\r\n *\r\n */\r\n\r\n\r\nclass Callables {\r\n    constructor(args) {\r\n\r\n        this.list = [];\r\n\r\n        if(args instanceof Array)\r\n        {\r\n            this.list = args;\r\n\r\n        }\r\n        else\r\n        {\r\n            this.list = this.getArg(args, 'list', []);\r\n\r\n        }\r\n\r\n    }\r\n\r\n    getArg(args, key, fallback) {\r\n\r\n        if (args.hasOwnProperty(key)) {\r\n\r\n            return args[key];\r\n\r\n        }\r\n        else {\r\n            return fallback;\r\n\r\n        }\r\n\r\n    }\r\n\r\n    add(item)\r\n    {\r\n\r\n        if(typeof(item.engage) == 'function')\r\n        {\r\n           this.list.push(item);\r\n\r\n        }\r\n\r\n       else if(typeof(item.fire) == 'function')\r\n        {\r\n            this.list.push(item);\r\n\r\n        }\r\n\r\n       else if(typeof(item.start) == 'function')\r\n        {\r\n            this.list.push(item);\r\n\r\n        }\r\n\r\n       else if(typeof(item.run) == 'function')\r\n        {\r\n            this.list.push(item);\r\n\r\n        }\r\n\r\n       else if(typeof(item.process) == 'function')\r\n        {\r\n            this.list.push(item);\r\n\r\n        }\r\n\r\n\r\n    }\r\n\r\n    call()\r\n    {\r\n        $.each(this.list, function (ix, item) {\r\n\r\n\r\n            if(typeof(item.engage) == 'function')\r\n            {\r\n                item.engage();\r\n\r\n            }\r\n\r\n            if(typeof(item.fire) == 'function')\r\n            {\r\n                item.fire();\r\n\r\n            }\r\n\r\n            if(typeof(item.start) == 'function')\r\n            {\r\n                item.start();\r\n\r\n            }\r\n\r\n            if(typeof(item.run) == 'function')\r\n            {\r\n                item.run();\r\n\r\n            }\r\n\r\n            if(typeof(item.process) == 'function')\r\n            {\r\n                item.process();\r\n\r\n            }\r\n\r\n        });\r\n\r\n    }\r\n\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n;/**\r\n * Created by The Blakes on 04-13-2017\r\n *\r\n * Camera : has simple x, y, z, position / Vector, follows a specific sprite\r\n *\r\n * *incomplete as of 07-20-2017\r\n */\r\n\r\n\r\nclass Camera\r\n{\r\n\r\n    constructor(position)\r\n    {\r\n\r\n      this.position = Quazar.getArg(args, 'position', Quazar.getArg(args, 'pos', new Vector3(0, 0, 0) ) );\r\n\r\n    }\r\n\r\n    follow(object, accel, max, distSize)\r\n    {\r\n\r\n\r\n    }\r\n\r\n}\r\n\r\n\r\n\r\n;\r\n/*****************\r\n *  Controls():\r\n *\r\n *  Dependencies: (1) :\r\n *      -Quick2d.GamepadAdapter, HTML5 Gamepad Api\r\n ******************/\r\n\r\nclass Controls {\r\n\r\n    constructor(args) {\r\n\r\n\r\n        this.__controller = args.controller;\r\n\r\n    }\r\n\r\n    extendedCall(call, extension)\r\n    {\r\n\r\n        var formerCall = call;\r\n\r\n        call = function(){ call(); extension(); };\r\n\r\n        return call;\r\n\r\n    }\r\n\r\n    on(key, callback)\r\n    {\r\n\r\n        if(typeof(this.__controller) == 'object' && typeof(this.__controller[key]) == 'function')\r\n        {\r\n\r\n            console.info('applying controller function:' + key);\r\n\r\n            this.__controller[key] = this.extendedCall(this.__controller[key], callback);\r\n\r\n        }\r\n        else\r\n        {\r\n            console.error('could not apply controller function');\r\n\r\n        }\r\n\r\n    }\r\n\r\n\r\n};\r\n\r\n\r\n\r\n\r\n;/**\r\n * Created by The Blakes on 04-13-2017\r\n *\r\n */\r\n\r\nclass Force\r\n{\r\n    constructor(args)\r\n    {\r\n\r\n        this.name = args.name || \"\";\r\n\r\n        this.description = args.description || \"\";\r\n\r\n        this.subjects = args.subjects || [];\r\n        this.origin =  args.origin || {};\r\n        this.massObjects = args.massObjects || [];\r\n\r\n        this.minSpeed = args.minSpeed || new Vector3(1, 1, 1);\r\n\r\n        this.max = args.max || new Vector3(3, 3, 3);\r\n         this.accel = args.accel || new Vector3(1.3, 1.3, 1.3);\r\n\r\n        for(var x in args)\r\n        {\r\n            this[x] = args[x];\r\n\r\n        }\r\n\r\n    }\r\n\r\n    getArg(args, key, fallback) {\r\n\r\n        if (args.hasOwnProperty(key)) {\r\n\r\n            return args[key];\r\n\r\n        }\r\n        else {\r\n            return fallback;\r\n\r\n        }\r\n\r\n    }\r\n\r\n\r\n    gravitateY()\r\n    {\r\n\r\n      var  subjects = this.subjects;\r\n\r\n       var origin =  this.origin || {};\r\n\r\n       var massObjects =  this.massObjects;\r\n\r\n      var  accel =  this.accel || {};\r\n\r\n        var max =  this.max || {};\r\n\r\n        $.each(subjects, function(ix, itemx){\r\n\r\n           itemx.accelY(accel, max);\r\n\r\n           itemx.__falling = true;\r\n\r\n            $.each(massObjects, function(iy, itemy){\r\n\r\n                itemx.collide_stop(itemy);\r\n\r\n\r\n            });\r\n        });\r\n    }\r\n};\r\n\r\n\r\n\r\n\r\n\r\n\r\n;/**\r\n * Created by The Blakes on 7/27/2017.\r\n */\r\n\r\nclass StatEffect{\r\n\r\n    constructor(name, value) {\r\n\r\n        this.__is = \"a game logic effect\";\r\n\r\n        this.name =name;\r\n\r\n        this.value = value;\r\n\r\n    }\r\n\r\n    process(object)\r\n    {\r\n        //if the object has any property by effect.name, the property is incremenented by effect value\r\n        //a health decrease is triggered by Effect('health', -10);\r\n\r\n\r\n        for(var x in object)\r\n        {\r\n            if(x.toLowerCase() == this.name.toLowerCase() && typeof(value) == typeof(object[x]))\r\n            {\r\n\r\n                object[x] += this.value;\r\n\r\n            }\r\n\r\n        }\r\n\r\n    }\r\n\r\n}\r\n\r\nclass Collision\r\n{\r\n    constructor({object, collideables, extras})\r\n    {\r\n        this.object = object || [];\r\n\r\n        this.collideables = collideables instanceof Array ? collideables : [];\r\n\r\n        this.extras = extras instanceof Array ? extras : []; //anything extra to execute onCollision\r\n        //note: extras are any StatEffect, Animation, Movement to be simultaneously executed with this Collision\r\n\r\n    }\r\n\r\n    Object(object)\r\n    {\r\n        this.object = object;\r\n\r\n    }\r\n\r\n    Extras(extras)\r\n    {\r\n        this.extras = extras;\r\n\r\n    }\r\n\r\n    Collideables(collideables)\r\n    {\r\n        this.collideables = collideables;\r\n\r\n    }\r\n\r\n    onCollide(fun)\r\n    {\r\n        this.callback = fun;\r\n\r\n    }\r\n\r\n    collide()\r\n    {\r\n        this.callback();\r\n    }\r\n\r\n    process()\r\n    {\r\n        //if collision, call collide()\r\n\r\n    }\r\n\r\n\r\n};\r\n\r\n\r\n\r\nclass GameLogic {\r\n\r\n    constructor(gameEffectList)\r\n    {\r\n        if(!gameEffectList instanceof Array)\r\n        {\r\n\r\n            console.info('GameLogic: gameEffectList was not an array');\r\n\r\n            gameEffectList = [];\r\n\r\n        }\r\n\r\n       this.gameEffects = gameEffectList;\r\n\r\n    }\r\n    process_all()\r\n    {\r\n        //process all game logic objects::\r\n\r\n            for(var x = 0; x < this.gameEffects.length; x++)\r\n            {\r\n\r\n                this.gameEffects[x].process();\r\n\r\n            }\r\n\r\n    }\r\n    add(gameeffect)\r\n    {\r\n\r\n        this.gameEffects.push(gameeffect);\r\n\r\n    }\r\n\r\n}\r\n;\r\n\r\n/*****************\r\n *  GamepadAdapter:\r\n *\r\n *  Dependencies: (1) :\r\n *      -HTML5 Gamepad Api\r\n ******************/\r\n\r\nclass GamepadAdapter {\r\n\r\n    constructor() {\r\n\r\n        this.__gamepads = [];\r\n\r\n        this.intervals = [];\r\n\r\n        let controller_stack = this;\r\n\r\n        let _gpinst = this;\r\n\r\n        this.events = [];\r\n\r\n        window.setInterval(function () {\r\n\r\n            var gps = navigator.getGamepads();\r\n\r\n            _gpinst.gps = gps;\r\n\r\n            for(var x = 0; x < gps.length; x++) {\r\n\r\n            var events = _gpinst.__gamepads[x] ? _gpinst.__gamepads[x] : {};\r\n\r\n             _gpinst.process(gps[x], events);\r\n\r\n            }\r\n\r\n\r\n        }, 20);\r\n\r\n\r\n\r\n    }\r\n\r\n    gamepads()\r\n    {\r\n\r\n        return  navigator.getGamepads();\r\n\r\n    }\r\n\r\n\r\n    disconnect_all() {\r\n\r\n        for (var x = 0; x < this.intervals.length; x++) {\r\n\r\n            window.clearInterval(this.intervals[x]);\r\n\r\n        }\r\n\r\n    }\r\n\r\n\r\n    disconnect_by_index(game_pad_index) {\r\n\r\n        window.clearInterval(this.intervals[game_pad_index]);\r\n\r\n    }\r\n\r\n    hasAnyPad() {\r\n        return \"getGamepads\" in navigator;\r\n\r\n    }\r\n\r\n    Event(key, game_pad, callback) {\r\n        return {\r\n\r\n            key: key, game_pad:game_pad, callback: callback\r\n\r\n\r\n        }\r\n\r\n    }\r\n\r\n\r\n    GamepadEvents(args)\r\n    {\r\n\r\n        var gp = {};\r\n\r\n        gp.stick_left = args.stick_left || function(x, y)\r\n        {\r\n\r\n          //  console.log('Def call');\r\n\r\n        }\r\n\r\n\r\n        gp.stick_right = args.stick_right ||  function(x, y)\r\n        {\r\n\r\n        }\r\n\r\n        gp.buttons = [];\r\n\r\n        gp.on = function(key, callback)\r\n        {\r\n\r\n            if(this[key] && key !== \"on\")\r\n            {\r\n\r\n                this[key] = callback;\r\n\r\n\r\n            }\r\n\r\n            else if(key.indexOf('button') >= 0 && key.indexOf('_') >= 0 )\r\n            {\r\n                var parts = key.split('_');\r\n\r\n                var number;\r\n\r\n                try\r\n                {\r\n\r\n                    number = parseInt(parts[1]);\r\n\r\n                    this['buttons'][number] = callback;\r\n\r\n                }\r\n                catch (e)\r\n                    {\r\n                      console.error('could not parse \"on\" event with ' + key);\r\n\r\n                    }\r\n\r\n            }\r\n\r\n\r\n        }\r\n\r\n        this.__gamepads.push(gp);\r\n\r\n        return gp;\r\n\r\n    }\r\n\r\n\r\n\r\n    process(gp, gpEvents)\r\n    {\r\n\r\n        this.process_buttons(gp, gpEvents);\r\n\r\n        this.process_axes(gp, gpEvents);\r\n\r\n    }\r\n\r\n\r\n    process_axes(gp, events)\r\n    {\r\n\r\n        if(!gp || !gp['axes'])\r\n        {\r\n\r\n            return false;\r\n\r\n        }\r\n\r\n\r\n        for (var i = 0; i < gp.axes.length; i += 2) {\r\n            var axis1 = gp.axes[i], axia2 = gp.axes[i + 1];\r\n\r\n            var ix = (Math.ceil(i / 2) + 1), x = gp.axes[i], y = gp.axes[i + 1];\r\n\r\n\r\n\r\n            if(ix == 1 && events.stick_left)\r\n            {\r\n                events.stick_left(x, y);\r\n\r\n            }\r\n\r\n            if(ix == 2 && events.stick_right)\r\n            {\r\n                events.stick_right(x, y);\r\n\r\n            }\r\n\r\n            if (this.events && this.events['stick_' + i] && typeof(this.events['stick_' + i].callback) == 'function') {\r\n                this.events['stick_' + i].callback();\r\n\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n\r\n    process_buttons(gp, events) {\r\n\r\n        if(!gp || !gp['buttons'])\r\n        {\r\n             return false;\r\n\r\n        }\r\n\r\n        for (var i = 0; i < gp.buttons.length; i++) {\r\n\r\n            if (gp.buttons[i].pressed) {\r\n\r\n               // console.log('button:' + i);\r\n\r\n                    if (typeof(events.buttons[i]) == 'function') {\r\n                        events.buttons[i](gp.buttons[i].pressed);\r\n                    }\r\n                    else if (typeof( events.buttons[i]) == 'object' && typeof(events.buttons[i].update) == 'function') {\r\n                        events.buttons[i].update(events.buttons[i].pressed);\r\n\r\n                    }\r\n\r\n                var clearance_1 = this.events && this.events[i], gpc, bkey = \"button_\" + i;\r\n\r\n                if (clearance_1) {\r\n                    gpc = this.events[bkey] && !isNaN(this.events[bkey].game_pad) ? this.gamepads[this.events[bkey].game_pad] : this.events[bkey].game_pad;\r\n                }\r\n                ;\r\n\r\n                if (clearance_1 && gpc && typeof(this.events[bkey].callback) == 'function') {\r\n                    //call the callback\r\n                    this.events[i].callback();\r\n\r\n                }\r\n\r\n            }\r\n\r\n\r\n        }\r\n\r\n\r\n\r\n    }\r\n\r\n\r\n    on(key, gpix, callback) {\r\n\r\n        if(gpix >= this.__gamepads.length)\r\n        {\r\n\r\n            this.__gamepads.push(this.GamepadEvents({}));\r\n\r\n        }\r\n\r\n        this.__gamepads[gpix].on(key, callback);\r\n\r\n    }\r\n\r\n\r\n};\r\n\r\n\r\n\r\n\r\nif(!__gameInstance.GamepadAdapter)\r\n{\r\n    __gameInstance.GamepadAdapter = new GamepadAdapter();\r\n\r\n    __gameInstance.gamepads = [];\r\n\r\n    Quazar.GamepadAdapter = __gameInstance.GamepadAdapter;\r\n\r\n    Quazar.gamepads = __gameInstance.gamepads;\r\n\r\n    Quazar.GamepadAdapter.on('stick_left', 0, function(x, y){\r\n\r\n        console.log('Gamepad stick left');\r\n\r\n    });\r\n\r\n    Quazar.GamepadAdapter.on('button_0', 0, function(x, y){\r\n\r\n        console.log('Gamepad button 0');\r\n\r\n    });\r\n\r\n\r\n    Quazar.GamepadAdapter.on('button_1', 0, function(x, y){\r\n\r\n        console.log('Gamepad button 1');\r\n\r\n    });\r\n\r\n    Quazar.GamepadAdapter.on('button_2', 0, function(x, y){\r\n\r\n        console.log('Gamepad button 2');\r\n\r\n    });\r\n\r\n    Quazar.GamepadAdapter.on('button_3', 0, function(x, y){\r\n\r\n        console.log('Gamepad button 3');\r\n\r\n    });\r\n\r\n   // __gameInstance.gamepads.push(gamepad);\r\n\r\n};\r\n\r\n\r\n\r\n;/**\r\n * Created by Jordan Blake on 04-13-2017\r\n *\r\n */\r\nclass GravityAction\r\n{\r\n    constructor()\r\n    {\r\n\r\n    }\r\n\r\n}\r\n\r\nclass Graviton {\r\n    constructor(args) {\r\n\r\n    }\r\n}\r\n\r\nclass GravitationalRay {\r\n    constructor(args) {\r\n\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n;/**\r\n * Created by The Blakes on 04-13-2017\r\n *\r\n */\r\n\r\nclass Motion {\r\n    constructor(args) {\r\n\r\n        this.getArg = $Q.getArg;\r\n\r\n        this.distance = this.getArg(args, 'distance', this.getArg(args, 'distances', false));\r\n\r\n        this.curvesList = this.curvesObject(); //Tween.Easing\r\n\r\n        this.parent_id = args.parent_id || args.object_id || \"__blank\"; //The parent object\r\n\r\n        this.curve = this.getArg(args, 'curve', TWEEN.Easing.Quadratic.InOut);\r\n\r\n        this.targetRotation = this.getArg(args, 'targetRotation', 0);\r\n\r\n        this.name = this.getArg(args, 'name', \"__\");\r\n\r\n        this.description = this.getArg(args, 'description', false);\r\n\r\n        this.curveString = this.getCurveString(); //store a string key for the Tween.Easing || 'curve'\r\n\r\n        this.setCurve(this.curveString);\r\n\r\n        this.line = this.getArg(args, 'line', false);\r\n\r\n        this.duration = this.getArg(args, 'duration', 500);\r\n\r\n        this.delay = this.getArg(args, 'delay', 0);\r\n\r\n        this.duration = this.getArg(args, 'duration', false);\r\n\r\n\r\n    }\r\n\r\n\r\n    curvesObject() {\r\n\r\n        var c = [];\r\n\r\n        Quazar.each(TWEEN.Easing, function (ix, easing) {\r\n\r\n            Quazar.each(easing, function (iy, easeType) {\r\n\r\n                if (['in', 'out', 'inout'].indexOf(iy.toLowerCase()) >= 0) {\r\n\r\n                    c.push(ix + \"_\" + iy);\r\n\r\n                }\r\n\r\n            });\r\n\r\n        });\r\n\r\n        return c;\r\n\r\n    }\r\n\r\n\r\n    getCurveString() {\r\n\r\n        var __inst = this;\r\n\r\n        var c;\r\n\r\n        $.each(TWEEN.Easing, function (ix, easing) {\r\n\r\n            $.each(TWEEN.Easing[ix], function (iy, easeType) {\r\n\r\n\r\n                if (__inst.curve == TWEEN.Easing[ix][iy]) {\r\n\r\n                    c = ix + \"_\" + iy;\r\n\r\n                }\r\n\r\n            });\r\n\r\n        });\r\n\r\n        return c;\r\n\r\n    }\r\n\r\n\r\n    setCurve(c) {\r\n\r\n        var cps = c.split('_');\r\n\r\n        var s1 = cps[0], s2 = cps[1];\r\n\r\n\r\n        var curve = TWEEN.Easing.Quadratic.InOut;\r\n\r\n\r\n        $.each(TWEEN.Easing, function (ix, easing) {\r\n\r\n            $.each(TWEEN.Easing[ix], function (iy, easeType) {\r\n\r\n\r\n                if (ix == s1 && iy == s2) {\r\n\r\n                    // alert('setting curve');\r\n\r\n                    curve = TWEEN.Easing[ix][iy];\r\n\r\n                }\r\n\r\n            });\r\n\r\n        });\r\n\r\n        this.curve = curve;\r\n\r\n\r\n        return curve;\r\n\r\n    }\r\n\r\n    engage() {\r\n\r\n        var tweens = [];\r\n\r\n        //construct a tween::\r\n\r\n        var __inst = this;\r\n\r\n\r\n        var objects = {};\r\n\r\n        $.each(Game.sprites, function (ix, item) {\r\n\r\n            if (item.id == __inst.parent_id) {\r\n\r\n                objects[ix] = item;\r\n\r\n            }\r\n        });\r\n\r\n\r\n        var target = {\r\n\r\n            x: __inst.distance.x + objects[0].position.x,\r\n            y: __inst.distance.y + objects[0].position.y,\r\n            z: __inst.distance.z + objects[0].position.z\r\n\r\n        };\r\n\r\n        if (__inst.targetRotation > 0 || __inst.targetRotation < 0) {\r\n\r\n\r\n            var targetR = __inst.targetRotation + objects[0].rotation.x;\r\n\r\n            //we have a target\r\n            tweens[0] = new TWEEN.Tween(objects[0].rotation)\r\n                .easing(__inst.curve || TWEEN.Easing.Elastic.InOut)\r\n\r\n                .to({x: targetR}, __inst.duration)\r\n                .onUpdate(function () {\r\n                    //console.log(objects[0].position.x,objects[0].position.y);\r\n\r\n\r\n                })\r\n                .onComplete(function () {\r\n                    //console.log(objects[0].position.x, objects[0].position.y);\r\n                    if (__inst.complete) {\r\n\r\n                        __inst.complete();\r\n\r\n                    }\r\n\r\n\r\n                });\r\n\r\n\r\n        }\r\n\r\n        //we have a target\r\n        tweens.push(new TWEEN.Tween(objects[0].position)\r\n            .easing(__inst.curve || TWEEN.Easing.Elastic.InOut)\r\n\r\n            .to(target, __inst.duration)\r\n            .onUpdate(function () {\r\n                //console.log(objects[0].position.x,objects[0].position.y);\r\n\r\n\r\n            })\r\n            .onComplete(function () {\r\n                //console.log(objects[0].position.x, objects[0].position.y);\r\n\r\n                if (__inst.complete) {\r\n\r\n                    __inst.complete();\r\n\r\n                }\r\n\r\n\r\n            }));\r\n\r\n\r\n        __inst.delay = !isNaN(__inst.delay) && __inst.delay > 0 ? __inst.delay : 0;\r\n\r\n\r\n        return {\r\n\r\n            tweens: tweens,\r\n\r\n            delay: __inst.delay,\r\n\r\n            fire: function () {\r\n\r\n                var __tweenObject = this;\r\n\r\n                window.setTimeout(function () {\r\n\r\n                    for (var x = 0; x < __tweenObject.tweens.length; x++) {\r\n\r\n                        __tweenObject.tweens[x].start();\r\n\r\n                    }\r\n\r\n                }, this.delay);\r\n\r\n            }\r\n\r\n        }\r\n\r\n    }\r\n\r\n    start() {\r\n        this.engage().fire();\r\n\r\n    }\r\n\r\n\r\n    onComplete(fun) {\r\n        this.complete = fun;\r\n\r\n    }\r\n\r\n    // obj.getGraphCanvas( $(c.domElement), value.replace('_', '.'), TWEEN.Easing[parts[0]][parts[1]] );\r\n\r\n    getGraphCanvas( t, f, c) {\r\n\r\n        var canvas = document.createElement('canvas');\r\n\r\n        canvas.id = 'curve-display';\r\n\r\n        canvas.width = 180;\r\n        canvas.height = 100;\r\n\r\n\r\n        var context = canvas.getContext('2d');\r\n        context.fillStyle = \"rgb(250,250,250)\";\r\n        context.fillRect(0, 0, 180, 100);\r\n\r\n        context.lineWidth = 0.5;\r\n        context.strokeStyle = \"rgb(230,230,230)\";\r\n\r\n        context.beginPath();\r\n        context.moveTo(0, 20);\r\n        context.lineTo(180, 20);\r\n        context.moveTo(0, 80);\r\n        context.lineTo(180, 80);\r\n        context.closePath();\r\n        context.stroke();\r\n\r\n        context.lineWidth = 2;\r\n        context.strokeStyle = \"rgb(255,127,127)\";\r\n\r\n        var position = {x: 5, y: 80};\r\n        var position_old = {x: 5, y: 80};\r\n\r\n        new TWEEN.Tween(position).to({x: 175}, 2000).easing(TWEEN.Easing.Linear.None).start();\r\n        new TWEEN.Tween(position).to({y: 20}, 2000).easing(f).onUpdate(function () {\r\n\r\n            context.beginPath();\r\n            context.moveTo(position_old.x, position_old.y);\r\n            context.lineTo(position.x, position.y);\r\n            context.closePath();\r\n            context.stroke();\r\n\r\n            position_old.x = position.x;\r\n            position_old.y = position.y;\r\n\r\n        }).start();\r\n\r\n        return canvas;\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n;/**\r\n * Created by Administrator on 7/15/2017.\r\n */\r\n\r\n\r\nclass Rectangle {\r\n\r\n    constructor(min, max) {\r\n\r\n        this.min = min;\r\n        this.max = max;\r\n\r\n    }\r\n\r\n\r\n}\r\n;\r\n\r\nlet VectorBounds = Rectangle;\r\n\r\nclass VectorFrameBounds extends Rectangle {\r\n\r\n    constructor(min, max, termPoint) {\r\n\r\n        super(min, max);\r\n\r\n        this.termPoint = termPoint || new Vector3(this.max.x, this.max.y, this.max.z);\r\n\r\n    }\r\n\r\n\r\n}\r\n;\r\n\r\nclass Circle\r\n{\r\n    constructor(args) {\r\n\r\n        this.position = this.getArg(args, 'position', new Vector3(0, 0, 0));\r\n\r\n        this.radius = this.getArgs(args, 'radius', 100);\r\n\r\n    }\r\n\r\n\r\n}\r\n\r\n;\r\nclass Sprite {\r\n    constructor(name, description, args) {\r\n\r\n        this.active = true; //active sprites are visible\r\n\r\n        this.__specialPresets = new SpritePresets(); //apply presets to this variable\r\n\r\n        if(typeof name == 'object') //accept first argument as full args object\r\n        {\r\n\r\n            args = name;\r\n\r\n            this.name = args.name || \"__\";\r\n\r\n            this.description = args.description || \"__\";\r\n\r\n        }\r\n        else\r\n        {\r\n\r\n            this.name = name || \"__\";\r\n\r\n            this.description = description || \"__\";\r\n\r\n        }\r\n\r\n        var _spr = this;\r\n\r\n        Quazar.each(args, function (ix, item) { //apply all args\r\n\r\n            if (ix !== 'parent') {\r\n                _spr[ix] = item;\r\n            }\r\n\r\n        });\r\n\r\n        this.type = $Q.getArg(args, 'type', 'basic');\r\n\r\n        this.animations = $Q.getArg(args, 'animations', []);\r\n\r\n        this.motions = $Q.getArg(args, 'motions', []);\r\n\r\n        let __inst = this;\r\n\r\n        this.id = $Q.getArg(args, 'id',  this.create_id());\r\n\r\n        this.sounds = $Q.getArg(args, 'sounds', []);\r\n\r\n        this.image = $Q.getArg(args, 'image', new GameImage($Q.getArg(args, 'src', false)));\r\n\r\n        this.size = $Q.getArg(args, 'size', new Vector2(100, 100));\r\n\r\n        this.position = $Q.getArg(args, 'position', new Vector3(0, 0, 0));\r\n\r\n        this.collision_bounds = $Q.getArg(args, 'collision_bounds', new VectorBounds(new Vector3(0, 0, 0), new Vector3(0, 0, 0)));\r\n\r\n        this.rotation = $Q.getArg(args, 'rotation', new Vector3(0, 0, 0));\r\n\r\n        this.selected_animation = {};\r\n\r\n        this.speed =  $Q.getArg(args, 'speed', new Vector3(0, 0, 0));\r\n\r\n        this.accel =  $Q.getArg(args, 'accel', new Vector3(0, 0, 0));\r\n\r\n        this.rot_speed =  $Q.getArg(args, 'rot_speed', new Vector3(0, 0, 0));\r\n\r\n        this.rot_accel =  $Q.getArg(args, 'rot_accel', new Vector3(0, 0, 0));\r\n\r\n        //Apply / instantiate Sound(), Motion(), and Animation() args...\r\n\r\n        $.each(this.sounds , function(ix, item){\r\n\r\n            __inst.sounds[ix] = new Sound(item);\r\n\r\n        });\r\n\r\n        $.each(this.motions, function(ix, item){\r\n\r\n            __inst.motions[ix] = new Motion(item);\r\n\r\n        });\r\n\r\n\r\n        $.each(this.animations, function(ix, item){\r\n\r\n            __inst.animations[ix] = new Animation(item);\r\n\r\n        });\r\n\r\n    }\r\n\r\n    /*****************************\r\n     * Getters\r\n     ***************************/\r\n\r\n\r\n    get_id()\r\n    {\r\n        return this.id;\r\n    }\r\n\r\n\r\n    /*****************************\r\n     * Setters and Creators\r\n     ***************************/\r\n\r\n    create_id()\r\n    {\r\n        return new Date().getUTCMilliseconds();\r\n\r\n    }\r\n\r\n    setSize(size)\r\n    {\r\n        this.size = new Vector3(size.x, size.y, size.z || 0);\r\n\r\n        this.selected_animation.size = this.size;\r\n\r\n    }\r\n\r\n\r\n    /*****************************\r\n     *  assertSpeed()\r\n     *  -assert the existence of a speed{} object\r\n     ***************************/\r\n\r\n    assertSpeed() {\r\n        if (!this.speed) {\r\n\r\n            this.speed = new Vector3(0, 0, 0);\r\n\r\n        }\r\n\r\n    }\r\n\r\n    /*****************************\r\n     *  setAnimation(anime)\r\n     *  -set the select_animation of this sprite\r\n     ***************************/\r\n\r\n    setAnimation(anime) {\r\n\r\n        this.animations['default'] = anime;\r\n\r\n        this.selected_animation = anime;\r\n\r\n        Quazar.log('declared default animation');\r\n\r\n        return this;\r\n\r\n    }\r\n\r\n    /*****************************\r\n     *  defaultAnimation(anime)\r\n     *  -set the default_animation of this sprite\r\n     *  -TODO : determine whether to implement a default animatio OR simply use setAnimation() plus selected_animation\r\n     ***************************/\r\n\r\n    defaultAnimation(anime) {\r\n\r\n        this.animations['default'] = anime;\r\n\r\n        Quazar.log('declared default animation');\r\n\r\n        return this;\r\n\r\n    }\r\n\r\n    /*****************************\r\n     * onScreen :\r\n     * -returns boolean\r\n     * -takes and requires w, h of screen\r\n     * -detects if object is on the screen\r\n     ***************************/\r\n\r\n    onScreen(w, h) {\r\n        return this.position.x + this.size.x >= 0 && this.position.x < w\r\n            && this.position.y + this.size.y >= 0 && this.position.y < h;\r\n\r\n    }\r\n\r\n    /*****************************\r\n     * Updates\r\n     ***************************/\r\n\r\n    /*****************************\r\n     * update()\r\n     * -starts empty:: is used by Quick2d.js as the main sprite update\r\n     ***************************/\r\n\r\n    update(sprite) {}\r\n\r\n    /*****************************\r\n     * def_update()\r\n     * -applies speed and other default factors of movement::\r\n     * -is used by Quick2d.js as the system def_update (default update)\r\n     ***************************/\r\n\r\n    def_update(sprite) {\r\n\r\n        for(var x in this.speed)\r\n        {\r\n\r\n            if(this.speed[x] > 0 || this.speed[x] < 0)\r\n            {\r\n\r\n                this.position[x] += this.speed[x];\r\n\r\n            }\r\n\r\n        }\r\n\r\n        for(var x in this.accel)\r\n        {\r\n\r\n            if(this.accel[x] > 0 || this.accel[x] < 0)\r\n            {\r\n\r\n                this.speed[x] += this.accel[x];\r\n\r\n            }\r\n\r\n        }\r\n\r\n        for(var x in this.rot_speed)\r\n        {\r\n\r\n            if(this.rot_speed[x] > 0 || this.rot_speed[x] < 0)\r\n            {\r\n\r\n                this.rotation[x] += this.rot_speed[x];\r\n\r\n            }\r\n\r\n\r\n        }\r\n\r\n        for(var x in this.rot_accel)\r\n        {\r\n\r\n\r\n            if(this.rot_accel[x] > 0 || this.rot_accel[x] < 0)\r\n            {\r\n\r\n                this.rot_speed[x] += this.rot_accel[x];\r\n\r\n            }\r\n        }\r\n    }\r\n\r\n    /*****************************\r\n     *  onUpdate(fun)\r\n     * -args: 1 function(sprite){ } //the self-instance/sprite is passed into the function()\r\n     * -overrides and maintains existing code for update(){} function\r\n     ***************************/\r\n\r\n    onUpdate(fun)\r\n    {\r\n        fun = fun || function(){};\r\n\r\n        let update = this.update;\r\n\r\n        let __inst = this;\r\n\r\n        this.update = function(__inst){ update(__inst); fun(__inst); };\r\n\r\n    }\r\n\r\n    /*****************************\r\n     *  collidesRectangular(sprite)\r\n     * -args: 1 sprite object\r\n     * -returns boolean of true on collision or false on no-collision\r\n     * -TODO : add options object with highlight=true||false,\r\n     * -TODO:allow stateffects, graphiceffects into the collision function\r\n     ***************************/\r\n\r\n    collidesRectangular(sprite)\r\n    {\r\n\r\n        return Quazar.Collision.spriteRectanglesCollide(sprite);\r\n\r\n    }\r\n\r\n    /*****************************\r\n     *  collidesByPixels(sprite)\r\n     *  -TODO : this function is incomplete\r\n     *  -process collision according to the non-transparent pixels of the sprite::\r\n     *  -provides a more realistic collision than basic rectangular\r\n     ***************************/\r\n\r\n    collidesByPixels(sprite)\r\n    {\r\n\r\n        return console.info(\"TODO: Sprite().collidesByPixels(sprite): finish this function\");\r\n\r\n    }\r\n\r\n    /*****************************\r\n     *  shoot(sprite)\r\n     *  -fire a shot from the sprite:: as in a firing gun or spaceship\r\n     *  -takes options{} for number of shots, anglePerShot, etc...\r\n     *  -TODO: complete and test this code\r\n     ***************************/\r\n\r\n    shoot(options) {\r\n        //character shoots an animation\r\n\r\n        this.prep_key = 'shoot';\r\n\r\n        let spread = options.spread || options.angleSpread || false;\r\n\r\n        let total = options.total || options.totalBullets || options.numberBullets || false;\r\n\r\n        let animation = options.bullet || options.animation || false;\r\n\r\n        let duration = options.duration || options.screenDuration || false;\r\n\r\n        let speed = options.speed || false;\r\n\r\n        if (__gameInstance.isAtPlay) {\r\n\r\n\r\n        }\r\n        else {\r\n\r\n            this.event_arg(this.prep_key, '_', options);\r\n\r\n        }\r\n\r\n        return this;\r\n\r\n    }\r\n\r\n    /*****************************\r\n     *  animate(animation)\r\n     *  -simply animate, set the animation to the arg 'animation'\r\n     ***************************/\r\n\r\n    animate(animation) {\r\n\r\n        alert('calling animation');\r\n\r\n        if (__gameInstance.isAtPlay) {\r\n\r\n          if(animation){ this.setAnimation(animation) };\r\n\r\n            this.selected_animation.animate();\r\n\r\n            return this;\r\n\r\n        }\r\n\r\n    }\r\n\r\n    /*****************************\r\n     *  accelY\r\n     *  -accelerate on Y-Axis with 'accel' and 'max' (speed) arguments\r\n     *  -example-use: gravitation of sprite || up / down movement\r\n     ***************************/\r\n\r\n    accelY(accel, max) {\r\n\r\n        accel = Math.abs(accel);\r\n\r\n        if(typeof(max) == 'number')\r\n        {\r\n            max = {y:max};\r\n\r\n        }\r\n\r\n        this.assertSpeed();\r\n\r\n        let diff =  max.y - this.speed.y;\r\n\r\n        if(diff > 0)\r\n        {\r\n            this.speed.y += Math.abs(diff) >= accel ? accel : diff;\r\n\r\n        };\r\n\r\n        if(diff < 0)\r\n        {\r\n            this.speed.y -= Math.abs(diff) >= accel ? accel : diff;\r\n\r\n        };\r\n\r\n    }\r\n\r\n\r\n    /*****************************\r\n     *  accelX\r\n     *  -accelerate on X-Axis with 'accel' and 'max' (speed) arguments\r\n     *  -example-use: running of sprite || left / right movement\r\n     ***************************/\r\n\r\n    accelX(accel, max) {\r\n\r\n        accel = Math.abs(accel);\r\n\r\n        if(typeof(max) == 'number')\r\n        {\r\n            max = {x:max};\r\n\r\n        }\r\n\r\n        this.assertSpeed();\r\n\r\n        let diff =  max.x - this.speed.x;\r\n\r\n        if(diff > 0)\r\n        {\r\n            this.speed.x += Math.abs(diff) >= accel ? accel : diff;\r\n\r\n        };\r\n\r\n        if(diff < 0)\r\n        {\r\n            this.speed.x -= Math.abs(diff) >= accel ? accel : diff;\r\n\r\n        };\r\n\r\n    }\r\n\r\n    /*****************************\r\n     *  decelX\r\n     *  -decelerate on the X axis\r\n     *  -args: 1 float:amt\r\n     ***************************/\r\n\r\n    deccelX(rate) {\r\n        if (typeof(rate) == 'object') {\r\n\r\n            rate = rate.rate;\r\n\r\n        }\r\n\r\n        if (this.speed['x'] > rate) {\r\n            this.speed['x'] -= rate;\r\n\r\n        }\r\n        else if (this.speed['x'] < rate) {\r\n            this.speed['x'] += rate;\r\n\r\n        }\r\n        else\r\n        {\r\n\r\n            this.speed['x'] = 0;\r\n\r\n        }\r\n\r\n    }\r\n\r\n\r\n    /*****************************\r\n     *  decelY\r\n     *  -decelerate on the Y axis\r\n     *  -args: 1 float:amt\r\n     ***************************/\r\n\r\n    decelY(amt) {\r\n\r\n        amt = Math.abs(amt);\r\n\r\n        if(Math.abs(this.speed.y) <= amt)\r\n        {\r\n            this.speed.y = 0;\r\n\r\n        }\r\n        else if(this.speed.y > amt)\r\n        {\r\n\r\n            this.speed.y -= amt;\r\n        }\r\n        else if(this.speed.y < amt * -1)\r\n        {\r\n\r\n            this.speed.y += amt;\r\n        }\r\n\r\n    }\r\n\r\n    /*****************************\r\n     *  decelX\r\n     *  -decelerate on the X axis\r\n     *  -args: 1 float:amt\r\n     ***************************/\r\n\r\n    decelX(amt) {\r\n\r\n        amt = Math.abs(amt);\r\n\r\n        if(Math.abs(this.speed.x) <= amt)\r\n        {\r\n            this.speed.x = 0;\r\n\r\n        }\r\n        else if(this.speed.x > amt)\r\n        {\r\n\r\n            this.speed.x -= amt;\r\n        }\r\n        else if(this.speed.x < amt * -1)\r\n        {\r\n\r\n            this.speed.x += amt;\r\n        }\r\n\r\n    }\r\n\r\n    /*****************************\r\n     *  collide_stop(item)\r\n     *  -both collide and stop on the object, when falling on Y axis::\r\n     *  -sets the special property: __falling to false on stop :: helps to control Sprite() state\r\n     *  -TODO : rename to fallstop || something that resembles a function strictly on Y-Axis\r\n     ***************************/\r\n\r\n    collide_stop(item)\r\n    {\r\n\r\n        var max_y = item.max ? item.max.y : item.position.y;\r\n\r\n        if(this.position.y + this.size.y >= max_y)\r\n        {\r\n\r\n            this.position.y = max_y - this.size.y;\r\n\r\n            this.__falling = false;\r\n\r\n        }\r\n\r\n    }\r\n\r\n    /*****************************\r\n     *  fromFile(file_path)\r\n     *  -TODO : complete this function based on code to load Sprite() from file, located in the spritemaker.html file\r\n     *  -TODO: test this function\r\n     ***************************/\r\n\r\n    fromFile(file_path)\r\n    {\r\n        var __inst = this;\r\n\r\n        $.getJSON(file_path, function(data){\r\n\r\n            __inst = new Sprite(data);\r\n\r\n        });\r\n\r\n    }\r\n\r\n};\r\n\r\n\r\n/****************\r\n * TODO : Complete SpritePresetsOptions::\r\n *  Use these as options for Sprite Control, etc...\r\n ****************/\r\n\r\n\r\nclass SpritePresets {\r\n\r\n\r\n    constructor()\r\n    {\r\n\r\n        var options = SpritePresetsOptions();\r\n\r\n        for(var x in options)\r\n        {\r\n\r\n            this[x] = false;\r\n\r\n        }\r\n\r\n\r\n    }\r\n\r\n    apply()\r\n{\r\n\r\n\r\n\r\n}\r\n\r\n}\r\n\r\n\r\n\r\nlet SpritePresetsOptions =function() {\r\nreturn {\r\n    Flight: {\r\n\r\n        __args: {},\r\n\r\n        top_down_flight: function (sprite) {\r\n        },\r\n\r\n        side_scroll_flight: function (sprite) {\r\n        }\r\n\r\n    },\r\n\r\n    Running: {\r\n\r\n        __args: {},\r\n\r\n        side_scroll_runner: function (sprite) {\r\n\r\n            let __lib = Quazar || Quick2d;\r\n\r\n            Quazar.GamepadAdapter.on('stick_left', 0, function(x, y){\r\n\r\n                accel = accel || 0.25; max = max || 7;\r\n\r\n                sprite.accelX(accel, x * max);\r\n\r\n                if(x < -0.2)\r\n                {\r\n                    sprite.flipX = true;\r\n\r\n                }\r\n                else if(x > 0.2)\r\n                {\r\n                    sprite.flipX = false;\r\n\r\n                }\r\n\r\n            });\r\n\r\n            sprite.onUpdate(function(spr){\r\n\r\n                spr.decelX(0.1);\r\n\r\n                if(!spr.__falling){ spr.decelY(0.2) };\r\n\r\n            });\r\n\r\n\r\n        }\r\n\r\n    },\r\n\r\n    Collision: {\r\n\r\n        __args: {},\r\n\r\n\r\n        basic_stop_collideable: function (sprite) {\r\n        },\r\n\r\n        top_stop_collideable: function (sprite) {\r\n        } //pass through bottom, but land on top, as with certain platforms\r\n\r\n\r\n    },\r\n\r\n    Powerups: {\r\n\r\n        __args: {},\r\n\r\n        grabbable_power_up: function (sprite) {\r\n        }\r\n\r\n    },\r\n\r\n    ControllerStickMotion: {\r\n\r\n        __args: {},\r\n\r\n        stick_move_x: function (sprite) {\r\n        },\r\n\r\n        stick_move_y: function (sprite) {\r\n        }\r\n\r\n    }\r\n\r\n    ,\r\n\r\n    Jumping: {\r\n\r\n        __args: {}\r\n\r\n    },\r\n\r\n    Shooting: {\r\n\r\n        __args: {}\r\n\r\n    }\r\n\r\n}\r\n};;\r\n//Vector3:\r\n\r\nclass Vector3 {\r\n    constructor(x, y, z, r) {\r\n        this.x = x;\r\n        this.y = y;\r\n        this.z = z;\r\n        this.r = r;\r\n\r\n        this.__relativeTo = false;\r\n\r\n    }\r\n\r\n    relativeTo(v)\r\n    {\r\n        this.__relativeTo = v;\r\n    }\r\n\r\n    sub()\r\n    {\r\n        //TODO : subtract vectors\r\n\r\n\r\n    }\r\n\r\n    add()\r\n    {\r\n        //TODO : add vectors\r\n\r\n    }\r\n\r\n    is_between(v1, v2)\r\n    {\r\n        //TODO : overlap vectors return boolean\r\n\r\n    }\r\n\r\n}\r\n;\r\n\r\nlet Pos = Vector3, Size = Vector3, Position = Vector3, Vector2 = Vector3, Vector = Vector3, Rotation = Vector3;\r\n\r\n//The above are a list of synonymous expressions for Vector3. All of these do the same thing in this library (store x,y,z values)\r\n;/**\r\n * Created by The Blakes on 04-13-2017\r\n *\r\n */\r\n\r\n\r\nclass InterfaceCallback\r\n{\r\n    constructor({name, description, callback})\r\n    {\r\n\r\n       this.name = name;\r\n\r\n       this.description = description;\r\n\r\n       this.callback = callback || function(){ console.info('The call was empty'); };\r\n\r\n    }\r\n\r\n    run()\r\n    {\r\n\r\n        this.callback();\r\n\r\n    }\r\n\r\n}\r\n\r\n\r\nclass SpeechInterfaceStructure\r\n{\r\n    constructor({name, description})\r\n    {\r\n        this.name = name || \"Program helper.\";\r\n\r\n        this.description = description || \"An interface for the game-builder program.\";\r\n\r\n        this.options_structure = {\r\n\r\n        scroll:function(x, y){}, //simple scroll controller\r\n\r\n\r\n\r\n        create_object_resource:{\r\n\r\n            constructors:Quazar.IF.__allConstructors(),\r\n\r\n            selectedType:false,\r\n\r\n            selectByName:Quazar.IF.selectByName,\r\n\r\n            apply_speech_value:Quazar.IF.applySpeechValue()\r\n\r\n        }, //apply each class in the program, with means of creating / instantiating\r\n\r\n        save_object_resource:{\r\n\r\n            selected_object:false,\r\n\r\n            confirm:Quazar.IF.confirmation()\r\n\r\n        }, //apply each class in the program, with means of saving\r\n\r\n        retrieve_object_resource:{}, //retrieve\r\n\r\n        browse_object_resources:{}, //browsing\r\n\r\n        search_object_resources:{}, //searching\r\n\r\n        delete_object_resources:{}, //delete\r\n\r\n        apply_value:{} //apply a value to an object resource\r\n\r\n        }\r\n\r\n    }\r\n\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n"]}