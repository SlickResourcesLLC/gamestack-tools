{"version":3,"sources":["../../../ecma/concat/Quick2d.js"],"names":["Sound","src","x","sound","Audio","onLoad","play","GameImage","onCreate","Object","image","document","createElement","ext","substring","lastIndexOf","length","error","domElement","onload","__gameInstance","Quazar","DEBUG","gui_mode","__gameWindow","__sprites","__animations","samples","log_modes","log_mode","recursionCount","createid","Date","getUTCMilliseconds","getActionablesCheckList","__inst","actionables","$","each","sprites","ix","item","concat","sounds","motionstacks","animations","interlog","message","div","isNaN","quit","Error","console","info","m","log","animate","TWEEN","update","time","requestAnimationFrame","ctx","clearRect","canvas","width","height","draw","start","mustHave","obj","keytypes","callback","Collision","spriteRectanglesCollide","obj1","obj2","position","size","y","_gameWindow","setGameWindow","gameWindow","getGameWindow","assignAll","object","args","keys","$Q","list","onResult","onComplete","i","ready_callstack","ready","push","onReady","funx","lib","call","isAtPlay","getArg","key","fallback","hasOwnProperty","QUAZAR","$q","InputEvents","mousemove","leftclick","rightclick","middleclick","wheelup","wheelDown","space","tab","shift","enter","extend","evt_key","onFinish","toLowerCase","indexOf","cleanKey","down","up","init","getMousePos","e","pageX","pageY","clientX","body","scrollLeft","documentElement","clientY","scrollTop","offsetLeft","offsetTop","fullMoveInputEvents","event","pos","Array","el","onkeydown","value","String","fromCharCode","keyCode","onkeyup","onmousedown","which","preventDefault","onmouseup","addEventListener","window","_preQuazar_windowLoad","Canvas","sprite","active","onScreen","Game","WIDTH","HEIGHT","drawPortion","drawFrameWithRotation","img","fx","fy","fw","fh","deg","canvasContextObj","flip","save","Math","round","rad","PI","translate","rotate","scale","drawImage","restore","frame","selected_animation","selected_frame","camera","z","targetSize","realWidth","realHeight","offset","rotation","framePos","frameSize","flipX","Collection","type","__flyingIndex","splice","gui","fui","addFolder","testObject","o","add","onChange","updateDisplay","__prev","__checkbox","checked","GameWindow","backgrounds","interactives","forces","sprite_set","background_set","interactive_set","force_set","actionstack_set","Vector3","spriteOptions","uniques","extraUpdate","listout","id","str","name","player","def_update","Sprite","arg","_gw","TextDisplay","font","text","color","VideoDisplay","undefined","Animation_Samples","Animation","duration","repeat","parent","Vector2","frameBounds","VectorBounds","Sprite_Samples","frog","setAnimation","barrel","event_args_list","_anime","description","frames","delay","cix","VectorFrameBounds","frameOffset","apply2DFrames","priority","earlyTerm","hang","effects","timer","__gameLogic","setType","__frametype","fcount","quitLoop","min","max","termPoint","resetFrames","engage","complete","tween","Tween","easing","curve","Easing","Linear","None","to","onUpdate","isComplete","fun","Callables","fire","run","process","Camera","accel","distSize","Force","subjects","origin","massObjects","minSpeed","itemx","velocityY","iy","itemy","collide","StatEffect","onEffect","__is","numberTimes","withinDuration","GameEffect","myChance","chance","trigger","objects","floatPrecision","collidables","GameLogic","gameEffectList","gameEffects","effect","GamepadAdapter","__gamepads","intervals","controller_stack","_gpinst","setInterval","gps","navigator","getGamepads","events","clearInterval","game_pad_index","game_pad","gp","stick_left","stick_right","buttons","on","parts","split","number","parseInt","gpEvents","process_buttons","process_axes","axes","axis1","axia2","ceil","pressed","clearance_1","gpc","bkey","gamepads","gpix","Event","gamepad","GamepadEvents","Motion","distance","curvesList","curvesObject","parent_id","Quadratic","InOut","targetRotation","curveString","getCurveString","setCurve","line","c","easeType","cps","s1","s2","tweens","target","targetR","Elastic","__tweenObject","setTimeout","t","f","context","getContext","fillStyle","fillRect","lineWidth","strokeStyle","beginPath","moveTo","lineTo","closePath","stroke","position_old","_spr","motions","setid","collision_bounds","selected_motionstack","selected_physics","onGround","clasticTo","damagedBy","speed","rot_speed","rot_accel","actionlists","w","h","options","prep_key","spread","angleSpread","total","totalBullets","numberBullets","animation","bullet","screenDuration","event_arg","alert","evt","assertSpeed","max_y","switch","extras","rate","anime","file_path","getJSON","data","GameObjects","BlockTile","BlockSprite","__subType","PowerContainer","SideScrollerSprite"],"mappings":"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","file":"Quick2d.js","sourcesContent":["/**\r\n * Created by The Blakes on 3/16/2017.\r\n */\r\n\r\n\r\n/**\r\n * Created by The Blakes on 3/16/2017.\r\n */\r\n\r\n\r\n\r\n/*\r\n * Vector3\r\n *\r\n *    multi instantiator for size, pos, rotation, anything with X,Y, and Z (or just x and y)\r\n *\r\n *\r\n * */\r\n\r\nclass Sound {\r\n\r\n    constructor(src) {\r\n\r\n        if(typeof(src)== 'object')\r\n        {\r\n\r\n            for(var x in src)\r\n            {\r\n                this[x] = src[x];\r\n\r\n            }\r\n\r\n            this.sound = new Audio(src.src);\r\n\r\n            this.onLoad = src.onLoad || function(){};\r\n\r\n        }\r\n\r\n      else  if (typeof(src)=='string') {\r\n\r\n            this.src = src;\r\n\r\n            this.sound = new Audio(this.src);\r\n\r\n        }\r\n\r\n        this.onLoad = this.onLoad || function(){};\r\n\r\n        if (typeof(this.onLoad) == 'function') {\r\n\r\n            this.onLoad(this.sound);\r\n\r\n        }\r\n\r\n    }\r\n\r\n    play() {\r\n        if (typeof(this.sound) == 'object' && typeof(this.sound.play) == 'function') {\r\n\r\n            this.sound.play();\r\n\r\n        }\r\n\r\n\r\n    }\r\n\r\n}\r\n\r\n\r\nclass GameImage {\r\n\r\n    constructor(src, onCreate) {\r\n\r\n       // Quazar.log('initializing image');\r\n\r\n        if (src instanceof Object) {\r\n\r\n            //alert('getting image from image');\r\n\r\n            this.image = document.createElement('IMG');\r\n\r\n            this.image.src = src.src;\r\n\r\n            this.src = src.src;\r\n\r\n        }\r\n\r\n        else if (typeof(src) == 'string') {\r\n\r\n        let ext = src.substring(src.lastIndexOf('.'), src.length);\r\n\r\n            this.image = document.createElement('IMG');\r\n\r\n            this.image.src =  src;\r\n\r\n            this.src = this.image.src;\r\n\r\n\r\n        }\r\n\r\n\r\n\r\n\r\n        if(!this.image)\r\n        {\r\n            this.image = {error:\"Image not instantiated, set to object by default\"};\r\n\r\n        }\r\n\r\n        this.domElement = this.image;\r\n\r\n        this.image.onload = function () {\r\n\r\n            if (typeof(this.onCreate) == 'function') {\r\n\r\n                this.onCreate(this.image);\r\n\r\n            }\r\n\r\n\r\n        }\r\n\r\n    }\r\n\r\n     getImage() {\r\n\r\n        return this.image;\r\n\r\n    }\r\n\r\n}\r\n\r\n\r\n//Quazar: a main / game lib object::\r\nlet __gameInstance = __gameInstance || {};\r\n\r\nlet Quazar = {\r\n\r\n    DEBUG: false,\r\n\r\n    gui_mode:true,\r\n\r\n    __gameWindow:{},\r\n\r\n    __sprites:[],\r\n\r\n    __animations:[],\r\n\r\n    samples: {},\r\n\r\n    log_modes:['reqs', 'info', 'warning'],\r\n\r\n    log_mode:\"all\",\r\n\r\n    recursionCount:0,\r\n\r\n    createid:function()\r\n    {\r\n        new Date().getUTCMilliseconds() + \"\";\r\n    },\r\n\r\n    getActionablesCheckList:function()\r\n    {\r\n        //every unique sound, animation, tweenmotion in the game\r\n\r\n        let __inst = {};\r\n\r\n        let actionables = [];\r\n\r\n        $.each(this.sprites, function(ix, item){\r\n\r\n\r\n            actionables.concat(item.sounds);\r\n\r\n            actionables.concat(item.motionstacks);\r\n\r\n            actionables.concat(item.animations);\r\n\r\n\r\n        });\r\n\r\n\r\n    },\r\n\r\n    interlog:function(message, div) //recursive safe :: won't go crazy with recursive logs\r\n    {\r\n        this.recursionCount++;\r\n\r\n        if(!isNaN(div) && this.recursionCount % div == 0)\r\n        {\r\n         //   console.log('Interval Log:'+  message);\r\n\r\n        }\r\n\r\n    },\r\n\r\n    error:function(quit, message)\r\n    {\r\n\r\n        if(quit)\r\n        {\r\n            throw new Error(message);\r\n\r\n        }\r\n        else\r\n        {\r\n            console.error('E!' + message);\r\n\r\n        }\r\n\r\n    },\r\n\r\n\r\n    info: function (m) {\r\n\r\n            console.info('Info:' + m);\r\n\r\n\r\n    },\r\n\r\n\r\n    log: function (m) {\r\n\r\n      //  console.log('Quazar:' + m);\r\n\r\n\r\n    },\r\n\r\n    animate:function()\r\n    {\r\n        TWEEN.update(time);\r\n\r\n        requestAnimationFrame(this.animate);\r\n\r\n        this.__gameWindow.update();\r\n\r\n        this.__gameWindow.ctx.clearRect(0, 0, this.__gameWindow.canvas.width, this.__gameWindow.canvas.height);\r\n\r\n        this.__gameWindow.draw();\r\n\r\n    },\r\n\r\n    start:function()\r\n    {\r\n\r\n        this.animate();\r\n\r\n    },\r\n\r\n\r\n    mustHave: function (obj, keytypes, callback) {\r\n\r\n        this.each(keytypes, function (ix, item) {\r\n\r\n            callback(false);\r\n\r\n\r\n        });\r\n\r\n\r\n        callback(true);\r\n\r\n    },\r\n\r\n    Collision:{\r\n\r\n        spriteRectanglesCollide(obj1, obj2)\r\n        {\r\n            if (obj1.position.x + obj1.size.x > obj2.size.x && obj1.position.x  < obj2.size.x + obj2.size.x &&\r\n                obj1.position.y + obj1.size.y > obj2.size.y && obj1.position.y  < obj2.size.y + obj2.size.y )\r\n            {\r\n\r\n                return true;\r\n\r\n            }\r\n\r\n        }\r\n    },\r\n\r\n    TWEEN: TWEEN,\r\n\r\n    _gameWindow: {},\r\n\r\n    setGameWindow: function (gameWindow) {\r\n\r\n        this._gameWindow = gameWindow;\r\n\r\n    },\r\n\r\n    getGameWindow: function () {\r\n\r\n\r\n        return this._gameWindow;\r\n\r\n    },\r\n\r\n    assignAll: function (object, args, keys) {\r\n        $Q.each(keys, function (ix, item) {\r\n\r\n            object[ix] = args[ix];\r\n\r\n        });\r\n\r\n\r\n    },\r\n\r\n\r\n    each: function (list, onResult, onComplete) {\r\n        for (var i in list) {\r\n            onResult(i, list[i]);\r\n        }\r\n\r\n        if (typeof(onComplete) === 'function') {\r\n            onComplete(false, list)\r\n        };\r\n\r\n    },\r\n\r\n\r\n\r\n    ready_callstack: [],\r\n\r\n    ready: function (callback) {\r\n\r\n\r\n        this.ready_callstack.push(callback);\r\n\r\n    },\r\n\r\n    onReady: function () {\r\n        var funx = this.ready_callstack;\r\n\r\n        var gameWindow = this._gameWindow, lib = this, sprites = this.__gameWindow.sprites;\r\n\r\n        this.each(funx, function (ix, call) {\r\n\r\n            call(lib, gameWindow, sprites);\r\n\r\n        });\r\n\r\n        __gameInstance.isAtPlay = true;\r\n\r\n\r\n    },\r\n\r\n    getArg: function (args, key, fallback) {\r\n        if (args && args.hasOwnProperty(key)) {\r\n            return args[key];\r\n\r\n        }\r\n        else {\r\n            return fallback;\r\n\r\n        }\r\n\r\n    }\r\n\r\n};\r\n\r\n__gameInstance = Quazar;\r\n\r\nlet QUAZAR = Quazar;\r\n\r\nlet $q = Quazar; let $Q = Quazar;\r\n\r\n\r\nQuazar.InputEvents = { //PC input events\r\n    mousemove: [],\r\n    leftclick: [],\r\n    rightclick: [],\r\n    middleclick: [],\r\n    wheelup: [],\r\n    wheelDown: [],\r\n    space: [],\r\n    tab: [],\r\n    shift: [],\r\n    1: [], 2: [], 3: [],\r\n    enter: [],\r\n    extend: function (evt_key, callback, onFinish) {\r\n\r\n        if (evt_key.toLowerCase().indexOf('key_') >= 0) {\r\n            //process this as a key event\r\n\r\n            var cleanKey = evt_key.toLowerCase();\r\n            Quazar.InputEvents[cleanKey] = Quazar.InputEvents[cleanKey] || [];\r\n            return Quazar.InputEvents[cleanKey].push({down: callback, up: onFinish});\r\n        } else {\r\n\r\n            Quazar.InputEvents[evt_key] = Quazar.InputEvents[evt_key] || [];\r\n            return Quazar.InputEvents[evt_key].push({down: callback, up: onFinish});\r\n        }\r\n\r\n    },\r\n    init: function () {\r\n\r\n\r\n        function getMousePos(e) {\r\n\r\n            var x;\r\n            var y;\r\n            if (e.pageX || e.pageY) {\r\n                x = e.pageX;\r\n                y = e.pageY;\r\n            } else {\r\n                x = e.clientX + document.body.scrollLeft + document.documentElement.scrollLeft;\r\n                y = e.clientY + document.body.scrollTop + document.documentElement.scrollTop;\r\n            }\r\n            x -= Quazar.canvas.offsetLeft;\r\n            y -= Quazar.canvas.offsetTop;\r\n            return {x: x, y: y};\r\n        }\r\n\r\n\r\n        function fullMoveInputEvents(event) {\r\n\r\n            var pos = getMousePos(event);\r\n            var InputEvents = Quazar.InputEvents;\r\n            for (var x in InputEvents) {\r\n\r\n\r\n                if (InputEvents[x] instanceof Array && x == 'mousemove') {\r\n\r\n\r\n                    Quazar.each(InputEvents[x], function (ix, el) {\r\n\r\n                        el.down(pos.x, pos.y);\r\n                    });\r\n                }\r\n\r\n            }\r\n\r\n        }\r\n        ;\r\n        document.onkeydown = function (e) {\r\n\r\n            //    alert(JSON.stringify(Quazar.InputEvents, true, 2));\r\n\r\n            Quazar.log('Got e');\r\n\r\n            var value = 'key_' + String.fromCharCode(e.keyCode).toLowerCase();\r\n            if (Quazar.InputEvents[value] instanceof Array) {\r\n\r\n                Quazar.log('Got []');\r\n\r\n                Quazar.each(Quazar.InputEvents[value], function (ix, item) {\r\n\r\n                    if (typeof (item.down) == 'function') {\r\n\r\n                        //   alert('RUNNING');\r\n\r\n                        item.down();\r\n                    }\r\n\r\n\r\n                });\r\n            }\r\n\r\n        }\r\n\r\n\r\n        document.onkeyup = function (e) {\r\n\r\n            //    alert(JSON.stringify(Quazar.InputEvents, true, 2));\r\n\r\n            var value = 'key_' + String.fromCharCode(e.keyCode).toLowerCase();\r\n            if (Quazar.InputEvents[value] instanceof Array) {\r\n\r\n                Quazar.each(Quazar.InputEvents[value], function (ix, item) {\r\n\r\n                    if (typeof (item.up) == 'function') {\r\n\r\n                        //   alert('RUNNING');\r\n\r\n                        item.up();\r\n                    }\r\n\r\n\r\n                });\r\n            }\r\n\r\n        };\r\n\r\n\r\n\r\n        Quazar.canvas.onmousedown = function (e) {\r\n\r\n            //    alert(JSON.stringify(Quazar.InputEvents, true, 2));\r\n\r\n            var value = e.which;\r\n            var pos = getMousePos(e);\r\n            var InputEvents = Quazar.InputEvents;\r\n\r\n\r\n            e.preventDefault();\r\n\r\n            switch (e.which) {\r\n                case 1:\r\n\r\n                    for (var x in InputEvents) {\r\n\r\n\r\n                        if (InputEvents[x] instanceof Array && x == 'leftclick') {\r\n\r\n\r\n                            Quazar.each(InputEvents[x], function (ix, el) {\r\n\r\n\r\n                                el.down(pos.x, pos.y);\r\n                            });\r\n                        }\r\n\r\n\r\n                    }\r\n\r\n                    break;\r\n                case 2:\r\n                    // alert('Middle Mouse button pressed.');\r\n\r\n\r\n                    for (var x in Quazar.InputEvents) {\r\n\r\n\r\n                        if (InputEvents[x] instanceof Array && x == 'middleclick') {\r\n\r\n\r\n                            Quazar.each(InputEvents[x], function (ix, el) {\r\n\r\n                                el.down(pos.x, pos.y);\r\n                            });\r\n                        }\r\n\r\n\r\n                    }\r\n                    break;\r\n                case 3:\r\n                    //  alert('Right Mouse button pressed.');\r\n\r\n\r\n                    for (var x in Quazar.InputEvents) {\r\n\r\n\r\n                        if (InputEvents[x] instanceof Array && x == 'rightclick') {\r\n\r\n\r\n                            Quazar.each(InputEvents[x], function (ix, el) {\r\n\r\n                                el.down(pos.x, pos.y);\r\n                            });\r\n\r\n                            return false;\r\n                        }\r\n\r\n\r\n                    }\r\n\r\n                    break;\r\n                default:\r\n\r\n                    return 0;\r\n                //alert('You have a strange Mouse!');\r\n\r\n            }\r\n\r\n\r\n            e.preventDefault();\r\n            return 0;\r\n        };\r\n        Quazar.canvas.onmouseup = function (e) {\r\n\r\n            //    alert(JSON.stringify(Quazar.InputEvents, true, 2));\r\n\r\n            var value = e.which;\r\n            var pos = getMousePos(e);\r\n            var InputEvents = Quazar.InputEvents;\r\n\r\n\r\n            e.preventDefault();\r\n\r\n            switch (e.which) {\r\n                case 1:\r\n\r\n                    for (var x in InputEvents) {\r\n\r\n\r\n                        if (InputEvents[x] instanceof Array && x == 'leftclick') {\r\n\r\n\r\n                            Quazar.each(InputEvents[x], function (ix, el) {\r\n\r\n\r\n                                el.up(pos.x, pos.y);\r\n                            });\r\n                        }\r\n\r\n\r\n                    }\r\n\r\n                    break;\r\n                case 2:\r\n                    // alert('Middle Mouse button pressed.');\r\n\r\n\r\n                    for (var x in Quazar.InputEvents) {\r\n\r\n\r\n                        if (InputEvents[x] instanceof Array && x == 'middleclick') {\r\n\r\n\r\n                            Quazar.each(InputEvents[x], function (ix, el) {\r\n\r\n                                el.up(pos.x, pos.y);\r\n                            });\r\n                        }\r\n\r\n\r\n                    }\r\n                    break;\r\n                case 3:\r\n                    //  alert('Right Mouse button pressed.');\r\n\r\n\r\n                    for (var x in Quazar.InputEvents) {\r\n\r\n\r\n                        if (InputEvents[x] instanceof Array && x == 'rightclick') {\r\n\r\n\r\n                            Quazar.each(InputEvents[x], function (ix, el) {\r\n\r\n                                el.up(pos.x, pos.y);\r\n                            });\r\n\r\n\r\n                            return false;\r\n\r\n                        }\r\n\r\n\r\n                    }\r\n\r\n                    break;\r\n                default:\r\n\r\n                    return 0;\r\n                //alert('You have a strange Mouse!');\r\n\r\n            }\r\n\r\n\r\n        };\r\n        document.addEventListener(\"mousemove\", fullMoveInputEvents);\r\n    }\r\n\r\n\r\n};\r\n\r\n\r\n$Q = QUAZAR;\r\n\r\nwindow._preQuazar_windowLoad = window.onload;\r\n\r\nwindow.onload = function () {\r\n\r\n    //alert('window load');\r\n\r\n    if (typeof(window._preQuazar_windowLoad) == 'function') {\r\n        window._preQuazar_windowLoad();\r\n\r\n    }\r\n\r\n    $Q.onReady();\r\n\r\n}\r\n\r\n\r\n/*\r\n * Canvas\r\n *\r\n *    draw animations, textures to the screen\r\n *\r\n *\r\n * */\r\n\r\n\r\nvar Canvas = {\r\n    draw: function (sprite, ctx){\r\n\r\n        if (sprite.active && sprite.onScreen(Game.WIDTH, Game.HEIGHT)) {\r\n\r\n            this.drawPortion(sprite, ctx);\r\n\r\n        }\r\n\r\n    },\r\n    drawFrameWithRotation: function (img, fx, fy, fw, fh, x, y, width, height, deg, canvasContextObj, flip) {\r\n\r\n        canvasContextObj.save();\r\n        deg = Math.round(deg);\r\n        deg = deg % 360;\r\n        var rad = deg * Math.PI / 180;\r\n        //Set the origin to the center of the image\r\n        canvasContextObj.translate(x, y);\r\n        canvasContextObj.rotate(rad);\r\n        //Rotate the canvas around the origin\r\n\r\n        canvasContextObj.translate(0, canvasContextObj.width);\r\n        if (flip) {\r\n\r\n            canvasContextObj.scale(-1, 1);\r\n        } else {\r\n\r\n        }\r\n\r\n        //draw the image\r\n        canvasContextObj.drawImage(img, fx, fy, fw, fh, width / 2 * (-1), height / 2 * (-1), width, height);\r\n        //reset the canvas\r\n\r\n        canvasContextObj.restore();\r\n    },\r\n\r\n\r\n    /*\r\n     * drawPortion:\r\n     *\r\n     *   expects: (sprite{selected_animation{selected_frame{frameSize, framePos } offset?, gameSize? }  })\r\n     *\r\n     *\r\n     * */\r\n\r\n\r\n    drawPortion: function (sprite, ctx) {\r\n\r\n        var frame;\r\n\r\n        if (sprite.active) {\r\n\r\n            if (sprite.selected_animation && sprite.selected_animation.selected_frame) {\r\n\r\n                frame = sprite.selected_animation.selected_frame;\r\n\r\n            }\r\n            else {\r\n\r\n                console.error('Sprite is missing arguments');\r\n\r\n            }\r\n\r\n            var x = sprite.position.x;\r\n            var y = sprite.position.y;\r\n\r\n            var camera = $Q.camera || {pos: {x: 0, y: 0, z: 0}};\r\n\r\n\r\n            if (true) {\r\n\r\n                if (!isNaN(camera.pos.x)) {\r\n\r\n                    x += camera.pos.x;\r\n                }\r\n\r\n                if (!isNaN(camera.pos.y)) {\r\n\r\n                    y += camera.pos.y;\r\n                }\r\n\r\n            }\r\n            ;\r\n\r\n\r\n            //optional animation : gameSize\r\n\r\n            var targetSize = sprite.selected_animation.size ? sprite.selected_animation.size : sprite.size;\r\n\r\n\r\n            var realWidth = targetSize.x;\r\n            var realHeight = targetSize.y;\r\n\r\n            //optional animation : offset\r\n\r\n            if (sprite.selected_animation.offset) {\r\n                x += sprite.selected_animation.offset.x;\r\n\r\n                y += sprite.selected_animation.offset.y;\r\n\r\n            }\r\n\r\n            var rotation;\r\n\r\n            if(typeof(sprite.rotation) == 'object')\r\n            {\r\n\r\n                rotation = sprite.rotation.x;\r\n\r\n\r\n            }\r\n            else\r\n            {\r\n                rotation = sprite.rotation;\r\n\r\n            }\r\n\r\n\r\n\r\n            this.drawFrameWithRotation(sprite.selected_animation.image.domElement, frame.framePos.x, frame.framePos.y, frame.frameSize.x, frame.frameSize.y, Math.round(x + (realWidth / 2)), Math.round(y + (realHeight / 2)), realWidth, realHeight, rotation % 360, ctx, sprite.flipX);\r\n        }\r\n\r\n    }\r\n\r\n}\r\n\r\n\r\nQuazar.ready(function (lib) {\r\n\r\n    Quazar.log('Quazar:lib :: ready');\r\n\r\n\r\n});\r\n\r\n\r\n\r\n/**\r\n *\r\n *  class: Collection:\r\n *\r\n *      Defines a Collection of objects\r\n *      #extended by  class\r\n *      functions:\r\n *          add()\r\n *          remove()GameWindow\r\n *          next()\r\n *          all()\r\n *\r\n */\r\n\r\n\r\nclass Collection {\r\n\r\n    constructor(list, type) {\r\n\r\n\r\n        this.list = list;\r\n\r\n        //if type is undefined, then no type profile is needed (assume basic array, object types)\r\n\r\n        //else the type profile must exist ::\r\n\r\n\r\n        this.type = type;\r\n\r\n\r\n\r\n        this.__flyingIndex = 0;\r\n\r\n    }\r\n\r\n    add(object) {\r\n\r\n        this.list.push(object);\r\n\r\n    }\r\n\r\n    remove(object) {\r\n\r\n        var ix = this.list.indexOf(object);\r\n\r\n        if (ix >= 0)\r\n            this.list = this.list.splice(ix, 1);\r\n\r\n    }\r\n\r\n    next(callback) {\r\n        var object = this.list(this.__flyingIndex % this.list.length);\r\n\r\n        if (callback) {\r\n            return callback(object);\r\n        }//run callback with reference to the object\r\n\r\n\r\n    }\r\n\r\n    all(callback) {\r\n        Quazar.each(this.list, function (ix, item) {\r\n\r\n            callback(item); //run callback with reference to the object\r\n\r\n        });\r\n\r\n    }\r\n\r\n    toCheckableGui(gui, list, key) {\r\n\r\n        let fui = gui.addFolder(this.type);\r\n\r\n        Quazar.each(this.list, function (ix, el) {\r\n\r\n// store this reference somewhere reasonable or just look it up in\r\n// __controllers or __folders like other examples show\r\n\r\n            let testObject = {};\r\n\r\n            testObject[key] = {};\r\n\r\n            let o = fui.add(testObject, key).onChange(function (value) {\r\n\r\n              //  alert('Value changed to:' + value);\r\n\r\n                list.push(value);\r\n\r\n\r\n            });\r\n\r\n// some later time you manually update\r\n            o.updateDisplay();\r\n            o.__prev = o.__checkbox.checked;\r\n\r\n\r\n        });\r\n\r\n\r\n        return gui;\r\n\r\n\r\n    }\r\n\r\n\r\n};\r\n\r\n\r\n\r\n\r\n/**\r\n *\r\n *  class: GameWindow:\r\n *\r\n *      Requires a canvas, all sprites on canvas, and physical collective_forces on screen\r\n *\r\n *\r\n */\r\n\r\n\r\nclass GameWindow {\r\n\r\n    constructor({canvas, ctx, sprites, backgrounds, interactives, forces, update}) {\r\n\r\n        this.sprite_set = new Collection(sprites || [], 'Sprite');\r\n\r\n\r\n        this.background_set = new Collection(backgrounds || [], 'Sprite');\r\n\r\n        this.interactive_set = new Collection(interactives || [], 'Sprite');\r\n\r\n        this.force_set = new Collection(forces || [], 'Force');\r\n\r\n        this.actionstack_set = new Collection(forces || [], 'ActionStack');\r\n\r\n        this.canvas = canvas;\r\n\r\n        this.ctx = ctx;\r\n\r\n\r\n        Quazar.canvas = canvas;\r\n\r\n        Quazar.ctx = ctx;\r\n\r\n        this.camera = new Vector3(0, 0, 0);\r\n\r\n        this.spriteOptions = this.uniques(this.sprite_set.list);\r\n\r\n\r\n        this.extraUpdate = update || function () {\r\n            };\r\n\r\n\r\n        Quazar.__gameWindow = this;\r\n\r\n\r\n    }\r\n\r\n\r\n    uniques(list)\r\n    {\r\n\r\n        var listout = [];\r\n\r\n        $.each(list, function(ix, item){\r\n\r\n            if(!listout.indexOf(item.id) >= 0)\r\n            {\r\n\r\n                var str = item.name;\r\n\r\n                listout.push({\"sprite\":item});\r\n\r\n            }\r\n\r\n\r\n        });\r\n\r\n\r\n        return listout;\r\n\r\n    }\r\n\r\n\r\n\r\n    extraUpdate()\r\n    {\r\n\r\n    }\r\n\r\n\r\n    setPlayer(player)\r\n    {\r\n\r\n        this.player = player;\r\n\r\n        if(!this.sprite_set.list.indexOf(player) >= 0)\r\n        {\r\n            this.sprite_set.list.push(player);\r\n\r\n        }\r\n\r\n    }\r\n\r\n\r\n    update()\r\n    {\r\n\r\n        Quazar.each(this.sprite_set.list, function (ix, item) {\r\n\r\n\r\n            if(typeof(item.update) == 'function')\r\n            {\r\n                item.update(item);\r\n\r\n            }\r\n\r\n            if(typeof(item.def_update) == 'function')\r\n            {\r\n              //  console.log('def_update');\r\n\r\n                item.def_update(item);\r\n\r\n            }\r\n\r\n\r\n\r\n        });\r\n\r\n\r\n    }\r\n    add(obj)\r\n    {\r\n        if(obj instanceof Sprite)\r\n        {\r\n\r\n\r\n        }\r\n\r\n\r\n    }\r\n\r\n    onUpdate(arg)\r\n    {\r\n        if(typeof(arg) == 'function')\r\n        {\r\n            let up = this.update;\r\n\r\n            this.update = function(sprites){ arg(sprites); up(sprites); }\r\n\r\n        }\r\n\r\n    }\r\n\r\n    draw() {\r\n\r\n        var _gw = this;\r\n\r\n        Quazar.each(this.sprite_set.list, function (ix, item) {\r\n\r\n\r\n            Canvas.draw(item, _gw.ctx);\r\n\r\n        });\r\n\r\n    }\r\n\r\n}\r\n;\r\n\r\n\r\n\r\n\r\n\r\nclass TextDisplay //show a text element\r\n{\r\n    constructor({font, size, text /*single text or array of text*/, color}) {\r\n\r\n\r\n    }\r\n\r\n    next() {\r\n\r\n    }\r\n\r\n    show() {\r\n\r\n    }\r\n}\r\n\r\nclass VideoDisplay //show a video sequence\r\n{\r\n    constructor({src, size}) {\r\n\r\n        this.domElement = undefined;\r\n\r\n        this.src = src || \"__NO-SRC!\";\r\n\r\n        this.size = new Vector3(size.x, size.y, size.z || 0);\r\n\r\n\r\n        Quazar.log('VideoDisplay():: TODO: create dom element');\r\n\r\n    }\r\n\r\n    play() {\r\n\r\n    }\r\n}\r\n\r\n\r\nlet Animation_Samples = [\r\n\r\n\r\n    function(){return  new Animation({\r\n        src: \"../assets/texture/2d/char/frogman1.png\",\r\n        duration: 1000, repeat: true,\r\n        parent: {},\r\n        frameSize: new Vector2(100, 120),\r\n        frameBounds: new VectorBounds(new Vector2(0, 0),\r\n            new Vector2(0, 0))\r\n    })}\r\n,\r\n\r\n    function(){return  new Animation({\r\n        src: \"../assets/texture/2d/char/frogman1.png\",\r\n        duration: 1000, repeat: true,\r\n        parent: {},\r\n        frameSize: new Vector2(100, 120),\r\n        frameBounds: new VectorBounds(new Vector2(0, 0),\r\n            new Vector2(0, 0))\r\n    })}\r\n\r\n];\r\n\r\n\r\nvar Sprite_Samples = [function() {\r\n\r\n    let frog = new Sprite('frog', 'a frog sprite');\r\n\r\n    frog.setAnimation(new Animation({\r\n        src: \"../assets/texture/2d/char/frogman1.png\",\r\n        duration: 1000, repeat: true,\r\n        parent: {},\r\n        frameSize: new Vector2(100, 120),\r\n        frameBounds: new VectorBounds(new Vector2(0, 0),\r\n            new Vector2(9, 0))\r\n    }));\r\n\r\n\r\nreturn frog;\r\n\r\n},\r\n\r\n\r\n    function(){\r\n\r\n        let barrel = new Sprite('barrel', 'a barrel, interactive sprite');\r\n\r\n        barrel.setAnimation(new Animation({\r\n            src: \"../assets/texture/2d/object/barrel1.png\",\r\n            duration: 1000, repeat: true,\r\n            parent: {},\r\n            frameSize: new Vector2(100, 100),\r\n            frameBounds: new VectorBounds(new Vector2(0, 0),\r\n                new Vector2(0, 0))\r\n        }));\r\n\r\n\r\n        return barrel;\r\n\r\n\r\n    }\r\n\r\n];\r\n\r\n\r\n__gameInstance.event_args_list = [];;/**\r\n * Created by The Blakes on 04-13-2017\r\n *\r\n */\r\n\r\n\r\n\r\nclass Animation {\r\n    constructor(args) {\r\n\r\n        args = args || {};\r\n\r\n        var _anime = this;\r\n\r\n        this.name = $Q.getArg(args, 'name', '_blank'),\r\n\r\n        this.description =  $Q.getArg(args, 'description', '_blank')\r\n\r\n        this.frames = $Q.getArg(args, 'frames', []);\r\n\r\n        this.image = new GameImage( $Q.getArg(args, 'src',  $Q.getArg(args, 'image', false)));\r\n\r\n\r\n        this.src = this.image.domElement.src;\r\n\r\n        this.domElement = this.image.domElement;\r\n\r\n        this.type = $Q.getArg(args, 'type', 'basic');\r\n\r\n        this.delay = $Q.getArg(args, 'delay', 0);\r\n\r\n        this.cix = 0;\r\n\r\n        this.frameSize = this.getArg(args, 'frameSize', new Vector3(0, 0, 0));\r\n\r\n        this.frameBounds = this.getArg(args, 'frameBounds', new VectorFrameBounds(new Vector3(0, 0, 0), new Vector3(0, 0, 0), new Vector3(0, 0, 0)));\r\n\r\n        this.frameOffset = this.getArg(args, 'frameOffset', new Vector3(0, 0, 0));\r\n\r\n\r\n        this.apply2DFrames(args.parent || {});\r\n\r\n        this.flipX = $Q.getArg(args, 'flipX', false);\r\n\r\n        this.priority = $Q.getArg(args, 'priority', 0);\r\n\r\n        this.cix = 0;\r\n\r\n        this.selected_frame = this.frames[0];\r\n\r\n        this.earlyTerm = this.getArg(args, 'earlyTerm', false);\r\n\r\n        this.hang =this.getArg(args, 'hang', false);\r\n\r\n        this.duration = this.getArg(args, 'duration', 1000);\r\n\r\n        this.size =  this.getArg(args, 'size', new Vector3(20, 20, 20));\r\n\r\n        this.effects = [];\r\n\r\n        this.timer = 0;\r\n\r\n        this.__gameLogic = false;\r\n\r\n        this.setType = function(){  };\r\n\r\n    }\r\n\r\n    singleFrame(frameSize, size)\r\n    {\r\n\r\n        this.__frametype = 'single';\r\n\r\n        this.frameSize = frameSize;\r\n\r\n        this.size = size;\r\n\r\n        this.selected_frame = {\r\n            image: this.image,\r\n            frameSize: this.frameSize,\r\n            framePos: {x: 0, y: 0}\r\n        };\r\n\r\n        this.frames[0] = this.selected_frame;\r\n\r\n\r\n    }\r\n\r\n    getArg(args, key, fallback) {\r\n\r\n        if (args.hasOwnProperty(key)) {\r\n\r\n            return args[key];\r\n\r\n        }\r\n        else {\r\n            return fallback;\r\n\r\n        }\r\n\r\n    }\r\n\r\n    apply2DFrames() {\r\n\r\n        this.frames = [];\r\n\r\n        var fcount = 0;\r\n\r\n\r\n        var quitLoop = false;\r\n\r\n        for (let y = this.frameBounds.min.y; y <= this.frameBounds.max.y; y++) {\r\n\r\n            for (let x = this.frameBounds.min.x; x <= this.frameBounds.max.x; x++) {\r\n\r\n                let framePos = {x: x * this.frameSize.x + this.frameOffset.x, y: y * this.frameSize.y + this.frameOffset.y};\r\n\r\n                this.frames.push({image: this.image, frameSize: this.frameSize, framePos: framePos});\r\n\r\n                if( x >= this.frameBounds.termPoint.x && y >= this.frameBounds.termPoint.y)\r\n                {\r\n\r\n                    quitLoop = true;\r\n\r\n                    break;\r\n                }\r\n\r\n                fcount += 1;\r\n\r\n                if(quitLoop)\r\n                    break;\r\n\r\n            }\r\n\r\n        }\r\n\r\n        this.frames[0] = !this.frames[0] ? {\r\n                image: this.image,\r\n                frameSize: this.frameSize,\r\n                framePos: {x: this.frameBounds.min.x, y: this.frameBounds.min.y}\r\n            } : this.frames[0];\r\n\r\n       // this.selected_frame = this.frames[this.cix % this.frames.length] || this.frames[0];\r\n\r\n    }\r\n\r\n    resetFrames() //special reset function:: frames are re-rendered each reset()\r\n    {\r\n\r\n        this.apply2DFrames();\r\n\r\n    }\r\n\r\n    update() {\r\n\r\n        this.selected_frame = this.frames[Math.round(this.cix) % this.frames.length];\r\n\r\n\r\n    }\r\n\r\n    reset()\r\n{\r\n\r\n    this.resetFrames();\r\n\r\n    this.cix = 0;\r\n\r\n}\r\n\r\ncontinuous(duration)\r\n{\r\n\r\n    if(this.__frametype == 'single')\r\n    {\r\n        return 0;\r\n\r\n    }\r\n\r\n  this.apply2DFrames();\r\n\r\n    //update once:\r\n    this.update();\r\n\r\n\r\n    if(this.cix == 0)\r\n  {\r\n\r\n      this.engage();\r\n\r\n  }\r\n\r\n\r\n}\r\n\r\nengage(duration, complete)\r\n{\r\n\r\n    if(this.__frametype == 'single')\r\n    {\r\n        return 0;\r\n\r\n    }\r\n\r\n\r\n    let __inst = this;\r\n\r\n    this.complete = complete || this.complete || function(){  };\r\n\r\n    var duration = duration || typeof(this.duration) == 'number' ? this.duration : this.frames.length * 20;\r\n\r\n    //we have a target\r\n  this.tween = new TWEEN.Tween(this)\r\n        .easing(__inst.curve || TWEEN.Easing.Linear.None)\r\n\r\n        .to({cix:__inst.frames.length - 1}, duration)\r\n        .onUpdate(function() {\r\n            //console.log(objects[0].position.x,objects[0].position.y);\r\n\r\n         //   __inst.cix = Math.ceil(__inst.cix);\r\n\r\n        __inst.update();\r\n\r\n        })\r\n        .onComplete(function() {\r\n            //console.log(objects[0].position.x, objects[0].position.y);\r\n\r\n            if(__inst.complete)\r\n            {\r\n\r\n                __inst.complete();\r\n\r\n            }\r\n\r\n            __inst.cix = 0;\r\n\r\n            __inst.isComplete = true;\r\n\r\n        });\r\n\r\n\r\n  this.tween.start();\r\n\r\n\r\n}\r\n\r\nonComplete(fun)\r\n{\r\n    this.complete = fun;\r\n\r\n}\r\n\r\n    animate() {\r\n\r\n        this.apply2DFrames();\r\n\r\n        this.timer += 1;\r\n\r\n        Quazar.log('ANIMATING with frame count:' + this.frames.length);\r\n\r\n        if(this.timer % this.delay == 0) {\r\n\r\n            if(this.hang)\r\n            {\r\n                this.cix = this.cix + 1;\r\n\r\n                if(this.cix > this.frames.length - 1)\r\n                {\r\n                    this.cix =  this.frames.length - 1;\r\n\r\n                }\r\n\r\n            }\r\n            else\r\n            {\r\n\r\n                this.cix = this.cix >= this.frames.length - 1 ? this.frameBounds.min.x : this.cix + 1;\r\n            }\r\n\r\n            this.update();\r\n\r\n        }\r\n\r\n    }\r\n\r\n};\r\n;/**\r\n * Created by The Blakes on 04-13-2017\r\n *\r\n */\r\n\r\n\r\nclass Callables {\r\n    constructor(args) {\r\n\r\n        this.list = [];\r\n\r\n        if(args instanceof Array)\r\n        {\r\n            this.list = args;\r\n\r\n        }\r\n        else\r\n        {\r\n            this.list = this.getArg(args, 'list', []);\r\n\r\n        }\r\n\r\n    }\r\n\r\n    getArg(args, key, fallback) {\r\n\r\n        if (args.hasOwnProperty(key)) {\r\n\r\n            return args[key];\r\n\r\n        }\r\n        else {\r\n            return fallback;\r\n\r\n        }\r\n\r\n    }\r\n\r\n    add(item)\r\n    {\r\n\r\n        if(typeof(item.engage) == 'function')\r\n        {\r\n           this.list.push(item);\r\n\r\n        }\r\n\r\n       else if(typeof(item.fire) == 'function')\r\n        {\r\n            this.list.push(item);\r\n\r\n        }\r\n\r\n       else if(typeof(item.start) == 'function')\r\n        {\r\n            this.list.push(item);\r\n\r\n        }\r\n\r\n       else if(typeof(item.run) == 'function')\r\n        {\r\n            this.list.push(item);\r\n\r\n        }\r\n\r\n       else if(typeof(item.process) == 'function')\r\n        {\r\n            this.list.push(item);\r\n\r\n        }\r\n\r\n\r\n    }\r\n\r\n    call()\r\n    {\r\n        $.each(this.list, function (ix, item) {\r\n\r\n\r\n            if(typeof(item.engage) == 'function')\r\n            {\r\n                item.engage();\r\n\r\n            }\r\n\r\n            if(typeof(item.fire) == 'function')\r\n            {\r\n                item.fire();\r\n\r\n            }\r\n\r\n            if(typeof(item.start) == 'function')\r\n            {\r\n                item.start();\r\n\r\n            }\r\n\r\n            if(typeof(item.run) == 'function')\r\n            {\r\n                item.run();\r\n\r\n            }\r\n\r\n            if(typeof(item.process) == 'function')\r\n            {\r\n                item.process();\r\n\r\n            }\r\n\r\n        });\r\n\r\n    }\r\n\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n;/**\r\n * Created by The Blakes on 04-13-2017\r\n *\r\n * Camera : has simple x, y, z, position / Vector, follows a specific sprite\r\n *\r\n * *incomplete as of 07-20-2017\r\n */\r\n\r\n\r\nclass Camera\r\n{\r\n\r\n    constructor(position)\r\n    {\r\n\r\n      this.position = Quazar.getArg(args, 'position', Quazar.getArg(args, 'pos', new Vector3(0, 0, 0) ) );\r\n\r\n    }\r\n\r\n    follow(object, accel, max, distSize)\r\n    {\r\n\r\n\r\n    }\r\n\r\n}\r\n\r\n\r\n\r\n;/**\r\n * Created by The Blakes on 04-13-2017\r\n *\r\n */\r\n\r\nclass Force\r\n{\r\n    constructor(args)\r\n    {\r\n\r\n        this.name = args.name || \"\";\r\n\r\n        this.description = args.description || \"\";\r\n\r\n        this.subjects = args.subjects || [];\r\n        this.origin =  args.origin || {};\r\n        this.massObjects = args.massObjects || [];\r\n\r\n        this.minSpeed = args.minSpeed || new Vector3(1, 1, 1);\r\n\r\n        this.max = args.max || new Vector3(3, 3, 3);\r\n         this.accel = args.accel || new Vector3(1.3, 1.3, 1.3);\r\n\r\n        for(var x in args)\r\n        {\r\n            this[x] = args[x];\r\n\r\n        }\r\n\r\n    }\r\n\r\n    getArg(args, key, fallback) {\r\n\r\n        if (args.hasOwnProperty(key)) {\r\n\r\n            return args[key];\r\n\r\n        }\r\n        else {\r\n            return fallback;\r\n\r\n        }\r\n\r\n    }\r\n\r\n\r\n    gravitateY()\r\n    {\r\n\r\n      var  subjects = this.subjects;\r\n\r\n       var origin =  this.origin || {};\r\n\r\n       var massObjects =  this.massObjects;\r\n\r\n      var  accel =  this.accel || {};\r\n\r\n        var max =  this.max || {};\r\n\r\n        $.each(subjects, function(ix, itemx){\r\n\r\n           itemx.velocityY(accel, max);\r\n\r\n            $.each(massObjects, function(iy, itemy){\r\n\r\n                itemx.collide(itemy);\r\n            });\r\n        });\r\n    }\r\n};\r\n\r\n\r\n\r\n\r\n\r\n\r\n;/**\r\n * Created by The Blakes on 7/27/2017.\r\n */\r\n\r\n\r\n\r\nclass StatEffect{\r\n\r\n    constructor(name, value, onEffect) {\r\n\r\n        this.__is = \"a game logic effect\";\r\n\r\n        this.name =name;\r\n\r\n        this.value = value;\r\n\r\n        this.onEffect = onEffect || function(){};\r\n\r\n\r\n    }\r\n\r\n    limit(numberTimes, withinDuration)\r\n    {\r\n\r\n\r\n    }\r\n\r\n    process(object)\r\n    {\r\n        //if the object has any property by effect.name, the property is incremenented by effect value\r\n        //a health decrease is triggered by Effect('health', -10);\r\n\r\n\r\n        for(var x in object)\r\n        {\r\n            if(x.toLowerCase() == this.name.toLowerCase() && typeof(value) == typeof(object[x]))\r\n            {\r\n\r\n                object[x] += this.value;\r\n\r\n            }\r\n\r\n        }\r\n\r\n    }\r\n\r\n    onEffect()\r\n    {\r\n\r\n\r\n\r\n    }\r\n\r\n};\r\n\r\n\r\nclass GameEffect {\r\n\r\n    constructor(args) {\r\n\r\n        var myChance = this.chance(args.chance || 1.0); //the chance the effect will happen\r\n\r\n        this.trigger = args.trigger || 'always' || 'collide';\r\n\r\n        this.parent = args.parent || false;\r\n\r\n        if(!this.parent)\r\n        {\r\n            console.error('GameEffect Must have valid parent sprite');\r\n\r\n        }\r\n\r\n        this.objects = args.objects || [];\r\n\r\n        for(var x in args)\r\n        {\r\n\r\n            if(x instanceof Animation)\r\n            {\r\n\r\n                //trigger the Animation\r\n\r\n            }\r\n\r\n            if(x instanceof StatEffect)\r\n            {\r\n\r\n                //trigger the StatEffect\r\n\r\n\r\n            }\r\n\r\n\r\n        }\r\n\r\n    }\r\n\r\n    chance(floatPrecision) {\r\n\r\n\r\n\r\n    }\r\n    collide(object, collidables) {\r\n\r\n\r\n    }\r\n\r\n}\r\n\r\n\r\nclass GameLogic {\r\n\r\n    constructor(gameEffectList)\r\n    {\r\n        if(!gameEffectList instanceof Array)\r\n        {\r\n\r\n            console.info('GameLogic: gameEffectList was not an array');\r\n\r\n            gameEffectList = [];\r\n\r\n        }\r\n\r\n       this.gameEffects = gameEffectList;\r\n\r\n\r\n    }\r\n\r\n    process_all()\r\n    {\r\n\r\n\r\n        //process all game logic objects::\r\n\r\n\r\n\r\n\r\n    }\r\n\r\n    add(effect)\r\n    {\r\n\r\n        this.gameEffects.push(effect);\r\n\r\n    }\r\n\r\n}\r\n;\r\nlet Game = __gameInstance || {};\r\n\r\nclass GamepadAdapter {\r\n\r\n    constructor() {\r\n\r\n\r\n        this.__gamepads = [];\r\n\r\n\r\n        this.intervals = [];\r\n\r\n        let controller_stack = this;\r\n\r\n        let _gpinst = this;\r\n\r\n        window.setInterval(function () {\r\n\r\n            var gps = navigator.getGamepads();\r\n\r\n            _gpinst.gps = gps;\r\n\r\n\r\n\r\n            for(var x = 0; x < gps.length; x++) {\r\n\r\n                var events = _gpinst.__gamepads[x] ? _gpinst.__gamepads[x] : {};\r\n\r\n             _gpinst.process(gps[x], events);\r\n\r\n            }\r\n\r\n\r\n        }, 20);\r\n\r\n\r\n\r\n    }\r\n\r\n    gamepads()\r\n    {\r\n\r\n        return  navigator.getGamepads();\r\n\r\n    }\r\n\r\n\r\n    disconnect_all() {\r\n\r\n        for (var x = 0; x < this.intervals.length; x++) {\r\n\r\n            window.clearInterval(this.intervals[x]);\r\n\r\n        }\r\n\r\n    }\r\n\r\n\r\n    disconnect_by_index(game_pad_index) {\r\n\r\n        window.clearInterval(this.intervals[game_pad_index]);\r\n\r\n    }\r\n\r\n    hasAnyPad() {\r\n        return \"getGamepads\" in navigator;\r\n\r\n    }\r\n\r\n    Event(key, game_pad, callback) {\r\n        return {\r\n\r\n            key: key, game_pad:game_pad, callback: callback\r\n\r\n\r\n        }\r\n\r\n    }\r\n\r\n    GamepadEvents(args)\r\n    {\r\n\r\n        var gp = {};\r\n\r\n        gp.stick_left = args.stick_left || function(x, y)\r\n        {\r\n\r\n          //  console.log('Def call');\r\n\r\n        }\r\n\r\n\r\n        gp.stick_right = args.stick_right ||  function(x, y)\r\n        {\r\n\r\n        }\r\n\r\n        gp.buttons = [];\r\n\r\n        if(args.buttons)\r\n        {\r\n           gp.buttons = args.buttons;\r\n\r\n        }\r\n\r\n\r\n\r\n        gp.on = function(key, callback)\r\n        {\r\n\r\n\r\n\r\n            if(this[key] && key !== \"on\")\r\n            {\r\n\r\n                this[key] = callback;\r\n\r\n\r\n            }\r\n\r\n            else if(key.indexOf('button') >= 0 && key.indexOf('_') >= 0 )\r\n            {\r\n                var parts = key.split('_');\r\n\r\n                var number;\r\n\r\n                try\r\n                {\r\n\r\n                    number = parseInt(parts[1]);\r\n\r\n                    gp['buttons'][number] = callback;\r\n\r\n                }\r\n                catch (e)\r\n                    {\r\n                      console.error('could not parse \"on\" event with ' + key);\r\n\r\n                    }\r\n\r\n            }\r\n\r\n\r\n        }\r\n\r\n        this.__gamepads.push(gp);\r\n\r\n        return gp;\r\n\r\n    }\r\n\r\n\r\n\r\n    process(gp, gpEvents)\r\n    {\r\n\r\n        this.process_buttons(gp, gpEvents);\r\n\r\n        this.process_axes(gp, gpEvents);\r\n\r\n    }\r\n\r\n\r\n    process_axes(gp, events)\r\n    {\r\n\r\n        if(!gp || !gp['axes'])\r\n        {\r\n\r\n            return false;\r\n\r\n        }\r\n\r\n\r\n        for (var i = 0; i < gp.axes.length; i += 2) {\r\n            var axis1 = gp.axes[i], axia2 = gp.axes[i + 1];\r\n\r\n            var ix = (Math.ceil(i / 2) + 1), x = gp.axes[i], y = gp.axes[i + 1];\r\n\r\n\r\n\r\n            if(ix == 1 && events.stick_left)\r\n            {\r\n                events.stick_left(x, y);\r\n\r\n            }\r\n\r\n            if(ix == 2 && events.stick_right)\r\n            {\r\n                events.stick_right(x, y);\r\n\r\n            }\r\n\r\n            if (this.events && this.events['stick_' + i] && typeof(this.events['stick_' + i].callback) == 'function') {\r\n                this.events['stick_' + i].callback();\r\n\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n\r\n    process_buttons(gp, events) {\r\n\r\n        if(!gp || !gp['buttons'])\r\n        {\r\n             return false;\r\n\r\n        }\r\n\r\n        for (var i = 0; i < gp.buttons.length; i++) {\r\n\r\n            if (gp.buttons[i].pressed) {\r\n\r\n               // console.log('button:' + i);\r\n\r\n            if(typeof(events.buttons[i]) == 'function')\r\n            {\r\n                 events.buttons[i](gp.buttons[i].pressed);\r\n            }\r\n            else if(typeof( events.buttons[i]) =='object' && typeof(events.buttons[i].update) == 'function')\r\n            {\r\n                events.buttons[i].update(events.buttons[i].pressed);\r\n\r\n            }\r\n\r\n\r\n                var clearance_1 = this.events && this.events[i], gpc, bkey = \"button_\" + i;\r\n\r\n                if (clearance_1) {\r\n                    gpc = this.events[bkey] && !isNaN(this.events[bkey].game_pad) ? this.gamepads[this.events[bkey].game_pad] : this.events[bkey].game_pad;\r\n                }\r\n                ;\r\n\r\n                if (clearance_1 && gpc && typeof(this.events[bkey].callback) == 'function') {\r\n                    //call the callback\r\n                    this.events[i].callback();\r\n\r\n                }\r\n\r\n            }\r\n\r\n\r\n        }\r\n\r\n\r\n\r\n    }\r\n\r\n\r\n    on(key, gpix, callback) {\r\n\r\n        if(typeof(this[key]) == 'function')\r\n        {\r\n\r\n\r\n        }\r\n\r\n        this.events.push(this.Event(key, gpix, callback))\r\n\r\n    }\r\n\r\n\r\n};\r\n\r\n\r\n\r\n\r\nif(!__gameInstance.GamepadAdapter)\r\n{\r\n    __gameInstance.GamepadAdapter = new GamepadAdapter();\r\n\r\n    __gameInstance.gamepads = [];\r\n\r\n\r\n   let gamepad = __gameInstance.GamepadAdapter.GamepadEvents({\r\n\r\n       stick_left:function()\r\n       {\r\n          // console.log('Left Stick callback');\r\n\r\n       }\r\n\r\n\r\n   });\r\n\r\n    __gameInstance.gamepads.push(gamepad);\r\n\r\n};\r\n\r\n\r\n\r\n;/**\r\n * Created by The Blakes on 04-13-2017\r\n *\r\n */\r\n\r\nclass Motion {\r\n    constructor(args) {\r\n\r\n        this.distance = this.getArg(args, 'distance', this.getArg(args, 'distances', false));\r\n\r\n        this.curvesList = this.curvesObject();\r\n\r\n        this.parent_id = args.parent_id || \"__blank\";\r\n\r\n        this.curve = this.getArg(args, 'curve', TWEEN.Easing.Quadratic.InOut);\r\n\r\n        this.targetRotation = this.getArg(args, 'targetRotation', 0);\r\n\r\n        this.name = this.getArg(args, 'name', \"__\");\r\n\r\n        this.description = this.getArg(args, 'description', false);\r\n\r\n        this.curveString = this.getCurveString();\r\n\r\n        this.setCurve(this.curveString);\r\n\r\n        this.line = this.getArg(args, 'line', false);\r\n\r\n        this.duration = this.getArg(args, 'duration', 500);\r\n\r\n        this.delay = this.getArg(args, 'delay', 0);\r\n\r\n        this.duration = this.getArg(args, 'duration', false);\r\n\r\n\r\n    }\r\n\r\n    getArg(args, key, fallback) {\r\n\r\n        if (args.hasOwnProperty(key)) {\r\n\r\n            return args[key];\r\n\r\n        }\r\n        else {\r\n            return fallback;\r\n\r\n        }\r\n\r\n    }\r\n\r\n    curvesObject() {\r\n\r\n        var c = [];\r\n\r\n        Quazar.each(TWEEN.Easing, function (ix, easing) {\r\n\r\n            Quazar.each(easing, function (iy, easeType) {\r\n\r\n                if (['in', 'out', 'inout'].indexOf(iy.toLowerCase()) >= 0) {\r\n\r\n                    c.push(ix + \"_\" + iy);\r\n\r\n                }\r\n\r\n            });\r\n\r\n        });\r\n\r\n        return c;\r\n\r\n    }\r\n\r\n\r\n    getCurveString() {\r\n\r\n        var __inst = this;\r\n\r\n        var c;\r\n\r\n        $.each(TWEEN.Easing, function (ix, easing) {\r\n\r\n            $.each(TWEEN.Easing[ix], function (iy, easeType) {\r\n\r\n\r\n                if (__inst.curve == TWEEN.Easing[ix][iy]) {\r\n\r\n                    c = ix + \"_\" + iy;\r\n\r\n                }\r\n\r\n            });\r\n\r\n        });\r\n\r\n\r\n        return c;\r\n\r\n    }\r\n\r\n\r\n    setCurve(c) {\r\n\r\n        var cps = c.split('_');\r\n\r\n        var s1 = cps[0], s2 = cps[1];\r\n\r\n\r\n        var curve = TWEEN.Easing.Quadratic.InOut;\r\n\r\n\r\n        $.each(TWEEN.Easing, function (ix, easing) {\r\n\r\n            $.each(TWEEN.Easing[ix], function (iy, easeType) {\r\n\r\n\r\n                if (ix == s1 && iy == s2) {\r\n\r\n                    // alert('setting curve');\r\n\r\n                    curve = TWEEN.Easing[ix][iy];\r\n\r\n                }\r\n\r\n            });\r\n\r\n        });\r\n\r\n        this.curve = curve;\r\n\r\n\r\n        return curve;\r\n\r\n    }\r\n\r\n    engage() {\r\n\r\n        var tweens = [];\r\n\r\n        //construct a tween::\r\n\r\n        var __inst = this;\r\n\r\n\r\n        var objects = {};\r\n\r\n        $.each(Game.sprites, function (ix, item) {\r\n\r\n            if (item.id == __inst.parent_id) {\r\n\r\n                objects[ix] = item;\r\n\r\n            }\r\n        });\r\n\r\n\r\n        var target = {\r\n\r\n            x: __inst.distance.x + objects[0].position.x,\r\n            y: __inst.distance.y + objects[0].position.y,\r\n            z: __inst.distance.z + objects[0].position.z\r\n\r\n        };\r\n\r\n        if (__inst.targetRotation > 0 || __inst.targetRotation < 0) {\r\n\r\n\r\n            var targetR = __inst.targetRotation + objects[0].rotation.x;\r\n\r\n            //we have a target\r\n            tweens[0] = new TWEEN.Tween(objects[0].rotation)\r\n                .easing(__inst.curve || TWEEN.Easing.Elastic.InOut)\r\n\r\n                .to({x: targetR}, __inst.duration)\r\n                .onUpdate(function () {\r\n                    //console.log(objects[0].position.x,objects[0].position.y);\r\n\r\n\r\n                })\r\n                .onComplete(function () {\r\n                    //console.log(objects[0].position.x, objects[0].position.y);\r\n                    if (__inst.complete) {\r\n\r\n                        __inst.complete();\r\n\r\n                    }\r\n\r\n\r\n                });\r\n\r\n\r\n        }\r\n\r\n        //we have a target\r\n        tweens.push(new TWEEN.Tween(objects[0].position)\r\n            .easing(__inst.curve || TWEEN.Easing.Elastic.InOut)\r\n\r\n            .to(target, __inst.duration)\r\n            .onUpdate(function () {\r\n                //console.log(objects[0].position.x,objects[0].position.y);\r\n\r\n\r\n            })\r\n            .onComplete(function () {\r\n                //console.log(objects[0].position.x, objects[0].position.y);\r\n\r\n                if (__inst.complete) {\r\n\r\n                    __inst.complete();\r\n\r\n                }\r\n\r\n\r\n            }));\r\n\r\n\r\n        __inst.delay = !isNaN(__inst.delay) && __inst.delay > 0 ? __inst.delay : 0;\r\n\r\n\r\n        return {\r\n\r\n            tweens: tweens,\r\n\r\n            delay: __inst.delay,\r\n\r\n            fire: function () {\r\n\r\n                var __tweenObject = this;\r\n\r\n                window.setTimeout(function () {\r\n\r\n                    for (var x = 0; x < __tweenObject.tweens.length; x++) {\r\n\r\n                        __tweenObject.tweens[x].start();\r\n\r\n                    }\r\n\r\n                }, this.delay);\r\n\r\n            }\r\n\r\n        }\r\n\r\n    }\r\n\r\n    start() {\r\n        this.engage().fire();\r\n\r\n    }\r\n\r\n\r\n    onComplete(fun) {\r\n        this.complete = fun;\r\n\r\n    }\r\n\r\n    // obj.getGraphCanvas( $(c.domElement), value.replace('_', '.'), TWEEN.Easing[parts[0]][parts[1]] );\r\n\r\n    getGraphCanvas( t, f, c) {\r\n\r\n        var canvas = document.createElement('canvas');\r\n\r\n        canvas.id = 'curve-display';\r\n\r\n        canvas.width = 180;\r\n        canvas.height = 100;\r\n\r\n\r\n        var context = canvas.getContext('2d');\r\n        context.fillStyle = \"rgb(250,250,250)\";\r\n        context.fillRect(0, 0, 180, 100);\r\n\r\n        context.lineWidth = 0.5;\r\n        context.strokeStyle = \"rgb(230,230,230)\";\r\n\r\n        context.beginPath();\r\n        context.moveTo(0, 20);\r\n        context.lineTo(180, 20);\r\n        context.moveTo(0, 80);\r\n        context.lineTo(180, 80);\r\n        context.closePath();\r\n        context.stroke();\r\n\r\n        context.lineWidth = 2;\r\n        context.strokeStyle = \"rgb(255,127,127)\";\r\n\r\n        var position = {x: 5, y: 80};\r\n        var position_old = {x: 5, y: 80};\r\n\r\n        new TWEEN.Tween(position).to({x: 175}, 2000).easing(TWEEN.Easing.Linear.None).start();\r\n        new TWEEN.Tween(position).to({y: 20}, 2000).easing(f).onUpdate(function () {\r\n\r\n            context.beginPath();\r\n            context.moveTo(position_old.x, position_old.y);\r\n            context.lineTo(position.x, position.y);\r\n            context.closePath();\r\n            context.stroke();\r\n\r\n            position_old.x = position.x;\r\n            position_old.y = position.y;\r\n\r\n        }).start();\r\n\r\n        return canvas;\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n;\r\nclass Sprite {\r\n    constructor(name, description, args) {\r\n\r\n        this.name = name || \"__\";\r\n\r\n        this.description = description || \"__\";\r\n\r\n        this.active = true;\r\n\r\n        if(typeof(name) == 'object')\r\n        {\r\n            args = name;\r\n        }\r\n\r\n        var _spr = this;\r\n\r\n        Quazar.each(args, function (ix, item) {\r\n\r\n            if (ix !== 'parent') {\r\n                _spr[ix] = item;\r\n            }\r\n\r\n\r\n        });\r\n\r\n        this.type = $Q.getArg(args, 'type', 'basic');\r\n\r\n        this.animations = $Q.getArg(args, 'animations', []);\r\n\r\n        this.motions = $Q.getArg(args, 'motions', []);\r\n\r\n        let __inst = this;\r\n\r\n\r\n        this.id = $Q.getArg(args, 'id',  this.setid());\r\n\r\n        this.sounds = $Q.getArg(args, 'sounds', []);\r\n\r\n        this.image = $Q.getArg(args, 'image', new GameImage($Q.getArg(args, 'src', false)));\r\n\r\n        this.size = $Q.getArg(args, 'size', new Vector2(100, 100));\r\n\r\n        this.position = $Q.getArg(args, 'position', new Vector3(0, 0, 0));\r\n\r\n\r\n\r\n        this.collision_bounds = $Q.getArg(args, 'collision_bounds', new VectorBounds(new Vector3(0, 0, 0), new Vector3(0, 0, 0)));\r\n\r\n        this.rotation = $Q.getArg(args, 'rotation', new Vector3(0, 0, 0));\r\n\r\n        this.selected_animation = {};\r\n\r\n        this.selected_motionstack = {};\r\n\r\n        this.selected_physics = {};\r\n\r\n        this.onGround = false;\r\n\r\n        this.clasticTo = []; //an array of sprite types\r\n\r\n\r\n        this.damagedBy = []; //an array of animation types\r\n\r\n\r\n        this.speed =  $Q.getArg(args, 'speed', new Vector3(0, 0, 0)); //store constant speed value\r\n\r\n        this.accel =  $Q.getArg(args, 'accel', new Vector3(0, 0, 0)); //store constant accel value\r\n\r\n\r\n        this.rot_speed =  $Q.getArg(args, 'rot_speed', new Vector3(0, 0, 0));\r\n\r\n        this.rot_accel =  $Q.getArg(args, 'rot_accel', new Vector3(0, 0, 0));\r\n\r\n        this.actionlists =  $Q.getArg(args, 'actionlists', []);\r\n\r\n\r\n\r\n        $.each(this.sounds , function(ix, item){\r\n\r\n            __inst.sounds[ix] = new Sound(item);\r\n\r\n        });\r\n\r\n\r\n        $.each(this.motions, function(ix, item){\r\n\r\n            __inst.motions[ix] = new Motion(item);\r\n\r\n        });\r\n\r\n\r\n        $.each(this.animations, function(ix, item){\r\n\r\n            __inst.animations[ix] = new Animation(item);\r\n\r\n        });\r\n\r\n    }\r\n\r\n    setid()\r\n     {\r\n         return new Date().getUTCMilliseconds();\r\n\r\n     }\r\n\r\n     get_id()\r\n     {\r\n\r\n         return this.id;\r\n     }\r\n\r\n    onScreen(w, h) {\r\n        return this.position.x + this.size.x >= 0 && this.position.x < w\r\n            && this.position.y + this.size.y >= 0 && this.position.y < h;\r\n\r\n    }\r\n\r\n    type_options()\r\n    {\r\n\r\n        return[\r\n\r\n            'player',\r\n            'enemy',\r\n            'powerup',\r\n            'attachment',\r\n            'projectile'\r\n\r\n        ]\r\n\r\n    }\r\n\r\n    update() {}\r\n\r\n    def_update() {\r\n\r\n        for(var x in this.speed)\r\n        {\r\n\r\n            if(this.speed[x] > 0 || this.speed[x] < 0)\r\n            {\r\n\r\n                this.position[x] += this.speed[x];\r\n\r\n            }\r\n\r\n        }\r\n\r\n        for(var x in this.accel)\r\n        {\r\n\r\n            if(this.accel[x] > 0 || this.accel[x] < 0)\r\n            {\r\n\r\n                this.speed[x] += this.accel[x];\r\n\r\n            }\r\n\r\n        }\r\n\r\n        for(var x in this.rot_speed)\r\n        {\r\n\r\n            if(this.rot_speed[x] > 0 || this.rot_speed[x] < 0)\r\n            {\r\n\r\n                this.rotation[x] += this.rot_speed[x];\r\n\r\n            }\r\n\r\n\r\n        }\r\n\r\n        for(var x in this.rot_accel)\r\n        {\r\n\r\n\r\n            if(this.rot_accel[x] > 0 || this.rot_accel[x] < 0)\r\n            {\r\n\r\n                this.rot_speed[x] += this.rot_accel[x];\r\n\r\n            }\r\n        }\r\n    }\r\n\r\n    collidesRectangular(sprite)\r\n    {\r\n\r\n        return Quazar.Collision.spriteRectanglesCollide(sprite);\r\n\r\n    }\r\n\r\n    shoot(options) {\r\n        //character shoots an animation\r\n\r\n\r\n        this.prep_key = 'shoot';\r\n\r\n\r\n        let spread = options.spread || options.angleSpread || false;\r\n\r\n        let total = options.total || options.totalBullets || options.numberBullets || false;\r\n\r\n        let animation = options.bullet || options.animation || false;\r\n\r\n        let duration = options.duration || options.screenDuration || false;\r\n\r\n        let speed = options.speed || false;\r\n\r\n        if (__gameInstance.isAtPlay) {\r\n\r\n\r\n        }\r\n        else {\r\n\r\n            this.event_arg(this.prep_key, '_', options);\r\n\r\n        }\r\n\r\n\r\n        return this;\r\n\r\n\r\n    }\r\n\r\n    allow(options)\r\n    {\r\n        this.prep_key = 'animate';\r\n\r\n\r\n        this.event_arg(this.prep_key, '_', options);\r\n\r\n\r\n    }\r\n\r\n    animate(animation) {\r\n\r\n        alert('calling animation');\r\n\r\n\r\n\r\n        if (__gameInstance.isAtPlay) {\r\n\r\n            this.setAnimation(animation);\r\n\r\n            return this;\r\n\r\n        }\r\n        else {\r\n            var evt = __gameInstance.event_args_list[__gameInstance.event_args_list.length - 1];\r\n\r\n            evt.animation = animation;\r\n\r\n            return this;\r\n\r\n        }\r\n\r\n        return this;\r\n\r\n    }\r\n\r\n    velocityY(accel, max) {\r\n\r\n        this.assertSpeed();\r\n\r\n        if(this.speed.y < max.y)\r\n        {\r\n            this.speed.y += accel;\r\n\r\n        }\r\n\r\n        this.position.y += this.speed.y;\r\n\r\n\r\n\r\n    }\r\n\r\n    collide(item)\r\n    {\r\n\r\n        var max_y = item.max ? item.max.y : item.position.y;\r\n\r\n        if(this.position.y + this.size.y >= max_y)\r\n        {\r\n\r\n            this.position.y = max_y - this.size.y;\r\n\r\n        }\r\n\r\n    }\r\n\r\n\r\n\r\n    assertSpeed() {\r\n        if (!this.speed) {\r\n\r\n            this.speed = new Vector3(0, 0, 0);\r\n\r\n        }\r\n\r\n    }\r\n\r\n    swing()\r\n    {\r\n\r\n\r\n    }\r\n\r\n\r\n    accel(options) {\r\n\r\n        this.prep_key = 'accel';\r\n\r\n        //targeting position\r\n\r\n        if (__gameInstance.isAtPlay) {\r\n\r\n            this.assertSpeed();\r\n\r\n            if(options.hasOwnProperty('switch') && this[options.switch] !== true)\r\n            {\r\n                return false;\r\n\r\n            }\r\n            else\r\n            {\r\n\r\n              //  this[options.switch] = false;\r\n\r\n            }\r\n\r\n            if(options.extras && options.speed !== 0)\r\n            {\r\n\r\n                for(var x in options.extras)\r\n                {\r\n                    this[x] = options.extras[x];\r\n\r\n                }\r\n            }\r\n\r\n            if(this.speed[options.key] < options.speed)\r\n            {\r\n\r\n                this.speed[options.key] += options.accel;\r\n\r\n            }\r\n            else if(this.speed[options.key] > options.speed)\r\n            {\r\n\r\n                this.speed[options.key] -= options.accel;\r\n\r\n            }\r\n            else if(options.speed == 0)\r\n            {\r\n                this.speed[options.key] = 0;\r\n\r\n            }\r\n\r\n\r\n        }\r\n        else {\r\n\r\n\r\n            this.event_arg(this.prep_key, '_', options);\r\n\r\n        }\r\n\r\n        return this;\r\n\r\n    }\r\n\r\n    deccelX(rate) {\r\n        if (typeof(rate) == 'object') {\r\n\r\n            rate = rate.rate;\r\n\r\n        }\r\n\r\n        if (this.speed['x'] > rate) {\r\n            this.speed['x'] -= rate;\r\n\r\n        }\r\n        else if (this.speed['x'] < rate) {\r\n            this.speed['x'] += rate;\r\n\r\n        }\r\n        else\r\n        {\r\n\r\n            this.speed['x'] = 0;\r\n\r\n        }\r\n\r\n\r\n\r\n\r\n    }\r\n\r\n\r\n\r\n    setAnimation(anime) {\r\n\r\n        this.animations['default'] = anime;\r\n\r\n        this.selected_animation = anime;\r\n\r\n        Quazar.log('declared default animation');\r\n\r\n        return this;\r\n\r\n    }\r\n\r\n    defaultAnimation(anime) {\r\n\r\n        this.animations['default'] = anime;\r\n\r\n        Quazar.log('declared default animation');\r\n\r\n        return this;\r\n\r\n    }\r\n\r\n\r\n    fromFile(file_path)\r\n    {\r\n        var __inst = this;\r\n\r\n        $.getJSON(file_path, function(data){\r\n\r\n            __inst = new Sprite(data);\r\n\r\n        });\r\n\r\n    }\r\n\r\n}\r\n\r\n\r\n\r\nlet GameObjects = {\r\n\r\n  init:function(){\r\n\r\n      let BlockTile = new Sprite();\r\n\r\n\r\n\r\n\r\n      this.sprites = [];\r\n\r\n\r\n  }\r\n\r\n\r\n\r\n};\r\n\r\n\r\n\r\n;\r\n\r\n\r\nclass BlockSprite {\r\n\r\n    constructor(sprite) {\r\n\r\n        this.__subType = \"block\";\r\n\r\n\r\n        //todo: apply a sprite that collides on both sides\r\n\r\n    }\r\n\r\n}\r\n\r\n\r\n\r\n\r\nclass PowerContainer {\r\n\r\n    constructor(sprite) {\r\n\r\n        this.__subType = \"block\";\r\n\r\n\r\n        //todo: apply a sprite that collides on both sides\r\n\r\n    }\r\n\r\n    onStrike()\r\n    {\r\n\r\n    }\r\n\r\n\r\n\r\n}\r\n\r\n\r\n\r\nclass SideScrollerSprite {\r\n\r\n    constructor(sprite) {\r\n\r\n        this.__subType = \"block\";\r\n\r\n\r\n        //todo: apply a sprite that collides on both sides\r\n\r\n    }\r\n\r\n}\r\n\r\n\r\n"]}