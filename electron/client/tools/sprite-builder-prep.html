<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>HTML-CSS Test</title>


    <link rel="stylesheet" href="../assets/js/dat.gui.css">


    <script src="../assets/js/dat.gui.js"></script>

    <script src="../assets/js/Tween.js"></script>

    <script src="../dist/obj/Animation.js"></script>

    <script src="../dist/obj/Force.js"></script>
    <script src="../dist/obj/GameMedia.js"></script>

    <script src="../dist/Quazar.js"></script>

    <script src="../dist/obj/Sprite.js"></script>

    <script src="../dist/obj/GamepadAdapter.js"></script>

    <script src="../dist/script/Terrain.js"></script>

    <script src="../assets/js/dat.gui.interface.js"></script>

    <script src="../assets/js/jquery.js"></script>

    <script src="../assets/bootstrap/js/bootstrap.min.js"></script>

    <script src="../assets/js/jquery.fileDownload.js"></script>



    <link rel="stylesheet" href="../assets/js/dat.gui.css" />


    <style>
        body {
            color: #888888;
            font-family:Monospace;
            font-size:13px;
            background-color: #000;
            margin: 0px;
            overflow: hidden;

            padding:5px;
        }
        #info {
            position: absolute;
            top: 0px;
            width: 400px;
            left: calc(50% - 200px);
            text-align: center;
        }
        a {
            color: #00f;
        }
    </style>



    <style>
        
        /*
        
        #reqs: 
            1. object-interface
        
        */




        ul.controllable, ul.options
        {
            position:fixed;

            width:150px;

            z-index:990;

            top:0px;

            padding:7px;

            padding-left:25px;

            border:2px inset grey;

            margin:5px;


            cursor:pointer;

            background-color: rgba(0, 0, 0, 0.6);

            font:14px Arial, Sans-Serif;


        }

        form.selected_object_edit
        {
            position:absolute;

            width:243px;

            right:0px;

            margin-top:50px;

            min-height:80px;

            border:2px inset grey;

            margin-right:15px;

        }

        form.selected_object_edit label
        {
            padding:5px;

        }


        form.selected_object_edit input
        {

            padding:5px;

        }





        button.test
        {

            color:forestgreen;


        }

        .main
        {

            margin-top:150px;

        }



        .selected_object
        {

            left:200px;

        }

        .options
        {


            left:420px;

        }

        span.tree-open
        {

          display:inline-block;

            width:50px;

            height:50px;

            text-align:center;


            margin-left:-20px;


            border:none;

            color:gold;

            transform: rotate(90deg);


            -ms-transform-origin: 50% 50%; /* IE 9 */

            -webkit-transform-origin:  50% 50%; /* Chrome, Safari, Opera */

            transform-origin: 50% 50%;

        }

       span.open
        {


            -o transform: rotate(180deg);

            -ms transform: rotate(180deg);

            -webkit transform: rotate(180deg);

           transform: rotate(180deg);

        }




        img.ctrl
        {

            width:18px;

            height:18px;

            background-color:grey;


            border:1px solid grey;

            margin:-3px;

        }


        img.top-right
        {

            background-color:grey;


            border:1px solid grey;

            margin:-3px;

        }


        img.tree-add
        {

            background-color:grey;

            margin:3px;

            margin-left:-15px;

            margin-bottom:-3px;


        }

        img.ctrl:hover
        {



        }


        ul .controllable-image
        {

            width:100%;

            height:auto;

            padding:5px;

        }

        ul input[type="checkbox"]
        {

            clear:both;

            position:relative;

            float:right;


        }



        li.array_member
        {

            text-align:left;



        }


        ul>li>ul {


        }

        ul>li {

            list-style-type:none;

            display:block;

            padding:3px;

            padding-right:25px;

        }

        ul ul
        {

           padding-left:10px;

        }




        span#floating-hint
        {
            position:fixed;

            z-index:999;

            top:0px;


            padding:4px;

            border-radius:5px;

            border:1px inset lightblue;

            color:#2a6496;

            background:silver;

            left:650px;

        }


    </style>


</head>
<body>


<img id="add_tween_stack_ctrl" class="main-add ctrl top-right"  style="position:absolute; right:15px;    width:35px; height:35px; background-image: url(&quot;img/add_icon.png&quot;);   background-position: center center; background-size: 100% auto;"></img>

<img id="add_tween_stack_ctrl" class="main-play ctrl top-right"  style="position:absolute; right:55px;    width:35px; height:35px; background-image: url(&quot;img/play.png&quot;);   background-position: center center; background-size: 100% auto;"></img>

<div id="container"></div>
<div id="info"></div>

<h1>Data Controller</h1>

<span id="floating-hint">A Floating Hint</span>

<p class="description">
    Allows control for a system of objects
</p>


<ul class="controllable selected_object"  >
    <span id="*" class="tree-open open" style="position:relative;  top:20px; left:0px; width:20px; height:20px; ">&psi;</span>
    <li>Selected Object</li>
</ul>





<ul class="options" >

</ul>

<script>


    /*************************************
     *
     * Object Controller:
     *
     *      -How does it work:
     *          1. call controller_init(main_object) , where main_object{} has collections within
     *          2. open up and explore the objects. Delete them, test them, etc
     *          3. Alter, or change the objects at runtime, using default_object_display()
     *          OR custom_object_display()
     *
     *
     * ********************************/




    var jstr = function(obj){

        return JSON.stringify(obj);

    };


    var Game = {

        GameWindow:{},

        canvas:{},

        ctx:{},

        collective_physics:{},

        sprites:[],

        is_init:false,


        size:function(x, y)
        {

            this.canvas.width =x;

            this.canvas.height = y;

        },

        update:function()
        {

            if(!this.is_init)
            {
                return 0;

            }

            console.log('Game Update');

            this.GameWindow.render();


        },


        render:function()
        {


            if(!this.is_init)
            {
                return 0;

            }

            this.size(400, 400);

            this.GameWindow.draw();

        },



        init:function()
        {

            document.getElementById('container').innerHTML += "<canvas></canvas>";

            // 1. demonstrate that the threejs canvas can be intercepted at runtime

            this.canvas = document.getElementsByTagName('CANVAS')[0];

            this.ctx = this.canvas.getContext('2d');


            this.forces = [];




            this.GameWindow = new GameWindow({canvas:this.canvas, ctx: this.ctx, sprites: this.sprites, forces: this.forces}, function(){

                console.log('Game Update passed');

            });


            //3. the player sprite


            this.player = new Sprite('Samus-Like Character', 'a video game sprite', {
                pos: new Vector2(200, 120),
                size: new Vector2(50, 52)
            });


            this.player.jump_anime = new Animation({
                src: "image/samus2.png",
                delay: 7,
                frameSize: new Vector3(50, 50, 0),
                frameBounds: new VectorBounds(new Vector3(0, 0, 0), new Vector3(4, 0, 0))
            });

            this.player.animations.push(this.player.jump_anime);

            this.player.selected_animation = this.player.jump_anime;


            // this.player.movement('jump', new Movement('../assets/sound/effect/ribbit.mp3'));

            var sound = new GameSound('../assets/sound/effect/ribbit.mp3');

            this.player.add(sound);




            this.player.update = function()
            {

                this.selected_animation.animate();


            }





            this.player.active = true;

            this.sprites.push(this.player);


            this.canvas.width = 1260;

            this.canvas.height = 720;

            this.is_init = true;


        }

    };


    /******************
     *
     * App:
     *
     *   renderObjectControllable:()
     *          @devplans / todo : 1st make the functionality work, then incorporate runtime settings for controllable
     *
     *
     *
     * **********************/




    var App = {

        locked:false,


        lock_events:function()
        {
          this.locked = true;

          var _a = this;

          window.setTimeout(function(){

              _a.locked = false;

          }, 100);

        },

        hint:function(element, hintText)
        {

            var hint = $('#floating-hint');

            var enter = function(evt)
        {

            $(hint).css('left', evt.clientX + 150);

            $(hint).css('top', evt.clientY - 15);

            $(hint).text(hintText);

            $(hint).show('fast');

        },
            out = function()
            {

                $(hint).hide('fast');
            };


            $(element).hover(enter, out);

        },

        getArg:function(args, key, fallback)
        {
            return args[key] || fallback;

        },

        applyControl:function(args)
        {

            console.log('Found item');

            var parent = this.getArg(args, 'parent', false),

                id =  this.getArg(args, 'id',  false),

                html = this.getArg(args, 'html',  false),

                callback = this.getArg(args, 'callback', false),

                clName = $(parent).attr('class'),
                list = this.getArg(args, 'list', false);


            if(parent, id, html, callback) {

                $(html).insertBefore(parent);

                var clName = $(parent).attr('class');


                $('#' + id).unbind().click(function(){

                    callback(list, clName);

                });


                this.hint($('#' + id)[0], 'Add ' + clName + ' to GTUI');


            }


        },

        listToUL:function(keyname, list, iconHtmls)
        {

            var html = "<li >" + keyname + "<ul>";

            if(!iconHtmls instanceof Array)
            {
                iconHtmls = [];

            }



            $.each(list, function(ix, item){

                var icons = [];

                icons = icons.concat(iconHtmls);



                if((ix + '').indexOf('__') == -1) {

                    var name = item.name || ix;

                    $.each(icons, function(ix, str){ icons[ix] = str.replace('*', name) });


                    html += "<li class='"+keyname+"_member'>" + name + icons.join(' ') + "</li>";

                }

            });

            return html + "</ul></li>";

        },


      


        GTUI:{

            files:[],

            fileOptions:function(key, callback)
            {

                switch(key)
                {




                }


            },



            Option:function(value, args, eventKeyCall)
            {
              this.value = value;

              this.callback = eventKeyCall;

              var checkBox = args.checkable ? '<input type="checkbox"  />' : '';

              this.element = $('<li>'+value+ checkBox + '</li>');


              var _e = this.element;

              $(this.element).click( function()
              {

                  if(!this.checked)
                  {
                      this.checked = true;

                  }
                  else
                  {
                      this.checked = false;
                  }

                  eventKeyCall('click', _e);

              });

              $(this.element).hover(function(){ eventKeyCall('hover', _e); }, function(){ eventKeyCall('mouseout', _e);  });


              this.appendTo = function(parent)
              {
                  $(parent).append($(this.element));

              };

            },


            renderOptions:function(args)
            {

                var isCheckType = App.getArg(args, 'type', 'check'),

                    x = 200, y = 200,

                    parent = App.getArg(args, 'parent', []),

                    options = App.getArg(args, 'options', []) ;

                    var optionElement = $('.options')[0];

                    var _inst = this, html = '';


                $(optionElement).html('');

                    $.each(options, function(x, e){

                       e.appendTo(optionElement);

                    });

                $(optionElement).css('left', x);

                $(optionElement).css('top', y);

                $(optionElement).show();

                $(optionElement).animate({

                    'left': x,
                    'top': y,
                }, 500, function() {

                });

            },

            __selectedObject:{},

            listmemberkeys:['animations'],

            renderObjectControllable:function(object_members, container, options)
            {

                var html = "";

                $.each(object_members /*This is where our 'MainGame' Object would go*/, function(ix, element_object){

                   if(App.GTUI.listmemberkeys.indexOf(ix) >= 0)
                   {
                       alert(ix);


                    if(ix === 'frames')
                    {
                        alert('frame element');

                    }

                    if((!element_object) || (typeof(ix) == 'string' &&  ix.indexOf('__') >= 0))
                        {
                            return;
                        }

                    var element =  element_object instanceof Array ? element_object : element_object.hasOwnProperty('list') && element_object.list  instanceof Array ? element_object.list : element_object;



                    if(element instanceof Array ) {

                        alert('processing array of len:' + element.length);

                        var eye_icon = '<img data-name="*"  class="tree-edit ctrl xcl__" style="position:absolute; right:2px;   background-image: url(&quot;image/eye_icon.png&quot;);   background-position: center center; background-size: 100% auto;"></img>';
                        var cross_icon = '<img data-name="*"  class="tree-delete ctrl xcl__" style="position:absolute; right:25px;   background-image: url(&quot;img/cross_icon.png&quot;);   background-position: center center; background-size: 100% auto;"></img>';

                        html += '<ul class="' + ix + '">' + App.listToUL(ix, element /*INSERT Members of actual array(s)*/, [eye_icon, cross_icon]) + '</ul>';

                    }


                    else if(App.GTUI.listmemberkeys.indexOf(ix) >= 0)
                    {


                        var eye_icon = '<img data-name="*" class="tree-edit ctrl xcl__"  style="position:absolute; right:2px;  background-image: url(&quot;img/eye_icon.png&quot;);   background-position: center center; background-size: 100% auto;"></img>';
                        var cross_icon = '<img data-name="*"  class="tree-delete ctrl xcl__" style="position:absolute; right:25px;  background-image: url(&quot;img/cross_icon.png&quot;);   background-position: center center; background-size: 100% auto;"></img>';


                        html += '<ul class="' + ix + '">' + App.listToUL(ix, element /*INSERT Members of actual array(s)*/, [eye_icon, cross_icon]) + '</ul>';



                    }


                   }
                    
                });

                var mainElement = $(container);

                if($(container).length < 1) {

                  mainElement = $('.controllable')[0];


                }

                $(mainElement).find('img,ul').remove();

                $(mainElement).append(html);

                $.each(object_members /*This is where our 'MainGame' Object would go*/, function(ix, element_object){

                    if((!element_object) || (typeof(ix) == 'string' &&  ix.indexOf('__') >= 0))
                    {
                        return;
                    }


                    var element = element_object instanceof Array ? element_object : element_object.list  instanceof Array ? element_object.list : element_object;



                    var  add_button_html= '<img id="*" class="tree-add ctrl"  style="position:relative;  top:20px; left:0px; width:15px; height:15px; background-image: url(&quot;img/add_icon.png&quot;);   background-position: center center; background-size: 100% auto;"></img>';

                    var my_id = ix + '_add';


                    var nameElement = ix; //always should be the name of the variable

                    add_button_html = add_button_html.replace('*', my_id);


                    var relationals = ['action'];

                    var object_watch = App.GTUI.listmemberkeys;

                    var relMode = false, proceed = false;

                    Quazar.each(relationals, function(ir, item){

                        if(ix !== '' && ix && item.indexOf(ix) >= 0) //the relational key contains text of non-empty object key
                        {
                            proceed = true;
                            relMode = true;

                        }
                    });


                    Quazar.each(object_watch, function(io, item){

                        if(ix !== '' && ix && item.indexOf(ix) >= 0) //the object_watch key contains sought after text
                        {
                            proceed = true;

                        }
                    });




                    if(proceed || element instanceof Array ) {

                        App.applyControl({parent:$('.' + ix /*The class previously inserted*/), clName:ix, list:element,
                        id: my_id,html: add_button_html,
                        callback:function(list, clName){

                     //  alert('event for: add ' + element);

                          //  alert('Adding object of type:' + element[0].constructor);

                            App.lock_events();

                            var instantiator;

                            var tp_inst = false;


                            if(element instanceof  Array )
                            {
                                instantiator =  element[0] && element[0].constructor ? element[0].constructor.name : false;



                            }
                            else
                            {
                               tp_inst = element.hasOwnProperty('__typeProfile') ? element.__typeProfile.__key : instantiator;

                               instantiator = tp_inst;

                            }



                            var addElement = function() {

                                if (element instanceof (Array)) {


                                    element.push(myNewObject);

                                    renderListMembers(element, clName);


                                }
                                else if (typeof(element) == 'object') {

                                    alert('click on element:' + clName + ':with members::' + jstr(element));

                                    var done = false;

                                    var x = 0;

                                    while (!done && x < 200) {

                                        x++;

                                        if (!element['instance_' + x]) {

                                            element['instance_' + x] = myNewObject;
                                            done = true;
                                        }

                                    }


                                    renderListMembers(element, clName);

                                }

                            }


                            if(instantiator &&  Quazar.samples[instantiator] && Quazar.samples[instantiator][0]) {


                                if(window[instantiator]) {

                                    alert('adding by inst');

                                    // create Deep copy
                                    var myNewObject = Quazar.samples[instantiator][0]();
                                    /*
                                *
                                *
                                *
                                *
                                *
                                *
                                * */

                                addElement();

                                };


                            }
                            else
                            {
                               // alert('Using alternate means of instantiation. With element:' + jstr(element));

                                // create Deep copy

                               if(window[instantiator]) {

                                   alert('adding');

                                   var myNewObject = new window[instantiator];

                                   addElement();

                               }


                            }


                        }



                        });

                    }


                    var arrayListEvents = function(list, clName) {

                      //  alert('showing array for:' + clName + ":" + list);

                        var lix = 0;

                        $.each($('.' + clName + ' li ul li'), function (ix, el) {

                            //distinguish a callback for displaying the element

                            var member = list[ix];

                            lix+= 1;

                            //we have: 1. The selected class

                            var cl = $(el).attr('class').replace('_member', '');


                            console.log(list + ' :li click');

                            var prevent = false;

                            $(el).on('click', function () {

                                // alert('click on' + list + "::" + (ix - 1));

                                //get reference to the object

                                if(Game.GameWindow[clName] && Game.GameWindow[clName].list) {

                                    //apply the top level object::

                                    var object = Game.GameWindow[clName].list[ix] || false;

                                    //  alert('Got click on object:' + jstr(object));

                                    if (object) {


                                        App.GTUI.__selectedObject = object;

                                        DatGui.get(App.GTUI.__selectedObject, ix);

                                        App.GTUI.renderObjectControllable(object, $('.selected_object')[0]);


                                    }


                                }
                               else if(!prevent)
                                {
                                    prevent = true;

                                    window.setTimeout(function(){

                                        prevent = false;

                                    },100);

                                    $(this).find('.tree-edit').click();

                                }


                            });

                            $(el).hover(function () {

                                $(this).css('background-color', '#003366');

                                $(this).css('color', 'white');

                            }, function () {

                                $(this).css('background-color', 'black');

                                $(this).css('color', 'white');

                            });

                        });

                    };



                    var renderListMembers = function(list, clName) {

                       // alert('showing array for:' + clName + ":" + list);


                           // alert('processing array');

                       var eye_icon = '<img id="*" class="tree-edit ctrl" style="position:absolute; right:5px;    background-image: url(&quot;img/eye_icon.png&quot;);   background-position: center center; background-size: 100% auto;"></img>';
                       var cross_icon = '<img id="*" class="tree-delete ctrl" style="position:absolute; right:25px; background-image: url(&quot;img/cross_icon.png&quot;);   background-position: center center; background-size: 100% auto;"></img>';

                      html = App.listToUL(clName, list /*INSERT Members of actual array(s)*/, [eye_icon, cross_icon]) + '</ul>';


                       var container =  $('.' + clName);

                       $(container).html( html);




                        arrayListEvents(list, clName);

                     };

                    arrayListEvents(element, ix);

                    
                });

                return html;

            },


            renderCheckables:function(checkables, clickCallback)
            {

                var defOptionCall = function(evt_key, target)
                {

                    switch(evt_key)
                    {
                        case "hover":

                            $(target).css('background-color', '#003366');

                            $(target).css('color', 'white');

                            break;

                        case "mouseout":

                            $(target).css('background-color', 'black');

                            $(target).css('color', 'white');

                            break;

                        case "click":

                            clickCallback();

                            alert('clicked');

                            break;

                    }

                };




                var Option = App.GTUI.Option;

                var checks = [];

                if(typeof(checkables) == 'object') {

                        Quazar.each(checkables, function(ix, item){

                        checks.push( new Option(item.name, {checkable:true}, defOptionCall));

                        });

                        }



                App.GTUI.renderOptions({type:'basic',
                    options:checks});




            },

            renderByType:function(object_members, title, x, y)
            {

                var html = "";

                var testMembers = ["1", "2", "3", "4"];

                $.each(object_members /*This is where our 'MainGame' Object would go*/, function(ix, element){


                    var eye_icon = '<img id="*" class="tree-edit ctrl" style="position:relative;  top:2px; right:-30px;  background-image: url(&quot;img/eye_icon.png&quot;);   background-position: center center; background-size: 100% auto;"></img>';
                    var cross_icon = '<img id="*" class="tree-delete ctrl" style="position:relative;  top:2px; right:-30px;  background-image: url(&quot;img/cross_icon.png&quot;);   background-position: center center; background-size: 100% auto;"></img>';

                    html +=  '<ul class="'+element+'">' + App.listToUL(ix, element /*INSERT Members of actual array(s)*/, [eye_icon, cross_icon]) + '</ul>';

                });


                 if($('.controllable').length <= 1 ){$('body').append('<ul class="controllable"></ul>')};

                var mainElement = $('.controllable')[1];

                $(mainElement).html('<li>'+title+'</li>');

                $(mainElement).append(html);


                $(mainElement).animate({

                    'left': x,
                    'top': y,
                }, 500, function() {

                });

                $(mainElement).show('fast');

                $.each(object_members /*This is where our 'MainGame' Object would go*/, function(ix, element){

                    var  add_button_html= '<img id="*" class="tree-add ctrl" style="position:relative;  top:20px; left:0px; width:15px; height:15px; background-image: url(&quot;img/add_icon.png&quot;);   background-position: center center; background-size: 100% auto;"></img>';

                    var my_id = object_members[ix] + '_add',

                        elementText = element; //always must equal the member name

                    add_button_html = add_button_html.replace('*', my_id);

                    App.applyControl({parent:$('.' + element /*The class previously inserted*/),
                        id: my_id,html: add_button_html,
                        callback:function(object){

                            //   alert('event for: add ' + element);

                            switch(elementText)
                            {

                                /*HOW DO WE ADD EACH OF THESE AS SUB-OBJECT TO AN OBJECT?*/

                                case "animations":

                                    //how do we update an animation?

                                    DatGui.get(object, $('#floating-dat-gui'));

                                    break;


                                case "images":

                                    DatGui.get(object, $('#floating-dat-gui'));

                                    break;

                                case "sounds":

                                    break;


                                case "actions":

                                    break;

                            }


                        }});




                    $.each($('.' + element + ' li ul li'), function(ix, el){

                        console.log(element + ' :li click');

                        $(el).on('click', function()
                        {

                            // alert('click on' + element + "::" + (ix - 1));


                        });

                        $(el).hover( function()
                        {

                            $(this).css('background-color', '#003366');

                            $(this).css('color', 'white');

                        }, function(){

                            $(this).css('background-color', 'black');

                            $(this).css('color', 'white');

                        });

                    });


                });

                return html;

            }

    }
        ,





        init:function()
        {


            //request files from the server:





            App.GTUI.renderObjectControllable(Game.sprites[0], $('.selected_object')[0]);




            $(document).on('change', 'input' ,function (e) {



                App.GTUI.renderObjectControllable(Game.sprites[0], $('.selected_object')[0]);


            });



           $(document).on('click', 'li' ,function (e) {
                e.stopPropagation();

                var items = this.getElementsByTagName("ul");

                if (items.length >= 1 && items[0].style.display == "block")
                    $(this).find("ul").slideUp();
                else {

                    $(this).children(":first").slideDown();


                }

            });




            $(document).on('click', 'span.tree-open' ,function (evt) {


                var controllable = $(evt.target).parent().find('ul');


                if($(controllable).length >= 1) {

                    $('ul.controllable ul').toggle('fast');

                    var clPresent = $(evt.target).hasClass('open');

                    if (clPresent) {

                        $(evt.target).animateRotate(180, 90, 250, 'linear', function () {


                            $(evt.target).removeClass('open');

                        });

                    }
                    else {

                        $(evt.target).animateRotate(90, 180, 250, 'linear', function () {


                            $(evt.target).addClass('open');

                        });

                    }

                }


            });




            $(document).on('click', 'img.tree-edit' ,function (evt) {


                var prt = $(evt.target).parent(),parentObjectName = $(prt).prop('class');

                parentObjectName = parentObjectName.replace('_member', '');


                alert(parentObjectName);


                var index = $(prt).index();

                alert('Got click on edit button for::' + parentObjectName + ': member number::' + index);

                var selectedObject =  Game.sprites[0][parentObjectName],


                    sprop = selectedObject[index];


                if(sprop){alert('we have an object of:' + sprop.constructor.name);}

                DatGui.get(sprop, index + "");

            });

            $(document).on('click', 'img.tree-delete' ,function (evt) {


                var prt = $(evt.target).parent(),parentObjectName = $(prt).prop('class');

                parentObjectName = parentObjectName.replace('_member', '');


                var index = $(prt).index();

               // alert('Got click on delete button for::' + parentObjectName + ': member number::' + index);

                var selectedObject =  Game.sprites[0];


                var sprop;

                var x = 0;

                Quazar.each(selectedObject[parentObjectName], function(ix, el){

                    if(x == index)
                    {
                       sprop = el;

                    }

                    x+= 1;



                });


               // if(sprop){alert('we have an object of:' + sprop.constructor.name);}


            });


            $(document).on('click', 'img.main-play' ,function (evt) {


                alert('::clicked the play (main-play) button :: tests the selected object animations will test-play and return to start');

            });


        }

    }



    $(document).ready(function() {
        
        
      


    });


    function animate(time) {

        Game.update();

        Game.ctx.clearRect(0, 0, Game.canvas.width, Game.canvas.height);

        Game.render();

        requestAnimationFrame(animate);

        TWEEN.update(time);

    }





    Quazar.ready(function(lib){



        $.fn.animateRotate = function(startAngle, angle, duration, easing, complete) {
            var args = $.speed(duration, easing, complete);
            var step = args.step;
            return this.each(function(i, e) {
                args.complete = $.proxy(args.complete, e);
                args.step = function(now) {
                    $.style(e, 'transform', 'rotate(' + now + 'deg)');
                    if (step) return step.apply(e, arguments);
                };

                $({deg: startAngle}).animate({deg: angle}, args);
            });
        };



        Game.init();

        animate();


        App.init();



        // var gui = DatGui.get(lib.samples['Animation'][0]);

    });



</script>


</body>
</html>