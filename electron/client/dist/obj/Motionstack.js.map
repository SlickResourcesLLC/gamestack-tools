{"version":3,"sources":["../../../ecma/obj/Motionstack.js"],"names":["Motionstack","args","object_id","getArg","Array","distance","curvesList","curvesObject","curve","TWEEN","Easing","Quadratic","InOut","targetRotation","name","description","curveString","getCurveString","setCurve","line","duration","delay","key","fallback","hasOwnProperty","c","Quazar","each","ix","easing","iy","easeType","indexOf","toLowerCase","push","__inst","$","cps","split","s1","s2","alert","tweens","objects","Game","sprites","item","id_item","id","target","x","position","y","z","rotation","Tween","Elastic","to","onUpdate","onComplete","isNaN","fire","__tweenObject","window","setTimeout","start","engageTween","console","callback","Motion","key_members","value","add","update","obj","error","object"],"mappings":"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","file":"Motionstack.js","sourcesContent":["/**\r\n * Created by The Blakes on 04-13-2017\r\n *\r\n */\r\n\r\n\r\n\r\nclass Motionstack {\r\n    constructor(args) {\r\n\r\n\r\n\r\n        this.object_id =  this.getArg(args, 'object_id', this.getArg(args, 'object_ids', '__0'));\r\n\r\n        if(this.object_id instanceof Array)\r\n        {\r\n\r\n\r\n        }\r\n        else\r\n        {\r\n            this.object_id = [this.object_id];\r\n\r\n        }\r\n\r\n\r\n\r\n\r\n\r\n        this.distance =  this.getArg(args, 'distance', this.getArg(args, 'distances', false));\r\n\r\n        this.curvesList =  this.curvesObject();\r\n\r\n        this.curve =  this.getArg(args, 'curve', TWEEN.Easing.Quadratic.InOut);\r\n\r\n\r\n        this.targetRotation = this.getArg(args, 'targetRotation', 0);\r\n\r\n\r\n        this.name =  this.getArg(args, 'name', false);\r\n\r\n        this.description =  this.getArg(args, 'description', false);\r\n\r\n\r\n        this.curveString = this.getCurveString();\r\n\r\n\r\n        this.setCurve(this.curveString);\r\n\r\n\r\n        this.line =  this.getArg(args, 'line', false);\r\n\r\n        this.duration =  this.getArg(args, 'duration', 500);\r\n\r\n        this.delay =  this.getArg(args, 'delay', 0);\r\n\r\n\r\n    }\r\n\r\n\r\n    getArg(args, key, fallback) {\r\n\r\n        if (args.hasOwnProperty(key)) {\r\n\r\n            return args[key];\r\n\r\n        }\r\n        else {\r\n            return fallback;\r\n\r\n        }\r\n\r\n\r\n    }\r\n\r\n\r\n    curvesObject()\r\n{\r\n\r\n    var c =[];\r\n\r\n  Quazar.each(TWEEN.Easing, function(ix, easing){\r\n\r\n      Quazar.each(easing, function(iy, easeType){\r\n\r\n          if(['in', 'out', 'inout'].indexOf(iy.toLowerCase()) >= 0)\r\n          {\r\n\r\n              c.push(ix + \"_\" + iy);\r\n\r\n          }\r\n\r\n      });\r\n\r\n  });\r\n\r\n    return c;\r\n\r\n}\r\n\r\n\r\ngetCurveString()\r\n{\r\n\r\n    var __inst = this;\r\n\r\n    var c;\r\n\r\n    $.each(TWEEN.Easing, function(ix, easing){\r\n\r\n        $.each(TWEEN.Easing[ix], function(iy, easeType){\r\n\r\n\r\n            if(__inst.curve == TWEEN.Easing[ix][iy])\r\n            {\r\n\r\n\r\n\r\n                c = ix + \"_\" + iy;\r\n\r\n            }\r\n\r\n        });\r\n\r\n    });\r\n\r\n\r\n    return c;\r\n\r\n}\r\n\r\n\r\nsetCurve(c)\r\n{\r\n\r\n\r\n\r\n    var cps = c.split('_');\r\n\r\n    var s1 = cps[0], s2 = cps[1];\r\n\r\n\r\n    var curve = TWEEN.Easing.Quadratic.InOut;\r\n\r\n\r\n    $.each(TWEEN.Easing, function(ix, easing){\r\n\r\n        $.each(TWEEN.Easing[ix], function(iy, easeType){\r\n\r\n\r\n            if(ix == s1 && iy == s2)\r\n            {\r\n\r\n                alert('setting curve');\r\n\r\n                curve = TWEEN.Easing[ix][iy];\r\n\r\n            }\r\n\r\n        });\r\n\r\n    });\r\n\r\n    this.curve = curve;\r\n\r\n\r\n    return curve;\r\n\r\n\r\n\r\n}\r\n\r\n    engageTween()\r\n    {\r\n\r\n        var tweens = [];\r\n\r\n        //construct a tween::\r\n\r\n        var __inst = this;\r\n\r\n\r\n        var objects = {};\r\n\r\n\r\n\r\n\r\n       $.each(Game.sprites, function(ix, item){\r\n\r\n           $.each(__inst.object_id, function(iy, id_item) {\r\n\r\n               if(item.id == id_item)\r\n               {\r\n\r\n                alert('mathc');\r\n\r\n                objects[ix] = item;\r\n\r\n               }\r\n\r\n           });\r\n\r\n\r\n\r\n       });\r\n\r\n\r\n        var target = {\r\n\r\n            x:__inst.distance.x + objects[0].position.x,\r\n            y:__inst.distance.y + objects[0].position.y,\r\n            z:__inst.distance.z + objects[0].position.z\r\n\r\n        };\r\n\r\n        if(__inst.targetRotation > 0)\r\n        {\r\n\r\n\r\n            target =__inst.targetRotation + objects[0].rotation.x;\r\n\r\n            //we have a target\r\n            tweens[0] = new TWEEN.Tween(objects[0].rotation )\r\n                .easing(__inst.curve || TWEEN.Easing.Elastic.InOut)\r\n\r\n                .to({x:target}, 500)\r\n                .onUpdate(function() {\r\n                    //console.log(objects[0].position.x,objects[0].position.y);\r\n\r\n\r\n\r\n                })\r\n                .onComplete(function() {\r\n                    //console.log(objects[0].position.x, objects[0].position.y);\r\n\r\n\r\n                });\r\n\r\n\r\n\r\n        }\r\n\r\n        else {\r\n\r\n            //we have a target\r\n            tweens[0] = new TWEEN.Tween(objects[0].position)\r\n                .easing(__inst.curve || TWEEN.Easing.Elastic.InOut)\r\n\r\n                .to(target, 500)\r\n                .onUpdate(function () {\r\n                    //console.log(objects[0].position.x,objects[0].position.y);\r\n\r\n\r\n                })\r\n                .onComplete(function () {\r\n                    //console.log(objects[0].position.x, objects[0].position.y);\r\n\r\n\r\n                });\r\n\r\n        }\r\n\r\n\r\n\r\n       __inst.delay  = !isNaN(__inst.delay) && __inst.delay > 0 ?  __inst.delay : 0;\r\n\r\n\r\n\r\n\r\n\r\n\r\n        return{\r\n\r\n               tweens:tweens,\r\n\r\n               delay:__inst.delay,\r\n\r\n                fire:function() {\r\n\r\n                   var __tweenObject = this;\r\n\r\n                   window.setTimeout(function(){\r\n\r\n                       __tweenObject.tweens[0].start();\r\n\r\n                   }, this.delay);\r\n\r\n\r\n                }\r\n\r\n\r\n        }\r\n\r\n\r\n    }\r\n\r\n    start()\r\n    {\r\n        this.engageTween().fire();\r\n\r\n    }\r\n\r\n    simultan()\r\n    {\r\n        Quazar.each(this.tweens, function (ix, item) {\r\n\r\n            console('');\r\n\r\n            item.start();\r\n\r\n        });\r\n\r\n    }\r\n    synchro()\r\n    {\r\n\r\n\r\n    }\r\n\r\n\r\n\r\n    onUpdate(callback) {\r\n\r\n\r\n    }\r\n\r\n    onComplete(callback) {\r\n\r\n    }\r\n\r\n\r\n}\r\n\r\n\r\n\r\nvar Motion = function(key_members, value)\r\n{\r\n\r\n    return {\r\n\r\n        add:function(){  this.update = function(obj){ Quazar.each(key_members, function(ix, item){ obj[item] += value; }); }; },\r\n\r\n        update:function(){ console.error('unset update'); },\r\n\r\n        to:function(obj){ this.update(); },\r\n\r\n        object:object,\r\n\r\n        value:value,\r\n\r\n        id: id\r\n\r\n    }\r\n\r\n\r\n};\r\n\r\n\r\n\r\n\r\n\r\n"]}